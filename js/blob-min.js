(()=>{(function(){function i(l,n,h,S){return isNaN(l)?n:l<h?h:l>S?S:l}function ye(l,n){for(var h={},S=1;4>S;S++){var V=l["wave"+S];if(V)for(var _ in V)!isNaN(V[_])&&_ in De&&(h[De[_]+S]=V[_])}if(n)for(_ in tn)_ in h||(h[_]=0);return h}function z(l,n){function h(e){e=u.width=K.clientWidth;var r=u.height=K.clientHeight;Ue&&(Ae=r/e>$e?e/qe:r/Le),X&&(te=w+N*e,ie=T+O*r)}function S(e,r,s){return s=Ne/(Te+s),{x:s*e,y:s*r,alpha:1>s?s*s:1,scale:s}}function V(){var e,r,s,c,x,Pe,oe;ne=Math.sqrt(W*W+b*b),m=W/ne||1e-4,v=-b/ne||1e-4,ee=Math.sin(t.angle),G=Math.cos(t.angle),c=[[m*m+v*v*G,m*v*(1-G),v*ee],[m*v*(1-G),v*v+m*m*G,-m*ee],[-v*ee,m*ee,(m*m+v*v)*G]],oe=I;var re=[],M;for(M=0;3>M;M++)for(re[M]=[],e=0;3>e;e++)re[M][e]=c[M][0]*oe[0][e]+c[M][1]*oe[1][e]+c[M][2]*oe[2][e];for(I=re,u.width=u.width,C.fillStyle=pe,X?C.translate(u.width/2+te,u.height/2+ie):C.translate(u.width/2,u.height/2),Ue&&C.scale(Ae,Ae),re=Ee;re--;)for(c=re/Ee*ue-xe,M=oe=Math.round(Ee*Math.cos(c)*2);M--;)e=M/oe*2*ue-ue,s=(J+t.amp1*Math.sin(t.freq1*c+t.pha1))*Math.cos(c)*Math.cos(e),x=(J+t.amp2*Math.sin(t.freq2*e+t.pha2))*Math.cos(c)*Math.sin(e),Pe=(J+t.amp3*Math.sin(t.freq3*c+t.pha3))*Math.sin(c),e=I[0][0]*s+I[0][1]*x+I[0][2]*Pe,r=I[1][0]*s+I[1][1]*x+I[1][2]*Pe,s=I[2][0]*s+I[2][1]*x+I[2][2]*Pe,e=S(e,r,s),r=de*e.scale,C.globalAlpha=e.alpha,0<r&&C.fillRect(e.x,e.y,r,r)}function _(e){var r=u.getBoundingClientRect();return{x:e.clientX-r.left-te,y:e.clientY-r.top-ie}}function le(e){we=new Date().getTime(),we-Ge>1e3/Xe&&(E=_(e),B=E.x-Me,F=E.y-Se,H=Math.sqrt(B*B+F*F),ae=Math.sqrt((E.x-u.width/2)*(E.x-u.width/2)+(E.y-u.height/2)*(E.y-u.height/2)),H&&ae<Y&&(Oe=ae<P?1:(Y-ae)/(Y-P),Math.abs(Math.acos((B*Ye+F*je)/(Ce*H)))>Math.PI/2&&(k*=-1),Math.min(H,Re)*U*Oe>Math.abs(t.angle)&&(Ve.stop(),t.angle=k*Math.min(H,Re)*U*Oe,b=k*B,W=k*F,Ve=Be.run(t,{angle:k*se},d.powOut(3),ge,L)),Ye=B,je=F,Ce=H),Me=E.x,Se=E.y,Ge=we)}function Z(e){document.removeEventListener("mousemove",Z),E=_(e),Me=E.x,Se=E.y,document.addEventListener("mousemove",le)}var he=document.getElementById(l);if(he){z.instances[l]&&z.instances[l].destroy(),z.instances[l]=this,n||(n={});var o=Number.POSITIVE_INFINITY,R=Number.NEGATIVE_INFINITY,Xe=30,Re=100,ue=Math.PI,xe=ue/2,Ee="DETALIZATION"in n?i(n.DETALIZATION,60,1,o):i(n.DETALISATION,60,1,o),J=i(n.BLOB_SIZE,220,1,o),$=i(n.BLOB_DISTANCE,1e3,0,o),se=i(n.ROTATION_SPEED,5,0,o)/1e3,A=i(n.PERSPECTIVE_DISTORTION,1,.001,o),w=i(n.OFFSET_X,0,R,o),T=i(n.OFFSET_Y,0,R,o),N=i(n.PERCENTAGE_OFFSET_X,0,R,o)/100,O=i(n.PERCENTAGE_OFFSET_Y,0,R,o)/100,de=i(n.DOT_SIZE,2,0,o),pe=n.DOT_COLOR||"black",Ue=n.AUTO_SCALE,qe=i(n.VIEWPORT_WIDTH,800,100,o),Le=i(n.VIEWPORT_HEIGHT,800,100,o),P=i(n.MOUSE_DISTANCE_MIN,20,0,o),Y=i(n.MOUSE_DISTANCE_MAX,P+400,P+.001,o),U=i(n.MOUSE_SENSITIVITY,1,0,o)/1e3,ge=1e3*i(n.INERTIAL_TIME,2,0,o),ze=n.INITIAL_SHAPE||{wave1:{amplitude:70,frequency:3,phase:0},wave2:{amplitude:60,frequency:2,phase:0},wave3:{amplitude:50,frequency:2,phase:0}},fe=n.USE_MORPHING,me=n.USE_WAVE_MOTION,be=n.USE_WAVE_SWING,Ze="MORPHING_AUTOPLAY"in n?n.MORPHING_AUTOPLAY:!0,We=i(n.MORPHING_DURATION,2,0,o),Je=i(n.MORPHING_DELAY,1,0,o),j=n.MORPHING_TRANSITION_TYPE||"cubic",p=n.MORPHING_SHAPES||[];if(me&&fe&&p.length){for(var g=1;4>g;g++)if(n["WAVE_"+g+"_MOTION_SPEED"])for(var f=p.length;f--;){var Q=p[f]["wave"+g];Q&&"phase"in Q&&delete Q.phase}}if(be)for(g=1;4>g;g++){var y=n["WAVE_"+g+"_SWING_SETTINGS"];if(y){for(var q in y){var a=y[q];if(a){if(fe)for(f=p.length;f--;)(Q=p[f]["wave"+g])&&q in Q&&delete Q[q];"type"in a&&(a.wave=(typeof a.type=="function"?a.type:nn[a.type])||ce.sin,delete a.type),"amplitude"in a&&isNaN(a.amplitude)&&delete a.amplitude,"frequency"in a&&isNaN(a.frequency)&&delete a.frequency,"phase"in a&&isNaN(a.phase)&&delete a.phase}}y.phase&&me&&(n["WAVE_"+g+"_MOTION_SPEED"]=0)}}var ve=n.WAVE_1_MOTION_SPEED,Ie=n.WAVE_2_MOTION_SPEED,_e=n.WAVE_3_MOTION_SPEED,Te=$/A,Ne=1e3/A,K=function(){var e=document.createElement("div");return Fe.set(e,{position:"relative",width:"100%",height:"100%",top:0,left:0,margin:0,userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none",KhtmlUserSelect:"none",userDrag:"none",WebkitUserDrag:"none",overflow:"hidden",cursor:"default"}),e.setAttribute("unselectable","on"),he.appendChild(e),e}(),u=function(){var e=document.createElement("canvas");return Fe.set(e,{position:"absolute",width:"100%",height:"100%",top:0,left:0,margin:0}),K.appendChild(e),e}(),C=u.getContext("2d"),L=new Qe,t=function(){var e={set:function(c){for(var x in c)this[x]=c[x]},angle:se},r=ye(ze,!0),s;for(s in r)e[s]=r[s];return e}(),b=5,W=5,k=1,Ve={stop:function(){}},ee=Math.sin(t.angle),G=Math.cos(t.angle),ne=Math.sqrt(W*W+b*b),m=W/ne,v=-b/ne,I=[[1,0,0],[0,1,0],[0,0,1]],ae,Oe,E,Ye=0,je=0,Ce=0,B,F,H,Me,Se,we,Ge=new Date().getTime(),D,Ae,te=0,ie=0,X=w||T||N||O,$e=Le/qe;if(this.resize=function(){h()},this.destroy=function(){z.instances[l]=null,L.removeAllListeners(),D&&D.clear(),window.removeEventListener("resize",h),document.removeEventListener("mousemove",Z),document.removeEventListener("mousemove",le),K.removeChild(u),he.removeChild(K),he=l=n=o=Xe=Re=ue=xe=Ee=J=se=A=de=pe=P=Y=U=ge=ze=fe=me=be=Ue=qe=Le=Ze=We=Je=j=p=ve=Ie=_e=$=Te=Ne=w=T=N=O=K=u=C=L=t=b=W=k=Ve=ee=G=ne=m=v=I=ae=Oe=E=Ye=je=Ce=B=F=H=Me=Se=we=Ge=D=$e=Ae=h=S=V=_=le=Z=X=te=ie=null;for(q in this)delete this[q];this.resize=this.destroy=this.morphTo=function(){}},this.morphTo=function(e){if(fe&&p.length){var r;e&&typeof e=="object"?r=e:!isNaN(e)&&0<=e&&e<p.length&&!(e-Math.floor(e))&&(r=p[e]),r&&Be.run(t,ye(r),typeof j=="function"?j:He[j],1e3*We,L)}},Object.defineProperties(this,{blobSize:{get:function(){return J},set:function(e){J=i(e,220,1,o)},configurable:!0},blobDistance:{get:function(){return $},set:function(e){$=i(e,1e3,0,o),Te=$/A,Ne=1e3/A},configurable:!0},rotationSpeed:{get:function(){return se},set:function(e){t.angle=se=i(e,5,0,o)/1e3},configurable:!0},perspectiveDistortion:{get:function(){return A},set:function(e){A=i(e,1,.001,o),Te=$/A,Ne=1e3/A},configurable:!0},offsetX:{get:function(){return w},set:function(e){X=(w=i(e,0,R,o))||T||N||O,te=w+N*u.width},configurable:!0},offsetY:{get:function(){return T},set:function(e){T=i(e,0,R,o),X=w||T||N||O,ie=T+O*u.height},configurable:!0},percentageOffsetX:{get:function(){return 100*N},set:function(e){N=i(e,0,R,o)/100,X=w||T||N||O,te=w+N*u.width},configurable:!0},percentageOffsetY:{get:function(){return 100*O},set:function(e){O=i(e,0,R,o)/100,X=w||T||N||O,ie=T+O*u.height},configurable:!0},dotSize:{get:function(){return de},set:function(e){de=i(e,2,0,o)},configurable:!0},dotColor:{get:function(){return pe},set:function(e){pe=e||"black"},configurable:!0},mouseDistanceMin:{get:function(){return P},set:function(e){P=i(e,20,0,Y-1e-4)},configurable:!0},mouseDistanceMax:{get:function(){return Y},set:function(e){Y=i(e,P+400,P+.001,o)},configurable:!0},mouseSensitivity:{get:function(){return U},set:function(e){var r=U;(U=i(e,1,0,o)/1e3)&&!r?document.addEventListener("mousemove",Z):r&&!U&&(document.removeEventListener("mousemove",Z),document.removeEventListener("mousemove",le))},configurable:!0},inertialTime:{get:function(){return ge},set:function(e){ge=1e3*i(e,2,0,o)},configurable:!0},wave1Amplitude:{get:function(){return t.amp1},set:function(e){t.amp1=e},configurable:!0},wave2Amplitude:{get:function(){return t.amp2},set:function(e){t.amp2=e},configurable:!0},wave3Amplitude:{get:function(){return t.amp3},set:function(e){t.amp3=e},configurable:!0},wave1Frequency:{get:function(){return t.freq1},set:function(e){t.freq1=e},configurable:!0},wave2Frequency:{get:function(){return t.freq2},set:function(e){t.freq2=e},configurable:!0},wave3Frequency:{get:function(){return t.freq3},set:function(e){t.freq3=e},configurable:!0},wave1Phase:{get:function(){return t.pha1},set:function(e){t.pha1=e},configurable:!0},wave2Phase:{get:function(){return t.pha2},set:function(e){t.pha2=e},configurable:!0},wave3Phase:{get:function(){return t.pha3},set:function(e){t.pha3=e},configurable:!0}}),window.addEventListener("resize",h),h(),fe&&Ze&&p.length){for(D=new Ke,D.delay=Je,f=0,y=p.length;f<y;f++)D.addTween(t,ye(p[f]),typeof j=="function"?j:He[j],We,L);D.addQueue(D),D.run()}if(me&&(f=function(){var e={},r=0;return ve&&!isNaN(ve)&&(e.pha1=ve,r++),Ie&&!isNaN(Ie)&&(e.pha2=Ie,r++),_e&&!isNaN(_e)&&(e.pha3=_e,r++),r?new en(t,e,L):0}())&&f.play(),be){for(f=1;4>f;f++)if(y=n["WAVE_"+f+"_SWING_SETTINGS"])for(q in y)(g=De[q])&&new ke(t,g+f,y[q],L).play()}L.addListener(V),U&&document.addEventListener("mousemove",Z)}else alert("BlobAnimation ERROR: There is no element with the specified id")}var Qe=jsband.Metronome,d=jsband.Ease,Be=jsband.Tween,Fe=jsband.CssProp,Ke=jsband.Queue,ke=jsband.Swing,ce=jsband.Wave,en=jsband.Motion,He={linear:d.lin(),quad:d.pow(2),cubic:d.pow(3),quart:d.pow(4),quint:d.pow(5),circ:d.circ(),sine:d.sin(),expo:d.exp(),elastic:d.osc2Out(),bounce:d.bncOut(),back:d.backOut()},nn={sine:ce.sin,linear:ce.triangle,pulse:ce.pulse},tn={amp1:1,freq1:1,pha1:1,amp2:1,freq2:1,pha2:1,amp3:1,freq3:1,pha3:1},De={amplitude:"amp",frequency:"freq",phase:"pha"};z.instances={},window.BlobAnimation=z})();})();
