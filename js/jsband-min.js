(()=>{var vt=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var xt=vt((exports,module)=>{(function(){function D(e){console.log(e)}function ia(e,r){var o=function(){};o.prototype=r.prototype,e.prototype=new o,e.prototype.constructor=e,e.prototype.super=r,"OWN_PROPS"in r&&(e.OWN_PROPS=r.OWN_PROPS.slice())}function $(e){if(e=e.replace(/ /g,""),e.indexOf("#")!=-1){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16),a:1}:null}return r=e.toLowerCase(),r.indexOf("rgb(")!=-1||r.indexOf("rgba(")!=-1?(r=r.substring(r.indexOf("(")+1,r.indexOf(")")).split(","),{r:Number(r[0]),g:Number(r[1]),b:Number(r[2]),a:3<r.length?Number(r[3]):1}):typeof Ca[r]!="undefined"?(e=Ca[r],e.a=1,e):(r=F.PIXEL,r.save(),r.fillStyle=e,r.fillRect(0,0,1,1),e=r.getImageData(0,0,1,1).data,e={r:e[0],g:e[1],b:e[2],a:e[3]/255},r.restore(),r.clearRect(0,0,2,2),e)}function Da(e){var r=e.r/255,o=e.g/255,h=e.b/255;e="a"in e?e.a:1;var l;l=Math.min(r,o,h);var d=Math.max(r,o,h);return d==l?{h:0,s:0,l:100*l,a:e}:(r=d==r?60*(o-h)/(d-l)+(o<h?360:0):d==o?60*(h-r)/(d-l)+120:60*(r-o)/(d-l)+240,o=(d-l)/(1-Math.abs(1-d-l)),l=(d+l)/2,{h:Math.round(r),s:Math.round(100*o),l:Math.round(100*l),a:e})}function A(e,r){return isNaN(e)||0>e?r:e}function ra(e,r,o,h){return isNaN(e)?h:e<r?r:e>o?o:e}function Ea(){var e=new this.constructor,r=this.constructor.OWN_PROPS;for(i=r.length;i--;)e[r[i]]=this[r[i]];return e}function R(){var e=Ea.call(this);e.listeners={};for(var r in this.listeners)e.listeners[r]=this.listeners[r].slice();return(r=sa.of(this))&&r.addTo(e),e}function L(e,r){return Math.sqrt(e*e+r*r)}function aa(){var e,r=[],o=[];this.get=function(h){for(e=r.length;e--;)if(r[e]===h)return o[e]},this.set=function(h,l){for(e=r.length;e--;){if(k=r[e],k===h){o[e]=l;return}this.useGC&&this.gcCondition(k,o[e])&&(r.splice(e,1),o.splice(e,1),this.useGCEvents&&this.dispatchEvent("removedByGC",{key:k,value:o[e]}))}r.push(h),o.push(l)},this.has=function(h){for(e=r.length;e--;)if(r[e]===h)return!0;return!1},this.delete=function(h){for(e=r.length;e--;)if(r[e]===h){r.splice(e,1),o.splice(e,1);break}},Object.defineProperty(this,"size",{get:function(){return r.length},enumerable:!0,configurable:!1}),this.log=function(){for(D(""),D('Hash-table "'+this.name+'" log:'),D(""),e=0,n=r.length;e<n;e++)D(e+". key = "+r[e]+", value = "+o[e])},this.name="untitled",this.gcCondition=aa.EMPTY_GC_CONDITION,this.useGCEvents=this.useGC=!1,G.init(this)}function I(){if(arguments.length&&arguments[0]===S){var e=arguments[1],r=e.errorType;if(e.hostClass)var o=e.hostClass.getID(),h=e.hostClass.prototype.className;else o=I.getID(),h="SoftMap"}else r='SoftMap "set"',o=I.getID(),h="SoftMap";var l=0,d=B.createHiddenZone,f=B.keyIsObject,_=B.keyIsFixed,m=B.hiddenZoneOf,g=B.keyHasHiddenZone,v=B.keyKnowsID;this.set=function(p,x){if(!f(p))return D(r+" ERROR: "+p+" is not an Object"),!1;if(g(p))v(p,o)||(l++,m(p).propsTotal++);else{if(_(p))return D(r+" ERROR: "+p+' is frozen or its "valueOf" is not configurable'),!1;d(p),l++,m(p).propsTotal++}return m(p)[o]=x,!0},this.get=function(p){if(f(p)&&g(p))return m(p)[o]},this.has=function(p){return f(p)&&g(p)&&v(p,o)},this.hasPair=function(p,x){return this.has(p)&&m(p)[o]===x},this.delete=function(p){return this.has(p)?(delete m(p)[o],m(p).propsTotal--,l--,!0):!1},Object.defineProperty(this,"size",{get:function(){return l}}),this.traceID=function(){D(h+" instance id == "+o)},this.traceCollectionsOf=B.traceCollectionsOf}function ba(){var e=new I(S,{hostClass:ba,errorType:'SoftSet "add"'});this.add=function(r){return e.set(r,!0)},this.has=function(r){return e.has(r)},this.delete=function(r){return e.delete(r)},Object.defineProperty(this,"size",{get:function(){return e.size}}),this.traceID=function(){e.traceID()},this.traceCollectionsOf=B.traceCollectionsOf}function O(){if(arguments.length&&arguments[0]===S)var e=arguments[1],r=e.errorType,o=e.hostClass;var h=e?new I(S,{hostClass:o||O,errorType:r||'HardMap "set"'}):new I(S,{hostClass:O,errorType:'HardMap "set"'}),l={},d={},f={},_=0;this.set=function(m,g){var v=!B.keyIsObject(m);if(v){var p=m;f.hasOwnProperty(m)&&(m=f[m])}return h.has(m)?(v=h.get(m),d[v]=g,!0):(v&&(f[p]=m={$:m}),h.set(m,++_)?(l[_]=v?p:m,d[_]=g,!0):(_--,!1))},this.get=function(m){return B.keyIsObject(m)?d[h.get(m)]:f.hasOwnProperty(m)?d[h.get(f[m])]:void 0},this.has=function(m){return B.keyIsObject(m)?h.has(m):f.hasOwnProperty(m)},this.hasPair=function(m,g){return this.has(m)&&this.get(m)===g},this.delete=function(m){if(!B.keyIsObject(m)&&f.hasOwnProperty(m)){var g=f[m];delete f[m],m=g}return g=h.get(m),g!==void 0?(delete l[g],delete d[g],h.delete(m),!0):!1},this.forEach=function(m){for(id in l)m(d[id],l[id],this)},this.forEachKey=function(m,g){for(id in l)m(l[id],g)},this.randomKey=function(){var m=Math.ceil(this.size*Math.random())||1,g=0;for(id in l)if(++g==m)return l[id]},this.clear=function(){for(id in l){var m=l[id];h.delete(B.keyIsObject(m)?m:f[m])}l={},d={},f={},_=0},Object.defineProperty(this,"size",{get:function(){return h.size}}),this.traceID=function(){h.traceID()},this.traceCollectionsOf=B.traceCollectionsOf}function ca(){var e=new O(S,{hostClass:ca,errorType:'HardSet "add"'});this.add=function(r){return e.set(r,!0)},this.has=function(r){return e.has(r)},this.delete=function(r){return e.delete(r)},this.forEach=function(r){e.forEachKey(r,this)},this.clear=function(){e.clear()},this.random=function(){return e.randomKey()},Object.defineProperty(this,"size",{get:function(){return e.size}}),this.traceID=function(){e.traceID()},this.traceCollectionsOf=B.traceCollectionsOf}function T(e){if(e&&e instanceof Object){var r=new T,o;for(o in e)r.add(o);return r}var h={},l,d,f,_=0;this.add=function(m){return m=String(m),this.has(m)||m===""?!1:(_?(f[2]=m,f=h[m]=[f[1],m,0]):h[m]=d=f=[0,m,0],_++,!0)},this.addBefore=function(m,g){if(this.has(m)&&g!=m&&g!==""){if(g=String(g),this.has(g))if(h[m][0]!=g)h[m][0]?(h[g][2]?(l=h[g],h[l[0]][2]=l[2],h[l[2]][0]=l[0]):(l=f,f=h[l[0]],f[2]=0),l[2]=m,l[0]=h[m][0],h[l[0]][2]=h[m][0]=g):(h[g][2]?(d=h[g],h[d[0]][2]=d[2],h[d[2]][0]=d[0]):(d=f,f=h[d[0]],f[2]=0),d[2]=m,d[0]=0,h[m][0]=g);else return!1;else{if(h[m][0]){var v=h[m][0];h[v][2]=g,h[m][0]=g,h[g]=[v,g,m]}else d[0]=g,d=h[g]=[0,g,m];_++}return!0}return!1},this.addAfter=function(m,g){if(this.has(m)&&g!=m&&h[m][2]!=g&&g!==""){if(h[m][2])return this.addBefore(h[m][2],g);f[2]="",f=h[""]=[m,"",0];var v=this.addBefore("",g);return f=h[f[0]],f[2]=0,delete h[""],v}return!1},this.has=function(m){return h.hasOwnProperty(m)},this.nextTo=function(m){return this.has(m)?h[m][2]:void 0},this.prevTo=function(m){return this.has(m)?h[m][0]:void 0},this.delete=function(m){return this.has(m)?(h[m][0]?h[m][2]?(l=h[m],h[l[0]][2]=l[2],h[l[2]][0]=l[0]):(f=h[h[m][0]],f[2]=0):(d=h[h[m][2]],d[0]=0),delete h[m],_--,!0):!1},this.isFirst=function(m){return this.has(m)&&!h[m][0]},this.isLast=function(m){return this.has(m)&&!h[m][2]},Object.defineProperty(this,"size",{get:function(){return _}}),Object.defineProperty(this,"first",{get:function(){return _?d[1]:void 0}}),Object.defineProperty(this,"last",{get:function(){return _?f[1]:void 0}}),this.traceLinks=function(){D(""),D("----- IdChain links: -----");for(var m=d[1];m;)D(m+": ["+h[m]+"]"),m=h[m][2]}}function Fa(e,r){r=r||new T(e);var o=r.first,h,l;this.next=function(){return r.size?l?r.has(l)?((l=r.nextTo(l))&&(o=l),h=!0,{value:l?e[l]:void 0,done:!l}):(l=o=r.first,h=!0,{value:e[l],done:!1}):(l=r.isFirst(o)?1<r.size?o:h?void 0:o:void 0,h=!0,{value:l?e[l]:void 0,done:!l}):{value:void 0,done:!0}},this.prev=function(){return r.size?l?r.has(l)?((l=r.prevTo(l))&&(o=l),h=!1,{value:l?e[l]:void 0,done:!l}):(l=o=r.first,h=!0,{value:e[l],done:!1}):(l=r.isLast(o)&&(1<r.size||h)?o:void 0,h=!1,{value:l?e[l]:void 0,done:!l}):{value:void 0,done:!0}}}function U(){Object.defineProperty(this,"propsTotal",{value:0,configurable:!1,wrirable:!0,enumerable:!1})}function C(e,r,o){(o||3>arguments.length)&&(C.__defaultInstance=this),e=isNaN(e)||0>=e?60:e;var h=e==60;this.frameDuration=1e3/e,r=2>arguments.length?!0:r;var l=null,d=[],f=[],_=0,m=!1,g=!1,v,p=0,x=0,w=this,z={object:{func:function(){w.removeListener(z.object,"func")}},methodName:"func"},j=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(J){return setTimeout(J,w.frameDuration)},y=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||clearTimeout,V=r?function(){for(v=new Date().getTime(),g=!0,p=d.length;p--;)d[p]&&d[p].object[d[p].methodName](v,v);if(g=!1,_)for(x=f.length;x--;)f[x]&&f[x].object[f[x].methodName]();m&&et()}:function(){for(g=!0,p=d.length;p--;)d[p]&&d[p].object[d[p].methodName]();if(g=!1,_)for(x=f.length;x--;)f[x]&&f[x].object[f[x].methodName]();m&&et()},et=h?function(){l=j(V)}:function(){l=setTimeout(V,w.frameDuration)};this.addListener=function(J,tt,it){2>arguments.length?tt="call":typeof arguments[1]=="boolean"&&(it=tt,tt="call");for(var nt=d.length;nt--;)if(d[nt].object===J&&d[nt].methodName===tt)return;nt={object:J,methodName:tt,debugStr:"debugStr"},it?nt.isHidden=it:_++,d.push(nt),m||(m=!0,g||et())},this.removeListener=function(J,tt){2>arguments.length&&(tt="call");for(var it=d.length;it--;)if(d[it].object===J&&d[it].methodName===tt){var nt=!d[it].isHidden;if(nt&&_--,d.splice(it,1),it<p&&p--,d.length){if(!_&&nt)for(it=f.length;it--;)f[it].object[f[it].methodName]()}else if(m=!1,h?y(l):clearTimeout(l),nt)for(it=f.length;it--;)f[it].object[f[it].methodName]();break}},this.removeAllListeners=function(){h?y(l):clearTimeout(l),m=!1,d.length=_=p=0;for(var J=f.length;J--;)f[J].object[f[J].methodName]()},this.addUpdateListener=function(J,tt){for(var it=f.length;it--;)if(f[it].object===J&&f[it].methodName===tt)return;f.push({object:J,methodName:tt})},this.removeUpdateListener=function(J,tt){for(var it=f.length;it--;)if(f[it].object===J&&f[it].methodName===tt){f.splice(it,1),it<x&&x--;break}},this.doNextTick=function(J,tt){function it(){nt.removeListener(it),J()}var nt=this;return tt?this.addListener(it,tt):this.addListener(it),it},this.doLater=function(J,tt,it){function nt(){new Date().getTime()-ht>tt&&(at.removeListener(nt),J())}var at=this,ht=new Date().getTime();return it?this.addListener(nt,it):this.addListener(nt),nt},this.addTimerListener=function(J,tt,it,nt){if(1<arguments.length&&isNaN(arguments[1])){var at=J,ht=tt;J=function(){at[ht]()},tt=it,it=nt,nt=arguments[4]}tt=tt||1e3;var rt=this,ot=new Date().getTime(),st,ut=0;if(nt){var _t=1,ct=nt.repeats||0,ft=nt.precision||1,mt=nt.randomization||0,lt=tt*(1+mt*(2*Math.random()-1)),gt=ft*lt,dt=function(){if(st=new Date().getTime(),ut+=st-ot,ut>gt){for(;ut>gt;)J(),ut-=lt;++_t>ct&&ct?rt.removeListener(dt):(lt=tt*(1+mt*(2*Math.random()-1)),gt=ft*lt)}ot=st};Object.defineProperty(dt,"delay",{get:function(){return tt},set:function(pt){tt=pt,lt=tt*(1+mt*(2*Math.random()-1)),gt=ft*lt}})}else dt=function(){for(st=new Date().getTime(),ut+=st-ot;ut>tt;)J(),ut-=tt;ot=st},Object.defineProperty(dt,"delay",{get:function(){return tt},set:function(pt){tt=pt}});return it?this.addListener(dt,it):this.addListener(dt),dt},this.ensureNextTickUpdate=function(){_||(_++,d.push(z),m||(m=!0,et()))},this.listenersTotal=function(){return d.length},this.getListeners=function(){return d}}function Ha(e,r){var o=e[r];Object.defineProperty(this,"value",{get:function(){return o},set:function(h){o=e[r]=h}})}function ta(e,r,o,h){this.__object=e,this.__delta=r||{},this.__deltaInit={};for(var l in this.__delta)this.__deltaInit[l]=this.__delta[l];this.__ratio=o||{},this.__ratioInit={};for(l in this.__ratio)this.__ratioInit[l]=this.__ratio[l];this.__efs,this.__isPlayed=!1,this.__efs=h||(e.__stage&&e.__stage.metronome?e.__stage.metronome:C.getInstance())}function ua(e,r,o){this.__object=e,this.__delta=r||{},this.__deltaInit={};for(var h in r)this.__deltaInit[h]=r[h];this.__efs=o||(e.__stage&&e.__stage.metronome?e.__stage.metronome:C.getInstance()),this.__frameDuration=this.__efs.frameDuration,this.__isPlayed=!1}function ja(e,r,o){this.__object=e,this.__speed=r||{},this.__speedInit={};for(var h in r)this.__speedInit[h]=r[h];this.__efs=o||(e.__stage&&e.__stage.metronome?e.__stage.metronome:C.getInstance()),this.__speed.__stage={metronome:this.__efs},this.__isPlayed=!1}function va(e,r,o,h){this.__speed=isNaN(r)?0:r,this.__angle=isNaN(o)?0:o*Math.PI/180,this.__motion=new ja(e,{x:this.__speed*Math.cos(this.__angle),y:this.__speed*Math.sin(this.__angle)},h)}function da(e,r,o,h){this.__object=e,this.__propName=r,this.__baseValue=e[r],o?(this.wave="wave"in o?o.wave:H.sin,this.amplitude="amplitude"in o?o.amplitude:10,this.__frequency="frequency"in o?o.frequency:1,this.phase="phase"in o?o.phase:0):(this.wave=H.sin,this.amplitude=10,this.__frequency=1,this.phase=0),this.__efs=h||(e.__stage&&e.__stage.metronome?e.__stage.metronome:C.getInstance()),this.__stage={metronome:this.__efs},this.__isPlayed=!1,this.__startTime=void 0,this.__stopTime}function ea(){this.__stage=this.__context=null,this.__children=[],this.parent=null,this.__name=void 0,this.rotation=this.x=this.y=0,this.scaleX=this.scaleY=1,this.originX=this.originY=0,this.alpha=1,this.matrixLocal=void 0,this.matrixGlobal=t.ZERO,G.init(this),this.masks=[],this.holes=[],this.draw=this.drawNormal,this.getHitAsset=this.getHitAssetNormal}function F(e){function r(v){g.__gestureOccured=!0,g.gesturePoint=g.getMousePoint(v),g.gestures.group1.mouseDown=!0,delete g.gestures.group1.mouseUp,g.isDown=!0}function o(v){g.__gestureOccured=!0,g.gesturePoint=g.getMousePoint(v),g.gestures.group1.mouseUp=!0,delete g.gestures.group1.mouseDown,g.isDown=!1}function h(v){g.__gestureOccured=!0,v=g.getMousePoint(v),(v.x!=g.gesturePoint.x||v.y!=g.gesturePoint.y)&&(g.gesturePoint=v,g.gestures.group1.mouseMove=!0,g.gestures.group2.mouseOver=!0,g.gestures.group2.mouseOut=!0)}function l(v){g.__gestureOccured=!0,g.gesturePoint=g.getMousePoint(v),g.gestures.group1.mouseMove=!0,g.gestures.group2.mouseOver=!0}function d(v){g.__gestureOccured=!0,g.gesturePoint={x:void 0,y:void 0},g.gestures.group2.mouseOut=!0,g.gestures.group1.mouseUp=!0,delete g.gestures.group1.mouseDown}function f(v){g.__gestureOccured=!0,g.gestures.group1.mouseDown=!0,delete g.gestures.group1.mouseUp,g.isDown=!0,g.gesturePoint=g.getTouchPoint(v)}function _(v){g.__gestureOccured=!0,g.__touchEndOccured=!0,g.gestures.group1.mouseUp=!0,delete g.gestures.group1.mouseDown,g.isDown=!1,g.gesturePoint=g.getTouchPoint(v)}function m(v){g.__gestureOccured=!0,g.gesturePoint=g.getTouchPoint(v),g.gestures.group1.mouseMove=!0,g.gestures.group2.mouseOver=!0,g.gestures.group2.mouseOut=!0}this.__container=this.__height=this.__width=this.__context=this.__canvas=this.__canvasID=null,this.__cornerRadius=0,this.__cornerTL,this.__cornerTR,this.__cornerBL,this.__cornerBR,this.draw=this.drawNormal,this.metronome=new C(e,!0,!1),this.clearBeforeDraw=!0,this.listenPassiveGestures=this.__listenGestures=!1,this.gesturePoint={x:void 0,y:void 0},this.isDown=!1,this.hitAsset=void 0,this.hitContainers=[],this.downAsset=void 0,this.downContainers=[],this.outContainers=[],this.__downTimeForDbClick=this.__downTime=0,this.__clickWithoutMouseMotion=!1,this.__dbClickCandidates=[],this.__minDbClickDownTime=0,this.dbClickTime=this.fastClickTime=200,this.pixelRatio=1,this.__touchEndOccured=this.__gestureOccured=!1,this.gestures={group1:{},group2:{},group3:{}};var g=this;this.addDomGestureListeners=function(){var v=this.__canvas;v.addEventListener("mousedown",r),v.addEventListener("mouseup",o),v.addEventListener("mousemove",h),v.addEventListener("mouseenter",l),v.addEventListener("mouseleave",d),v.addEventListener("touchstart",f),v.addEventListener("touchend",_),v.addEventListener("touchmove",m),v.addEventListener("touchcancel",_)},this.removeDomGestureListeners=function(){var v=this.__canvas;v.removeEventListener("mousedown",r),v.removeEventListener("mouseup",o),v.removeEventListener("mousemove",h),v.removeEventListener("mouseenter",l),v.removeEventListener("mouseleave",d),v.removeEventListener("touchstart",f),v.removeEventListener("touchend",_),v.removeEventListener("touchmove",m),v.removeEventListener("touchcancel",_)}}function wa(e){var r=1,o=document.createElement("canvas");xa.set(o,{position:"relative",width:"100%",height:"100%",top:0,left:0,margin:0}),o.width=r*e.clientWidth,o.height=r*e.clientHeight,e.appendChild(o),this.__stage=void 0,Object.defineProperties(this,{canvas:{get:function(){return o}},webElement:{get:function(){return e}},pixelRatio:{get:function(){return r},set:function(h){r=h,this.__stage&&(this.__stage.pixelRatio=h,this.resize())}}}),window.addEventListener("resize",function(h){this.__stage&&this.resize()})}function ka(e,r,o,h,l){this.parent=this.__stage=this.__context=null,this.__name=void 0,this.rotation=this.x=this.y=0,this.scaleX=this.scaleY=1,this.originX=this.originY=0,this.image=null,this.alpha=1,this.draw=this.drawNothing,this.height=this.width=0,this.sx=r,this.sy=o,this.sw=h,this.sh=l,this.matrixLocal=void 0,this.matrixGlobal=t.ZERO,this.isLoading=this.useDeepHitTest=!1,this.calcOwnMatrices=this.calc,G.init(this),e&&(this.src=e)}function W(){this.data=null;var e=this;this.load=function(r){var o=u.ref,h=new XMLHttpRequest;h.open("GET",r,!0),h.onreadystatechange=function(){h.readyState===4&&(h.status===200||h.status==0)&&(e.data=h.responseText,e.hasOwnProperty("onComplete")&&e.onComplete(),o.end())},h.send(null)}}function Ia(e){this.frames=[],this.data=null;var r=this,o,h=function(l,d,f,_){for(l=String(l),d-=l.length;d--;)l="0"+l;o=f+l+_,r.frames.push(o)};this.load=function(l){var d=u.ref,f=new W;f.onComplete=function(){var _=r.data=this.data;r.parse(_),r.hasOwnProperty("onLoad")&&r.onLoad(),d.end()},f.load(l)},this.parse=function(l){l=l.trim().split(" ").join("").split(",");for(var d=l.length,f,_,m,g,v,p=0;p<d;p++)if(f=l[p],g=f.length,_=f.indexOf("*"),_+1){if(m=f.lastIndexOf("*")-_+1,v=f.substr(0,_),f=f.substring(_+m,g),g=f.lastIndexOf("["),_=f.lastIndexOf("]"),g+1&&f.length-_==1)if(_=f.substring(g+1,_),f=f.substr(0,g),g=_.split("-"),1<g.length)if(_=g[0],g=g[1],_<g)for(;_<=g;_++)h(_,m,v,f);else for(;_>=g;_--)h(_,m,v,f);else h(_,m,v,f);else if(e)for(_=0,g=!0;g;){g=_++,g=String(g);for(var x=m-g.length;x--;)g="0"+g;g=v+g+f,(x=e.frames.hasOwnProperty(g))&&(r.frames.push(g),o=g),g=x}}else if(f.indexOf("[")==0&&f.indexOf("]")==g-1){if(m=f.substr(1,g-2),!isNaN(m)&&o)for(;m--;)v=o,r.frames.push(v),o=v}else if(f.indexOf("<")==0&&f.indexOf(">")==g-1){if(m=f.substr(1,g-2),!isNaN(m))for(;m--;)r.frames.length++,o=void 0}else m=f,r.frames.push(m),o=m}}function la(e,r){this.parent=this.__stage=this.__context=null,this.__name=void 0,this.rotation=this.x=this.y=0,this.scaleX=this.scaleY=1,this.originX=this.originY=0,this.alpha=1,this.draw=this.drawImage,this.matrixLocal=void 0,this.matrixGlobal=t.ZERO,this.__imageName=this.__atlasData=null,e&&(this.atlasData=e),r&&(this.imageName=r),this.useDeepHitTest=!1,this.calcOwnMatrices=this.calc,G.init(this)}function ma(e,r){this.parent=this.__stage=this.__context=null,this.__name=void 0,this.rotation=this.x=this.y=0,this.scaleX=this.scaleY=1,this.originX=this.originY=0,this.alpha=1,this.__atlasData=e,this.__totalFrames=(this.__atlasFilmData=r)&&r.frames?r.frames.length:void 0,this.__destinationFrameIndex=this.__startIndex=this.__changeIndexMethodName=void 0,this.__removeInTheEnd=!1,this.__stretchRatio=this.__repeatsNumber=1,this.frameIndex=this.frameTrimLeft=this.frameTrimTop=this.frameHeight=this.frameWidth=this.__stretchCount=0,this.__wasPlayingBeforeRemoving=this.isPlayed=!1,this.loseQueue(),this.matrixLocal=void 0,this.matrixGlobal=t.ZERO,this.draw=this.drawFrame,this.useDeepHitTest=!1,this.__fps=0,this.pivotName=this.__anchorsSource=this.__anchors=this.__fpsTimer=void 0,this.calc=this.calcOwnMatrices=this.calcNormal,G.init(this)}function P(e){if(this.props={},e)for(var r in e)this.props[r]=e[r]}function M(){this.parent=this.__stage=this.__context=null,this.__name=void 0,this.rotation=this.x=this.y=0,this.scaleX=this.scaleY=1,this.originX=this.originY=0,this.alpha=1,this.__text="",this.__style=P.getDefaultTextStyle(),this.__boldItalic=(this.__style.props.bold?"bold ":"")+(this.__style.props.italic?"italic ":""),this.color=this.__style.props.color,this.strokeColor=this.__style.props.strokeColor,this.shadowColor=this.__style.props.shadowColor,this.draw=this.drawNormal,this.__alignOffsetX=this.__height=this.__width=0,this.matrixLocal=void 0,this.matrixGlobal=t.ZERO,this.strokeOverFill=!0,this.useDeepHitTest=!1,this.useFill=!0,this.lines=[],this.__lineSpacing=30,this.__textWidth=void 0,this.__multiline=!1,this.fill=this.fillLine,this.stroke=this.strokeLine,this.measureWidth=this.measureLineWidth,this.measureHeight=this.measureLineHeight,this.calculateText=na,this.calcOwnMatrices=this.calc,G.init(this)}function N(e,r,o){var h=N.parseCSSValue(e.style[r]||(r=="opacity"?"1":"0"));this.__element=e,this.__prop=r,this.__suffix=o||h.suffix,this.__value=h.value}function u(e){function r(){v?v=!1:o.nextTask()}var o=this,h=e=="parallel"?"parallel":"sequence",l=[],d=[],f,_,m;this.onComplete=function(){},this.onStart=function(){};var g,v=!1;this.delay=0,this.getIndex=function(){return f},this.getTaskDataList=function(){return d},this.nextTask=function(){f+1<l.length?l[++f]():_||(v=!1,this.onComplete(),m.end())},this.cancelScheduledTask=function(){v=!0},this.end=function(){h=="sequence"?setTimeout(r,1e3*this.delay):(f++,f>=l.length&&!_&&(v=!1,this.onComplete(),m.end()))},this.onStartBranch=function(){_++,h=="sequence"&&o.nextTask()},this.endBranch=function(){_--,f+1>=l.length&&!_&&(v=!1,this.onComplete(),m.end())},this.run=function(p){if(m=u.ref,l.length||this.addCall(function(){}),g=p,this.onStart(),f=_=0,h=="sequence")l[0]();else if(this.delay){if(l[0](),1<l.length){var x=1;p=function(){var w=arguments.callee;clearInterval(w._delayInterval),x<w.tasks.length&&(w.tasks[x++](),w._delayInterval=setInterval(w,1e3*o.delay))},p.tasks=l,p._delayInterval=setInterval(p,1e3*this.delay)}}else for(x=0;x<l.length;x++)l[x]()},this.clear=function(){l.length=d.length=0,v=!1},this.getArgs=function(){return g},this.clone=function(){for(var p=new u,x=l.length,w=0;w<x;w++)p.addTaskData(d[w]);return p},this.addTask=function(){d.push(arguments);var p;p=[];for(var x=1;x<arguments.length;x++)p[x-1]=arguments[x];return arguments[0]instanceof Function?p=u.createTask2(this,arguments[0],p):(p.shift(),p=u.createTask3(this,arguments[0],arguments[1],p)),l.push(p),p._result},this.addBranchTask=function(){d.push(arguments);var p;p=[];for(var x=1;x<arguments.length;x++)p[x-1]=arguments[x];return arguments[0]instanceof Function?p=u.createTask2(this,arguments[0],p,!0):(p.shift(),p=u.createTask3(this,arguments[0],arguments[1],p,!0)),l.push(p),p._result},this.addTaskData=function(p){d.push(p);var x=p.concat();x.shift(),p[0]instanceof Function?p=u.createTask2(this,p[0],x):(x.shift(),p=u.createTask3(this,p[0],p[1],x)),l.push(p)},this.addQueue=function(p,x){return this.addTask(p,"run",x)},this.addBranchQueue=function(p,x){return this.addBranchTask(p,"run",x)},this.addQueueClone=function(p,x){return this.addQueue(p.clone(),x)},this.attachQueue=function(p,x){return this.addCall(p,"run",x)},this.embedQueue=function(p){p=p.getTaskDataList();for(var x=p.length,w=0;w<x;w++)this.addTaskData(p[w])},this.addCall=function(){for(var p=[],x=1;x<arguments.length;x++)p[x-1]=arguments[x];var w=arguments[0];if(w instanceof Function)x=function(){var j=u.ref,y=w.apply(null,p);return j.end(),y};else{p.shift();var z=arguments[1],x=function(){var y=u.ref,V=w[z].apply(w,p);return y.end(),V}}return this.addTask(x)},this.addPause=function(p,x){return this.addTask(x?ya.frames:ya.seconds,p)},this.addWait=function(){var p=arguments,x=p[0];return typeof x=="string"?this.addTask(function(){var w=u.ref,z=1<p.length?p[1]:document,j=function(y){z.removeEventListener(x,j),w.end()};z.addEventListener(x,j)}):this.addTask(Ja.run,x)},this.addTween=function(p,x,w,z,j){this.addTask(fa.run,p,x,w,1e3*z,j)},this.addCallTween=function(p,x,w,z,j){this.addCall(fa.run,p,x,w,1e3*z,j)},this.addBranchTween=function(p,x,w,z,j){this.addBranchTask(fa.run,p,x,w,1e3*z,j)},this.addLoad=function(p){if("load"in p){for(var x=[arguments[0],"load"],w=arguments.length,z=1;z<w;z++)x.push(arguments[z]);return this.addTask.apply(this,x)}return this.addCall(na)}}function K(e,r){if(this.x=this.y=this.rotation=this.originX=this.originY=0,this.scaleX=this.scaleY=1,e&&(this.build=e),r)for(var o in r)this[o]=r[o]}function X(e){this.parent=this.__stage=this.__context=null,this.__name=void 0,this.x=this.y=this.rotation=this.originX=this.originY=0,this.scaleX=this.scaleY=this.alpha=1,this.shape=e||K.EMPTY,this.strokeOverFill=!0,this.paint=this.fillShape,this.__useFill=!0,this.strokeColor=this.color="rgb(0,0,0)",this.__strokeWidth=0,this.strokeCap="butt",this.strokeJoin="miter",this.strokeMiterLimit=10,this.matrixLocal=void 0,this.matrixGlobal=t.ZERO,this.shapeMatrixLocal=void 0,this.shapeMatrixGlobal=t.ZERO,this.useDeepHitTest=!1,this.calcOwnMatrices=this.calc,G.init(this)}function Y(){this.super(new ga.RectangleShape(162,100))}function ha(){this.super(new ga.CircleShape(25))}function oa(e){this.parent=this.__stage=this.__context=null,this.__name=void 0,this.x=this.y=this.rotation=this.originX=this.originY=0,this.scaleX=this.scaleY=1,this.shape=e||K.EMPTY,this.draw=this.drawNothing,this.__visible=!1,this.color="rgb(0,100,200)",this.alpha=.5,this.matrixLocal=void 0,this.matrixGlobal=t.ZERO,this.shapeMatrixLocal=void 0,this.shapeMatrixGlobal=t.ZERO,this.calcOwnMatrices=this.calc,G.init(this)}var S={},na=function(){},pa="x y rotation scaleX scaleY originX originY".split(" "),s=pa.concat(["alpha","__name"]),Ca={aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},aqua:{r:0,g:255,b:255},aquamarine:{r:127,g:255,b:212},azure:{r:240,g:255,b:255},beige:{r:245,g:245,b:220},bisque:{r:255,g:228,b:196},black:{r:0,g:0,b:0},blanchedalmond:{r:255,g:235,b:205},blue:{r:0,g:0,b:255},blueviolet:{r:138,g:43,b:226},brown:{r:165,g:42,b:42},burlywood:{r:222,g:184,b:135},cadetblue:{r:95,g:158,b:160},chartreuse:{r:127,g:255,b:0},chocolate:{r:210,g:105,b:30},coral:{r:255,g:127,b:80},cornflowerblue:{r:100,g:149,b:237},cornsilk:{r:255,g:248,b:220},crimson:{r:220,g:20,b:60},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgoldenrod:{r:184,g:134,b:11},darkgray:{r:169,g:169,b:169},darkgreen:{r:0,g:100,b:0},darkkhaki:{r:189,g:183,b:107},darkmagenta:{r:139,g:0,b:139},darkolivegreen:{r:85,g:107,b:47},darkorange:{r:255,g:140,b:0},darkorchid:{r:153,g:50,b:204},darkred:{r:139,g:0,b:0},darksalmon:{r:233,g:150,b:122},darkseagreen:{r:143,g:188,b:143},darkslateblue:{r:72,g:61,b:139},darkslategray:{r:47,g:79,b:79},darkturquoise:{r:0,g:206,b:209},darkviolet:{r:148,g:0,b:211},deeppink:{r:255,g:20,b:147},deepskyblue:{r:0,g:191,b:255},dimgray:{r:105,g:105,b:105},dodgerblue:{r:30,g:144,b:255},firebrick:{r:178,g:34,b:34},floralwhite:{r:255,g:250,b:240},forestgreen:{r:34,g:139,b:34},fuchsia:{r:255,g:0,b:255},gainsboro:{r:220,g:220,b:220},ghostwhite:{r:248,g:248,b:255},gold:{r:255,g:215,b:0},goldenrod:{r:218,g:165,b:32},gray:{r:128,g:128,b:128},green:{r:0,g:128,b:0},greenyellow:{r:173,g:255,b:47},honeydew:{r:240,g:255,b:240},hotpink:{r:255,g:105,b:180},indianred:{r:205,g:92,b:92},indigo:{r:75,g:0,b:130},ivory:{r:255,g:255,b:240},khaki:{r:240,g:230,b:140},lavender:{r:230,g:230,b:250},lavenderblush:{r:255,g:240,b:245},lawngreen:{r:124,g:252,b:0},lemonchiffon:{r:255,g:250,b:205},lightblue:{r:173,g:216,b:230},lightcoral:{r:240,g:128,b:128},lightcyan:{r:224,g:255,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},lightgrey:{r:211,g:211,b:211},lightgreen:{r:144,g:238,b:144},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightseagreen:{r:32,g:178,b:170},lightskyblue:{r:135,g:206,b:250},lightslategray:{r:119,g:136,b:153},lightsteelblue:{r:176,g:196,b:222},lightyellow:{r:255,g:255,b:224},lime:{r:0,g:255,b:0},limegreen:{r:50,g:205,b:50},linen:{r:250,g:240,b:230},magenta:{r:255,g:0,b:255},maroon:{r:128,g:0,b:0},mediumaquamarine:{r:102,g:205,b:170},mediumblue:{r:0,g:0,b:205},mediumorchid:{r:186,g:85,b:211},mediumpurple:{r:147,g:112,b:216},mediumseagreen:{r:60,g:179,b:113},mediumslateblue:{r:123,g:104,b:238},mediumspringgreen:{r:0,g:250,b:154},mediumturquoise:{r:72,g:209,b:204},mediumvioletred:{r:199,g:21,b:133},midnightblue:{r:25,g:25,b:112},mintcream:{r:245,g:255,b:250},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},navy:{r:0,g:0,b:128},oldlace:{r:253,g:245,b:230},olive:{r:128,g:128,b:0},olivedrab:{r:107,g:142,b:35},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},orchid:{r:218,g:112,b:214},palegoldenrod:{r:238,g:232,b:170},palegreen:{r:152,g:251,b:152},paleturquoise:{r:175,g:238,b:238},palevioletred:{r:216,g:112,b:147},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},peru:{r:205,g:133,b:63},pink:{r:255,g:192,b:203},plum:{r:221,g:160,b:221},powderblue:{r:176,g:224,b:230},purple:{r:128,g:0,b:128},rebeccapurple:{r:102,g:51,b:153},red:{r:255,g:0,b:0},rosybrown:{r:188,g:143,b:143},royalblue:{r:65,g:105,b:225},saddlebrown:{r:139,g:69,b:19},salmon:{r:250,g:128,b:114},sandybrown:{r:244,g:164,b:96},seagreen:{r:46,g:139,b:87},seashell:{r:255,g:245,b:238},sienna:{r:160,g:82,b:45},silver:{r:192,g:192,b:192},skyblue:{r:135,g:206,b:235},slateblue:{r:106,g:90,b:205},slategray:{r:112,g:128,b:144},snow:{r:255,g:250,b:250},springgreen:{r:0,g:255,b:127},steelblue:{r:70,g:130,b:180},tan:{r:210,g:180,b:140},teal:{r:0,g:128,b:128},thistle:{r:216,g:191,b:216},tomato:{r:255,g:99,b:71},turquoise:{r:64,g:224,b:208},violet:{r:238,g:130,b:238},wheat:{r:245,g:222,b:179},white:{r:255,g:255,b:255},whitesmoke:{r:245,g:245,b:245},yellow:{r:255,g:255,b:0},yellowgreen:{r:154,g:205,b:50}};aa.prototype={className:"CommonMap",superclassName:"Object",constructor:aa},aa.EMPTY_GC_CONDITION=function(e,r){return!1},I.prototype={className:"SoftMap",superclassName:"Object",constructor:I},function(){var e=0;I.getID=function(){return"SoftMap_"+ ++e}}(),ba.prototype={className:"SoftSet",superclassName:"Object",constructor:ba},function(){var e=0;ba.getID=function(){return"SoftSet_"+ ++e}}(),O.prototype={className:"HardMap",superclassName:"Object",constructor:O,get forEachProxy(){var e=this;return{forEach:function(r){e.forEach(r)}}}},function(){var e=0;O.getID=function(){return"HardMap_"+ ++e}}(),ca.prototype={className:"HardSet",superclassName:"Object",constructor:ca,get forEachProxy(){var e=this;return{forEach:function(r){e.forEach(r)}}}},function(){var e=0;ca.getID=function(){return"HardSet_"+ ++e}}(),T.prototype={className:"IdChain",superclassName:"Object",constructor:T},T.prototype={className:"HashIterator",superclassName:"Object",constructor:Fa},U.prototype={className:"__KeyHiddenZone",superclassName:"Object",constructor:U};var B={};(function(e){function r(l){return l&&l instanceof Object}function o(l){return l.valueOf(U)}function h(l){return l.hasOwnProperty("valueOf")&&o(l)instanceof U}e.createHiddenZone=function(l){var d=new U,f=l.valueOf;Object.defineProperty(l,"valueOf",{value:function(_){return _&&_===U?d:f.apply(this,arguments)},configurable:!1,wrirable:!1})},e.keyIsObject=r,e.keyIsFixed=function(l){var d=Object.getOwnPropertyDescriptor(l,"valueOf");return d&&!d.configurable||Object.isFrozen(l)},e.hiddenZoneOf=o,e.keyHasHiddenZone=h,e.keyKnowsID=function(l,d){return o(l).hasOwnProperty(d)},e.traceCollectionsOf=function(l){if(r(l)&&h(l))for(str in D(""),D("Collections of "+l+":"),l=o(l),l)str!="className"&&str!="superclassName"&&str!="constructor"&&D(str)}})(B),C.prototype={className:"EnterFrameSignal",superclassName:"Object",constructor:C,get frameRate(){return 1e3/this.frameDuration}},C.getInstance=function(){return C.__defaultInstance?C.__defaultInstance:new C};var G={},Na=function(e,r){e.object[e.methodName](r)},Oa=function(e,r){e.object(r)};G.addEventListener=function(e,r,o){this.listeners[e]||(this.listeners[e]=[]);for(var h=3>arguments.length?Oa:Na,l=this.listeners[e],d=l.length;d--;)if(l[d].object===r&&l[d].methodName===o)return;l.push({object:r,methodName:o,invokeListenerType:h,debugStr:"debugStr"})},G.removeEventListener=function(e,r,o){if(this.listeners[e]){for(var h=this.listeners[e],l=h.length;l--;)if(h[l].object===r&&h[l].methodName===o){h.splice(l,1),h.length||delete this.listeners[e];break}}},G.dispatchEvent=function(e,r){if(this.listeners[e])for(var o=this.listeners[e],h=o.length,l={type:e,currentTarget:this,target:r&&r.target?r.target:this,data:r},d=0;d<h;d++)o[d].invokeListenerType(o[d],l)},G.init=function(e){e.listeners={},e.addEventListener=this.addEventListener,e.removeEventListener=this.removeEventListener,e.dispatchEvent=this.dispatchEvent};var E={lin:function(){return function(e,r,o){return e+(r-e)*o}},circ:function(){return function(e,r,o){return .5>o?e+(r-e)/2*(1-Math.sqrt(1-4*o*o)):r-(r-e)/2*(1-Math.sqrt(1-4*(1-o)*(1-o)))}},circIn:function(){return function(e,r,o){return e+(r-e)*(1-Math.sqrt(1-o*o))}},circOut:function(){return function(e,r,o){return r-(r-e)*(1-Math.sqrt(1-(1-o)*(1-o)))}},elps:function(e,r){return e=e||.618,r=r||9,function(o,h,l){return .5>l?o+(h-o)/2*e*(1-Math.sqrt(1-Math.pow(2*l,r))):h-(h-o)/2*e*(1-Math.sqrt(1-Math.pow(2-2*l,r)))}},elpsIn:function(e,r){return e=e||.618,r=r||9,function(o,h,l){return o+(h-o)*e*(1-Math.sqrt(1-Math.pow(l,r)))}},elpsOut:function(e,r){return e=e||.618,r=r||9,function(o,h,l){return h-(h-o)*e*(1-Math.sqrt(1-Math.pow(1-l,r)))}},pow:function(e){return e=e||3,function(r,o,h){return .5>h?r+(o-r)/2*Math.pow(2*h,e):o-(o-r)/2*Math.pow(2*(1-h),e)}},powIn:function(e){return e=e||3,function(r,o,h){return r+(o-r)*Math.pow(h,e)}},powOut:function(e){return e=e||3,function(r,o,h){return o-(o-r)*Math.pow(1-h,e)}},sin:function(){return function(e,r,o){return e-(r-e)/2*(Math.cos(Math.PI*o)-1)}},sinIn:function(){return function(e,r,o){return r-(r-e)*Math.cos(Math.PI/2*o)}},sinOut:function(){return function(e,r,o){return e+(r-e)*Math.sin(Math.PI/2*o)}},exp:function(){return function(e,r,o){return o==0?e:o==1?r:1>(o*=2)?e+(r-e)/2*Math.pow(2,10*(o-1)):e+(r-e)/2*(2-Math.pow(2,10*(1-o)))}},expIn:function(){return function(e,r,o){return o==0?e:e+(r-e)*Math.pow(2,10*(o-1))}},expOut:function(){return function(e,r,o){return o==1?r:e+(r-e)*(1-Math.pow(2,-10*o))}},osc:function(e,r){return e=e||4,r=r||11,function(o,h,l){return .5>l?o+(h-o)/2*Math.abs(Math.pow((l=1-2*l)-1,e))*Math.sin(Math.PI/2*(r*l+1)):h-(h-o)/2*Math.abs(Math.pow((l=2*l-1)-1,e))*Math.sin(Math.PI/2*(r*l+1))}},oscOut:function(e,r){return e=e||4,r=r||11,function(o,h,l){return h-(h-o)*Math.abs(Math.pow(l-1,e))*Math.sin(Math.PI/2*(r*l+1))}},oscIn:function(e,r){return e=e||4,r=r||11,function(o,h,l){return o+(h-o)*Math.abs(Math.pow(l,e))*Math.sin(Math.PI/2*(r*(1-l)+1))}},osc2:function(e,r){return e=e||9,r=r||11,function(o,h,l){return .5>l?o+(h-o)/2*Math.exp(-e*(l=1-2*l))*Math.sin(Math.PI/2*(r*l+1)):h-(h-o)/2*Math.exp(-e*(l=2*l-1))*Math.sin(Math.PI/2*(r*l+1))}},osc2Out:function(e,r){return e=e||9,r=r||11,function(o,h,l){return h-(h-o)*Math.exp(-e*l)*Math.sin(Math.PI/2*(r*l+1))}},osc2In:function(e,r){return e=e||9,r=r||11,function(o,h,l){return o+(h-o)*Math.exp(-e*(1-l))*Math.sin(Math.PI/2*(r*(1-l)+1))}},_bncGetParams:function(e,r){for(var o=Math.sqrt(r),h=[{tMax:1,tOffset:0,fOffset:0}],l=0,d=0,f=0;f++<e;){var l=d,d=d+2*Math.pow(o,f),_={};_.tMax=1+d,_.tOffset=1+l+Math.pow(o,f),_.fOffset=1-Math.pow(r,f),h.push(_)}for(o=1/h[e-1].tMax;f--;)_=h[f],_.tMax*=o,_.tOffset*=o;return{f:h,s:1/(o*o)}},bncOut:function(e,r){e=e||5;var o=E._bncGetParams(e,r||.25),h=o.f,l=o.s;return function(d,f,_){for(var m=0;m<e;m++){var g=h[m];if(_<g.tMax)return d+(f-d)*(l*(_-g.tOffset)*(_-g.tOffset)+g.fOffset)}}},bncIn:function(e,r){e=e||5;var o=E._bncGetParams(e,r||.25),h=o.f,l=o.s;return function(d,f,_){_=1-_;for(var m=0;m<e;m++){var g=h[m];if(_<g.tMax)return f-(f-d)*(l*(_-g.tOffset)*(_-g.tOffset)+g.fOffset)}}},bnc:function(e,r){e=e||5;var o=E._bncGetParams(e,r||.25),h=o.f,l=o.s;return function(d,f,_){if(.5>_){_=1-2*_;for(var m=0;m<e;m++){var g=h[m];if(_<g.tMax)return f-(f-d)/2*(l*(_-g.tOffset)*(_-g.tOffset)+g.fOffset+1)}}for(_=2*_-1,m=0;m<e;m++)if(g=h[m],_<g.tMax)return d+(f-d)/2*(l*(_-g.tOffset)*(_-g.tOffset)+g.fOffset+1)}},backIn:function(e){e=e||2.7;var r=-2*e-1,o=e+2;return function(h,l,d){return l-(l-h)*(e*(d=1-d)*d*d+r*d*d+o*d)}},backOut:function(e){e=e||2.7;var r=-2*e-1,o=e+2;return function(h,l,d){return h+(l-h)*(e*d*d*d+r*d*d+o*d)}},back:function(e){e=e||2.7;var r=-2*e-1,o=e+2;return function(h,l,d){return .5>d?l-(l-h)/2*(e*(d=1-2*d)*d*d+r*d*d+o*d+1):h+(l-h)/2*(e*(d=2*d-1)*d*d+r*d*d+o*d+1)}},powLin:function(e,r){e=e||3,r=r==null||0>r||1<r?.309:r/2;var o=e*(1/r-2)+2;return r?function(h,l,d){return d<=r?h+(l-h)/o*Math.pow(d/r,e):d>1-r?l-(l-h)/o*Math.pow((1-d)/r,e):h+(l-h)*(1/o+(1-2/o)*(d-r)/(1-2*r))}:E.lin()},powLinIn:function(e,r){e=e||3,r=r==null||0>r||1<r?.618:r;var o=e*(1/r-1)+1;return r?function(h,l,d){return d<r?h+(l-h)/o*Math.pow(d/r,e):h+(l-h)*(1/o+(1-1/o)*(d-r)/(1-r))}:E.lin()},powLinOut:function(e,r){e=e||3,r=r==null||0>r||1<r?.618:r;var o=e*(1/r-1)+1;return r?function(h,l,d){return d>1-r?l-(l-h)/o*Math.pow((1-d)/r,e):l-(l-h)*(1+d*(1-o)/(o*(1-r)))}:E.lin()},powCombo:function(e,r,o){e=e||3,r=r||5,o=o||.618;var h=e/(r*(1/o-1)+e);return function(l,d,f){return f<h?l+(d-l)*o*Math.pow(f/h,e):d-(d-l)*(1-o)*Math.pow((1-f)/(1-h),r)}},powCombo2:function(e,r,o){e=e||3,r=r||5,o=o||.618;var h=1/(e/r*(1/o-1)+1);return function(l,d,f){return f<o?l+(d-l)*h*Math.pow(f/o,e):d-(d-l)*(1-h)*Math.pow((1-f)/(1-o),r)}},morph:function(e,r,o){return e=e||E.circ(),r=r||E.pow(5),o?function(h,l,d){return o(e(h,l,d),r(h,l,d),d)}:function(h,l,d){return(1-d)*e(h,l,d)+d*r(h,l,d)}},stretch:function(e,r){e=e||E.powOut(3),r=r||.5;var o=1/r;return function(h,l,d){return d<r?e(h,l,o*d):l}},custom:function(e){return function(r,o,h){return .5>h?r+(o-r)/2*e(2*h):o-(o-r)/2*e(2-2*h)}},customIn:function(e){return function(r,o,h){return r+(o-r)*e(h)}},customOut:function(e){return function(r,o,h){return o-(o-r)*e(1-h)}}};E.def=E.pow;var ya={frames:function(e,r){function o(){d++>e&&(l.removeListener(o),h.hasOwnProperty("onComplete")&&setTimeout(function(){h.onComplete()},0),q.end())}var h={},l=r||C.getInstance(),d=0;return q=u.ref,l.addListener(o,!0),h},seconds:function(e){var r={},o=u.ref;return setTimeout(function(){r.onComplete&&r.onComplete(),o.end()},1e3*e),r}},Ja={run:function(e,r){function o(){e()&&(l.removeListener(o),h.hasOwnProperty("onComplete")&&setTimeout(function(){h.onComplete()},0),d.end())}var h={},l=r||C.getInstance(),d=u.ref;return Object.defineProperty(h,"abort",{value:function(){l.removeListener(o)},writable:!1}),l.addListener(o,!0),h},abort:function(e){e.abort()}},za={run:function(e,r,o,h,l,d){if(e instanceof HTMLElement&&!e.hasOwnProperty(r)&&r in e.style)return e.style[r]=window.getComputedStyle(e)[r],(!e.hasOwnProperty("cssPropModifier")||!e.cssPropModifier instanceof Ha)&&(e.cssPropModifier=new Ha(e.style,r)),za.run(e.cssPropModifier,"value",o,h,l,d);var f=u.ref,_={object:e},m=l||500,g=h||E.lin(),v,p=$(e[r]),x=$(o),w="change"+r;v=d||(e.__stage&&e.__stage.metronome?e.__stage.metronome:C.getInstance());var z=0,j,y=new Date().getTime();return e[w]=function(V){j=z/m,this[r]="rgba("+Math.round(g(p.r,x.r,j))+","+Math.round(g(p.g,x.g,j))+","+Math.round(g(p.b,x.b,j))+","+g(p.a,x.a,j)+")",z=V-y,z>m&&(this[r]=o,v.removeListener(this,w),delete this[w],_.hasOwnProperty("onComplete")&&_.onComplete(),f.end())},v.addListener(e,w),_}},Ka={run:function(e,r,o,h,l,d){var f=u.ref,_={object:e},m=l||500,g=h||E.lin(),v,p=e[r],x="change"+r;v=d||(e.__stage&&e.__stage.metronome?e.__stage.metronome:C.getInstance());var w=0,z=new Date().getTime();return e[x]=function(j){this[r]=g(p,o,w/m),w=j-z,w>m&&(this[r]=o,v.removeListener(this,x),delete this[x],_.hasOwnProperty("onComplete")&&_.onComplete(),f.end())},v.addListener(e,x),_}},fa={run:function(e,r,o,h,l){var d=u.ref,f={object:e},_=h||500,m=o||E.lin(),g;g=l||(e.__stage&&e.__stage.metronome?e.__stage.metronome:C.getInstance()),o=0;var v,p={},x={};for(v in r)typeof r[v]=="string"?(h=r[v].replace(/ /g,""),h.indexOf("+")||(x[v]=e[v]+Number(h.substring(1,h.length)))):x[v]=r[v],p[v]=e[v],o++;r=o;var w=new Date().getTime();for(v in x)o="change"+v,e[o]=function(z){var j=arguments.callee,y=j.p,V=j.updateFunctionName;this[y]=m(p[y],x[y],j.t/_),j.t=z-w,j.t>_&&(this[y]=x[y],g.removeListener(this,V),delete this[V],!j.propsCounter)&&(f.hasOwnProperty("onComplete")&&f.onComplete(),d.end())},e[o].p=v,e[o].t=0,e[o].propsCounter=--r,e[o].updateFunctionName=o,g.addListener(e,o);return f.stop=function(){for(v in x)g.removeListener(e,"change"+v)},f}},Aa={osc:function(e,r,o){return e=e||3,r=r||1,o=o||2,function(h){return Math.pow(h-1,o)*Math.sin((2*e+1.5)*Math.PI*Math.pow(h,r))}}};ta.prototype={className:"Shift",superclassName:"Object",constructor:ta,get delta(){return this.__delta},get ratio(){return this.__ratio},get isPlayed(){return this.__isPlayed},update:function(){for(var e in this.__deltaInit)this.__object[e]+=this.__delta[e];for(e in this.__ratioInit)this.__object[e]*=this.__ratio[e]},play:function(){this.__isPlayed=!0,this.__efs.addListener(this,"update")},stop:function(){this.__efs.removeListener(this,"update"),this.__isPlayed=!1}},ua.prototype={className:"ShiftTimebased",superclassName:"Object",constructor:ua,get delta(){return this.__delta},get isPlayed(){return this.__isPlayed},update:function(e){var r=(e-this.__currentTimer)/this.__frameDuration,o;for(o in this.__deltaInit)this.__object[o]+=this.__delta[o]*r;this.__currentTimer=e},play:function(){this.__isPlayed||(this.__isPlayed=!0,this.__currentTimer=new Date().getTime(),this.__efs.addListener(this,"update"))},stop:function(){this.__efs.removeListener(this,"update"),this.__isPlayed=!1}},ja.prototype={className:"Motion",superclassName:"Object",constructor:ja,get speed(){return this.__speed},get isPlayed(){return this.__isPlayed},update:function(e){var r=(e-this.__currentTimer)/1e3,o;for(o in this.__speedInit)this.__object[o]+=r*this.__speed[o];this.__currentTimer=e},play:function(){this.__isPlayed||(this.__isPlayed=!0,this.__currentTimer=new Date().getTime(),this.__efs.addListener(this,"update"))},stop:function(){this.__efs.removeListener(this,"update"),this.__isPlayed=!1}},va.prototype={className:"Motion2D",superclassName:"Object",constructor:va,get speed(){return this.__speed},set speed(e){this.__speed=e,this.updateSpeedVector(this.__motion.speed,e,this.__angle)},get angle(){return 180*this.__angle/Math.PI},set angle(e){this.__angle=e*Math.PI/180,this.updateSpeedVector(this.__motion.speed,this.__speed,this.__angle)},get isPlayed(){return this.__motion.isPlayed},updateSpeedVector:function(e,r,o){e.x=r*Math.cos(o),e.y=r*Math.sin(o)},play:function(){this.__motion.play()},stop:function(){this.__motion.stop()}};var H={};H.sin=Math.sin,H.sinPro=function(e){if(e===0||0>e)return H.square;!e||isNaN(e)?e=.3:1<e&&(e=1/e);var r=Math.sqrt(e);return function(o){o=Math.sin(o);var h=Math.abs(o);return(0>o?-1:1)*(Math.pow(h,r)*Math.pow(h,e)+(1-Math.pow(h,r))*h)}},H.triangle=function(e){return 2/Math.PI*Math.asin(Math.sin(e))},H.square=function(e){return 0>Math.sin(e)?-1:1},H.noise=function(e){return 2*Math.random()-1},H.pulsePro=function(e){if(e===0)return H.sin;e=!e||isNaN(e)||0>e?4:1+Math.ceil(e);var r=Math.PI/(2*e),o=2*Math.PI,h=2/(2-1/e);return function(l){return l%=o,l<r||l>o-r?Math.sin(e*l):Math.cos(h*l/2-r/h)}},H.pulse=H.pulsePro(),da.prototype={className:"Swing",superclassName:"Object",constructor:da,get isPlayed(){return this.__isPlayed},get frequency(){return this.__frequency},set frequency(e){this.__startTime!=null&&(this.__startTime=((e-this.__frequency)*(this.__isPlayed?new Date().getTime():this.__stopTime)+this.__frequency*this.__startTime)/e),this.__frequency=e},get baseValue(){return this.__baseValue},set baseValue(e){this.__isPlayed?this.__baseValue=e:this.__object[this.__propName]=this.__baseValue=e},update:function(e){this.__object[this.__propName]=this.__baseValue+this.amplitude*this.wave(this.phase+this.__frequency*da.K*(e-this.__startTime))},play:function(){this.__isPlayed||(this.__isPlayed=!0,this.__startTime==null?(this.__startTime=new Date().getTime(),this.__object[this.__propName]=this.__baseValue+this.amplitude*this.wave(this.phase)):this.__stopTime&&(this.__startTime+=new Date().getTime()-this.__stopTime,this.__stopTime=0),this.__efs.addListener(this,"update"))},stop:function(){this.__stopTime=new Date().getTime(),this.__efs.removeListener(this,"update"),this.__isPlayed=!1},reset:function(){this.__efs.removeListener(this,"update"),this.__isPlayed=!1,this.__startTime=this.__stopTime=void 0}},da.K=Math.PI/500,ea.prototype={className:"CanvasContainer",superclassName:"CanvasLayer",constructor:ea,get children(){return this.__children},get isContainer(){return!0},get name(){return this.__name},set name(e){var r=this.parent;r&&(typeof e=="string"?(!(e in r)||"parent"in r[e]&&r[e].parent==r&&r[e].name===e)&&(r[e]=this):this.__name in r&&r[this.__name]==this&&delete r[this.__name]),this.__name=e},setContext:function(e){this.__context=e;for(var r=this.__children,o=r.length;o--;)r[o].setContext(e)},setStage:function(e){this.__stage=e;for(var r=this.__children,o=r.length;o--;)r[o].setStage(e);this.onDisplayed&&e&&this.onDisplayed()},isolate:function(){this.setStage(null),this.setContext(null),this.parent=null},prepareNewChild:function(e){this.removeChild(e),e.parent&&(e.parent.container==e?e.parent.container=null:e.parent.removeChild(e)),this.__context&&e.setContext(this.__context),e.parent=this,this.__stage&&e.setStage(this.__stage);var r=e.name;!r||typeof r!="string"||r in this&&!("parent"in this[r]&&this[r].parent==this&&this[r].name===r)||(this[r]=e),e.onAdded&&e.onAdded()},canBeAdded:function(e){if(e.superclassName=="CanvasLayer"){for(var r=this,o=this.__stage;r!=o;){if(r==e)return!1;r=r.parent}return!0}return!1},addChild:function(e){this.canBeAdded(e)&&(this.prepareNewChild(e),this.__children.push(e))},addRearChild:function(e){this.canBeAdded(e)&&(this.prepareNewChild(e),this.__children.unshift(e))},addChildOver:function(e,r){if(this.canBeAdded(e)){for(var o=this.__children,h=o.length;h--;)if(o[h]==r){this.prepareNewChild(e),o.splice(h+1,0,e);break}}},addChildUnder:function(e,r){if(this.canBeAdded(e)){for(var o=this.__children,h=o.length;h--;)if(o[h]==r){this.prepareNewChild(e),o.splice(h,0,e);break}}},removeChild:function(e){for(var r=this.__children,o=r.length;o--;)if(r[o]==e){var h=e.name;h&&typeof h=="string"&&h in this&&this[h]==e&&delete this[h],e.isolate(),r.splice(o,1);break}},contains:function(e){for(e=e.parent;e&&e.isContainer;){if(e==this)return!0;e=e.parent}return!1},__copy:function(e,r){if(e.isContainer){var o=R.call(e),h,l=arguments.length==2,d,f,_;l?(d=e,f=new O,f.set(e,o),_=[]):(d=arguments[2],f=arguments[3],_=arguments[4]);var m,g=e.children;for(o.__children=Array(g.length),h=g.length;h--;){m=this.__copy(g[h],r,d,f,_),m.parent=o,o.__children[h]=m,f.set(g[h],m);var v=m.name;!v||typeof v!="string"||v in o&&!("parent"in o[v]&&o[v].parent==o&&o[v].name===v)||(o[v]=m)}v=e.masks,m=e.holes;var p;for(o.masks=Array(v.length),o.holes=Array(m.length),h=v.length;h--;)p=v[h],g=f.get(p.host),o.masks[h]=p.host==d||d.contains(p.host)?{shape:p.shape.copy(),host:g}:{shape:p.shape,host:p.host},g||_.push([o.masks[h],p]);for(h=m.length;h--;)v=m[h],g=f.get(v.host),o.holes[h]=v.host==d||d.contains(v.host)?{shape:v.shape.copy(),host:g}:{shape:v.shape,host:v.host},g||_.push([o.holes[h],v]);if(l){for(h=_.length;h--;)_[h][0].host=f.get(_[h][1].host);f.clear()}return o}return e.copy(r)},copy:function(e){return this.__copy(this,e)},__addShapeData:function(e,r,o){var h;r=r||this;for(var l=o.length;l--;)if(h=o[l],h.shape===e&&h.host===r)return;o.push({shape:e,host:r})},__removeShapeData:function(e,r,o){var h;r=r||this;for(var l=o.length;l--;)if(h=o[l],h.shape===e&&h.host===r){o.splice(l,1);break}},addMask:function(e,r){this.masks.length||(this.draw=this.holes.length?this.drawWithMasksAndHoles:this.drawWithMasks,this.getHitAsset=this.holes.length?this.getHitAssetWithMasksAndHoles:this.getHitAssetWithMasks),this.__addShapeData(e,r,this.masks)},removeMask:function(e,r){this.__removeShapeData(e,r,this.masks),this.masks.length||(this.draw=this.holes.length?this.drawWithHoles:this.drawNormal,this.getHitAsset=this.holes.length?this.getHitAssetWithHoles:this.getHitAssetNormal)},addHole:function(e,r){this.holes.length||(this.draw=this.masks.length?this.drawWithMasksAndHoles:this.drawWithHoles,this.getHitAsset=this.masks.length?this.getHitAssetWithMasksAndHoles:this.getHitAssetWithHoles),this.__addShapeData(e,r,this.holes)},removeHole:function(e,r){this.__removeShapeData(e,r,this.holes),this.holes.length||(this.draw=this.masks.length?this.drawWithMasks:this.drawNormal,this.getHitAsset=this.masks.length?this.getHitAssetWithMasks:this.getHitAssetNormal)},drawNormal:function(){var e=this.__context;e.save(),this.setMatrixAndAlpha(e),this.drawChildren(),e.restore()},drawWithMasks:function(){var e=this.__context;e.save(),this.setMatrixAndAlpha(e),this.buildMasks(e),this.drawChildren(),e.restore()},drawWithHoles:function(){var e=this.__context;e.save(),this.setMatrixAndAlpha(e),this.buildHoles(e,this.__stage.width,this.__stage.height),this.drawChildren(),e.restore()},drawWithMasksAndHoles:function(){var e=this.__context;e.save(),this.setMatrixAndAlpha(e),this.buildMasks(e),this.buildHoles(e,this.__stage.width,this.__stage.height),this.drawChildren(),e.restore()},getHitAssetNormal:function(e,r){for(var o=this.__children,h,l,d=o.length;d--;)if(h=o[d],h.isContainer){if(l=h.getHitAsset(e,r))break}else if(h.hitTest&&h.hitTest(e,r)){l=h;break}return l},getHitAssetWithMasks:function(e,r){var o=this.__context;return this.buildPaths(o,this.masks),o.isPointInPath(e,r)?this.getHitAssetNormal(e,r):!1},getHitAssetWithHoles:function(e,r){var o=this.__context;return this.buildPaths(o,this.holes),o.isPointInPath(e,r)?!1:this.getHitAssetNormal(e,r)},getHitAssetWithMasksAndHoles:function(e,r){var o=this.__context;return this.buildPaths(o,this.masks),o.isPointInPath(e,r)?(this.buildPaths(o,this.holes),o.isPointInPath(e,r)?!1:this.getHitAssetNormal(e,r)):!1},setMatrixAndAlpha:function(e){t.setTransform(e,this.matrixGlobal),e.globalAlpha*=this.alpha},buildPaths:function(e,r){var o,h,l;e.beginPath();for(var d=r.length;d--;)e.save(),o=r[d],h=o.shape,l=t.get3(h.x,h.y,h.rotation,h.scaleX,h.scaleY,h.originX,h.originY),t.setTransform(e,o.host=="global"?l:t.multiply(o.host.matrixGlobal,l)),h.build(e),e.restore();e.closePath()},buildMasks:function(e){this.buildPaths(e,this.masks),e.clip()},buildHoles:function(e,r,o){for(var h,l,d,f=this.holes.length;f--;)e.save(),e.beginPath(),e.save(),t.setTransform(e,t.GLOBAL),e.moveTo(0,0),e.lineTo(0,o),e.lineTo(r,o),e.lineTo(r,0),e.closePath(),e.restore(),h=this.holes[f],l=h.shape,d=t.get3(l.x,l.y,l.rotation,l.scaleX,l.scaleY,l.originX,l.originY),t.setTransform(e,h.host=="global"?d:t.multiply(h.host.matrixGlobal,d)),l.build(e),e.restore(),e.closePath(),e.clip()},calcOwnMatrices:function(){this.matrixLocal=t.get3(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.originX,this.originY),this.matrixGlobal=this.parent.matrixGlobal?t.multiply(this.parent.matrixGlobal,this.matrixLocal):this.matrixLocal},calc:function(){this.calcOwnMatrices();for(var e=this.__children,r=e.length;r--;)e[r].calc()},drawChildren:function(){for(var e=this.__children,r=e.length,o=0;o<r;o++)e[o].draw()}},ea.GLOBAL="global",ea.OWN_PROPS=s.concat(["draw","getHitAsset"]),F.prototype={className:"CanvasComposition",constructor:F,set listenGestures(e){e?(this.addDomGestureListeners(),this.metronome.addListener(this,"processGestures",!0),this.__listenGestures=!0):(this.removeDomGestureListeners(),this.metronome.removeListener(this,"processGestures"),this.__listenGestures=!1)},markHitContainers:function(e){e=e.parent,e.isContainer&&(e.hasHitAsset=!0,this.hitContainers.push(e),this.markHitContainers(e))},markDownContainers:function(e){e=e.parent,e.isContainer&&(e.hasDownAsset=!0,this.downContainers.push(e),this.markDownContainers(e))},markOutContainers:function(e){(e=e.parent)&&e.isContainer&&(e.hasOutAsset=!0,this.outContainers.push(e),this.markOutContainers(e))},unmarkHitContainers:function(){for(var e=this.hitContainers.length;e--;)this.hitContainers[e].hasHitAsset=!1},unmarkDownContainers:function(){for(var e=this.downContainers.length;e--;)this.downContainers[e].hasDownAsset=!1},unmarkOutContainers:function(){for(var e=this.outContainers.length;e--;)this.outContainers[e].hasOutAsset=!1},processGestures:function(){if(this.__gestureOccured){var e=this.gesturePoint,e=this.__container.getHitAsset(e.x,e.y),r;e?(this.markHitContainers(e),this.dispatchGestureGroup(e,e,this.gestures.group1),this.gestures.group1.mouseDown&&(r=e,this.markDownContainers(e)),this.gestures.group2.mouseOver&&e!=this.hitAsset&&(this.hitAsset?(this.markOutContainers(this.hitAsset),this.gestures.group2.mouseOut&&this.dispatchGestureOut(this.hitAsset,this.hitAsset,"mouseOut"),this.dispatchGestureOver(e,e,"mouseOver")):this.dispatchGesture(e,e,"mouseOver"),this.isDown&&this.dispatchGestureOver(e,e,"dragOver")),this.gestures.group1.mouseUp&&(this.__touchEndOccured&&this.dispatchGesture(e,e,"touchEnd"),e==this.downAsset?this.dispatchGesture(e,e,"click"):this.downAsset&&(this.dispatchGestureClick(null,e,"click"),this.dispatchGestureReleaseOutside(this.downAsset,this.downAsset,"releaseOutside"))),this.gestures.group1.mouseMove&&(e==this.downAsset?this.dispatchGesture(e,e,"drag"):this.isDown&&e!=this.hitAsset&&this.hitAsset&&(this.hitAsset==this.downAsset?this.dispatchGestureOut(this.hitAsset,this.hitAsset,"dragOutThis"):this.dispatchGestureDragOutThis(null,this.hitAsset,"dragOutThis"),this.dispatchGestureOut(this.hitAsset,this.hitAsset,"dragOut")))):(this.gestures.group2.mouseOut&&this.hitAsset&&(this.dispatchGesture(this.hitAsset,this.hitAsset,"mouseOut"),this.isDown&&(this.hitAsset==this.downAsset?this.dispatchGestureOut(this.hitAsset,this.hitAsset,"dragOutThis"):this.dispatchGestureDragOutThis(null,this.hitAsset,"dragOutThis"),this.dispatchGestureOut(this.hitAsset,this.hitAsset,"dragOut"))),this.gestures.group1.mouseUp&&this.downAsset&&this.dispatchGesture(this.downAsset,this.downAsset,"releaseOutside")),this.hitAsset=e,this.gestures.group1.mouseUp?(this.unmarkDownContainers(),this.downContainers=[],this.downAsset=void 0):r&&(this.downAsset=r),this.unmarkHitContainers(),this.hitContainers=[],this.unmarkOutContainers(),this.outContainers=[],this.__gestureOccured=!1,this.__touchEndOccured&&(this.gesturePoint={x:void 0,y:void 0},this.__touchEndOccured=!1),this.gestures={group1:{},group2:{},group3:{}}}},dispatchGestureGroup:function(e,r,o){var h=r.parent;if(h){for(var l in o)r.dispatchEvent(l,{target:e});h.isContainer&&this.dispatchGestureGroup(e,h,o)}},dispatchGesture:function(e,r,o){var h=r.parent;h&&(r.dispatchEvent(o,{target:e}),h.isContainer&&this.dispatchGesture(e,h,o))},dispatchGestureOver:function(e,r,o){var h=r.parent;h&&(r.dispatchEvent(o,{target:e}),h.isContainer&&!h.hasOutAsset&&this.dispatchGestureOver(e,h,o))},dispatchGestureOut:function(e,r,o){var h=r.parent;h&&(r.dispatchEvent(o,{target:e}),h.isContainer&&!h.hasHitAsset&&this.dispatchGestureOut(e,h,o))},dispatchGestureDragOutThis:function(e,r,o){(r=r.parent)&&r.isContainer&&(r.hasDownAsset&&!r.hasHitAsset&&(e||(e=r),r.dispatchEvent(o,{target:e})),this.dispatchGestureDragOutThis(e,r,o))},dispatchGestureClick:function(e,r,o){(r=r.parent)&&r.isContainer&&(r.hasDownAsset&&(e||(e=r),r.dispatchEvent(o,{target:e})),this.dispatchGestureClick(e,r,o))},dispatchGestureReleaseOutside:function(e,r,o){var h=r.parent;h&&(r.isContainer&&!r.hasHitAsset||e==r)&&(r.dispatchEvent(o,{target:e}),this.dispatchGestureReleaseOutside(e,h,o))},getMousePoint:function(e){var r=this.__canvas.getBoundingClientRect();return{x:this.pixelRatio*(e.clientX-r.left),y:this.pixelRatio*(e.clientY-r.top)}},getTouchPoint:function(e){e.preventDefault();var r=this.__canvas.getBoundingClientRect();return e=e.targetTouches[0],{x:this.pixelRatio*(e.clientX-r.left),y:this.pixelRatio*(e.clientY-r.top)}},saveDownTime:function(e){this.__downTime=new Date().getTime()},detectFastClick:function(e){new Date().getTime()-this.__downTime<this.fastClickTime&&e.currentTarget.dispatchEvent("fastClick",{target:e.target})},listenFastClickOn:function(e,r){arguments.length==1||r?(e.addEventListener("mouseDown",this,"saveDownTime"),e.addEventListener("click",this,"detectFastClick")):(e.removeEventListener("mouseDown",this,"saveDownTime"),e.removeEventListener("click",this,"detectFastClick"))},listenMouseMotion:function(e){e.currentTarget.addEventListener("mouseMove",this,"detectMouseMotion"),e.currentTarget.addEventListener("mouseOut",this,"detectMouseMotion"),this.__clickWithoutMouseMotion=!0},detectMouseMotion:function(e){e.currentTarget.removeEventListener("mouseMove",this,"detectMouseMotion"),e.currentTarget.removeEventListener("mouseOut",this,"detectMouseMotion"),this.__clickWithoutMouseMotion=!1},detectPointClick:function(e){e.currentTarget.removeEventListener("mouseMove",this,"detectMouseMotion"),this.__clickWithoutMouseMotion&&e.currentTarget.dispatchEvent("pointClick",{target:e.target})},listenPointClickOn:function(e,r){arguments.length==1||r?(e.addEventListener("mouseDown",this,"listenMouseMotion"),e.addEventListener("click",this,"detectPointClick")):(e.removeEventListener("mouseDown",this,"listenMouseMotion"),e.removeEventListener("click",this,"detectPointClick"))},detectDbClick:function(e){for(var r=!1,o=e.currentTarget,h,l=new Date().getTime(),d=this.__dbClickCandidates.length;d--;)if(this.__dbClickCandidates[d].layer===o){h=d,r=!0;break}r?l-this.__dbClickCandidates[h].downTime<this.dbClickTime?(o.dispatchEvent("dbClick",{target:e.target}),this.__dbClickCandidates.splice(h,1)):this.__minDbClickDownTime=this.__dbClickCandidates[h].downTime=l:(l-this.__minDbClickDownTime>this.dbClickTime&&(this.__minDbClickDownTime=l,this.__dbClickCandidates.length=0),this.__dbClickCandidates.push({layer:o,downTime:l}))},listenDbClickOn:function(e,r){arguments.length==1||r?e.addEventListener("mouseDown",this,"detectDbClick"):e.removeEventListener("mouseDown",this,"detectDbClick")},get canvasID(){return this.__canvasID},set canvasID(e){this.canvas=document.getElementById(e)},get canvas(){return this.__canvas},set canvas(e){if(this.__canvas!==e){this.__canvas&&(this.__canvas.width=this.__width,F.__instanceByCanvas.delete(this.__canvas));var r=F.__instanceByCanvas.get(e);r&&r.isolate(),this.__canvasID=e.id,this.__canvas=e,this.__context=e.getContext("2d"),this.__width=e.width,this.__height=e.height,this.__container&&(this.__container.setContext(this.__context),this.__container.parent=this,this.__container.setStage(this)),F.__instanceByCanvas.set(e,this)}},get container(){return this.__container},set container(e){this.__container&&this.__container.isolate(),e.isContainer&&(this.__context&&e.setContext(this.__context),e.parent=this,this.__container=e,e.setStage(this))},get width(){return this.__width},set width(e){this.__width=this.__canvas.width=e},get height(){return this.__height},set height(e){this.__height=this.__canvas.height=e},get metronome(){return this.__metronome},set metronome(e){this.__metronome&&this.__metronome.removeUpdateListener(this,"draw"),e.addUpdateListener(this,"draw"),this.__metronome=e},get cornerRadius(){return this.__cornerRadius},set cornerRadius(e){if(0<e){var r=document.createElement("canvas");r.width=r.height=e;var o=r.getContext("2d");o.fillStyle="rgb(0,0,0)",o.beginPath(),o.moveTo(0,0),o.lineTo(e,0),o.arcTo(0,0,0,e,e),o.lineTo(0,0),o.fill(),this.__cornerTL=r,r=document.createElement("canvas"),r.width=r.height=e,o=r.getContext("2d"),o.fillStyle="rgb(0,0,0)",o.beginPath(),o.moveTo(0,0),o.lineTo(e,0),o.lineTo(e,e),o.arcTo(e,0,0,0,e),o.fill(),this.__cornerTR=r,r=document.createElement("canvas"),r.width=r.height=e,o=r.getContext("2d"),o.fillStyle="rgb(0,0,0)",o.beginPath(),o.moveTo(e,0),o.lineTo(e,e),o.lineTo(0,e),o.arcTo(e,e,e,0,e),o.fill(),this.__cornerBR=r,r=document.createElement("canvas"),r.width=r.height=e,o=r.getContext("2d"),o.fillStyle="rgb(0,0,0)",o.beginPath(),o.moveTo(0,0),o.lineTo(0,e),o.lineTo(e,e),o.arcTo(0,e,0,0,e),o.fill(),this.__cornerBL=r,this.__cornerRadius=e}},drawNormal:function(){if(this.__canvas.width=this.__width,this.__container.calc(),this.__container.draw(),this.listenPassiveGestures&&(this.__gestureOccured=!0,this.gestures.group2.mouseOver=!0,this.gestures.group2.mouseOut=!0),this.__cornerRadius){var e=this.__canvas.width,r=this.__canvas.height,o=this.__cornerRadius;this.__context.save(),this.__context.globalCompositeOperation="destination-out",this.__context.drawImage(this.__cornerTL,0,0),this.__context.drawImage(this.__cornerTR,e-o,0),this.__context.drawImage(this.__cornerBR,e-o,r-o),this.__context.drawImage(this.__cornerBL,0,r-o),this.__context.restore()}},drawTweenSize:function(){this.__canvas.height=this.__height,this.drawNormal()},tweenSize:function(e,r,o,h,l){this.draw=this.drawTweenSize;var d=this,f={},_={},m=u.ref;return isNaN(e)||(f.__width=e),isNaN(r)||(f.__height=r),fa.run(this,f,o,h,l||this.metronome).onComplete=function(){d.draw=d.drawNormal,_.hasOwnProperty("onComplete")&&_.onComplete(),m.end()},_},isolate:function(){this.__canvas.width=this.__width,F.__instanceByCanvas.delete(this.__canvas),this.__container&&this.__container.isolate(),this.__canvasID=this.__canvas=this.__context=this.__width=null},$:function(){this.__metronome.ensureNextTickUpdate()}},function(){var e=document.createElement("canvas");e.width=e.height=1,F.PIXEL=e.getContext("2d")}(),F.__instanceByCanvas=new I,wa.prototype={className:"CanvasCompositionWrapper",superclassName:"Object",constructor:wa,get stage(){return this.__stage},set stage(e){e.canvas=this.canvas,e.pixelRatio=this.pixelRatio,this.__stage=e,this.resize()},resize:function(){var e=this.__stage;e.width=this.pixelRatio*this.webElement.clientWidth,e.height=this.pixelRatio*this.webElement.clientHeight,e.$()}},ka.prototype={className:"ImageLayer",superclassName:"CanvasLayer",constructor:ka,get name(){return this.__name},set name(e){var r=this.parent;r&&(typeof e=="string"?(!(e in r)||"parent"in r[e]&&r[e].parent==r&&r[e].name===e)&&(r[e]=this):this.__name in r&&r[this.__name]==this&&delete r[this.__name]),this.__name=e},get src(){return this.image.src},set src(e){function r(){h.draw=h.drawImage,h.sx=h.sx&&0<h.sx&&h.sx<l.width?h.sx:0,h.sy=h.sy&&0<h.sy&&h.sy<l.height?h.sy:0,h.width=h.sw=h.sw&&h.sw<=l.width-h.sx&&0<h.sw?h.sw:l.width-h.sx,h.height=h.sh=h.sh&&h.sh<=l.height-h.sy&&0<h.sh?h.sh:l.height-h.sy,h.isLoading=!1,h.hasOwnProperty("onLoad")&&h.onLoad(),h.dispatchEvent("load"),o.end()}var o=u.ref,h=this,l;if(e instanceof Image)l=this.image=e,l.complete?r():l.onload=r;else if(e instanceof HTMLCanvasElement)l=this.image=e,r();else if(e instanceof HTMLElement){this.isLoading=!0;var d=document.createElement("div");e=e.cloneNode(!0),d.appendChild(e),xa.set(d,{position:"absolute",opacity:0});var f=new XMLSerializer().serializeToString(e);document.body.appendChild(d),e='<svg xmlns="http://www.w3.org/2000/svg" width="'+(e.clientWidth||1)+'" height="'+(e.clientHeight||1)+'"><foreignObject width="100%" height="100%">'+f+"</foreignObject></svg>",document.body.removeChild(d);var _=window.URL||window.webkitURL||window,d=new Blob([e],{type:"image/svg+xml"}),m=_.createObjectURL(d);l=this.image=new Image,l.onload=function(){_.revokeObjectURL(m),r()},l.src=m}else this.isLoading=!0,l=this.image=new Image,l.onload=r,l.src=e},load:function(e){this.src=e},setContext:function(e){this.__context=e},setStage:function(e){this.__stage=e,this.onDisplayed&&e&&this.onDisplayed()},calc:function(){this.matrixLocal=t.get3(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.originX,this.originY),this.matrixGlobal=t.multiply(this.parent.matrixGlobal,this.matrixLocal)},drawImage:function(){var e=this.__context;e.save(),t.setTransform(e,this.matrixGlobal),e.globalAlpha*=this.alpha,e.drawImage(this.image,this.sx,this.sy,this.sw,this.sh,0,0,this.width,this.height),e.restore()},drawNothing:function(){},isolate:function(){this.__context=this.__stage=this.parent=null},copy:function(e){var r=R.call(this);if(this.isLoading)r.load(this.src);else if(e&&!this.image){var o=this;this.addEventListener("load",function(h){r.load(o.src)})}return r},hitTest:function(e,r){var o=this.__context;t.setTransform(o,this.matrixGlobal),o.beginPath(),o.rect(0,0,this.width,this.height);var h=o.isPointInPath(e,r);return o.closePath(),h&&this.useDeepHitTest&&(o=F.PIXEL,o.save(),t.setMovedTransform(o,this.matrixGlobal,-e,-r),o.drawImage(this.image,this.sx,this.sy,this.sw,this.sh,0,0,this.width,this.height),h=Boolean(o.getImageData(0,0,1,1).data[3]),o.restore(),h&&o.clearRect(0,0,2,2)),h}},ka.OWN_PROPS=s.concat("image draw width height sx sy sw sh useDeepHitTest isLoading".split(" ")),la.prototype={className:"AtlasImageLayer",superclassName:"CanvasLayer",constructor:la,get name(){return this.__name},set name(e){var r=this.parent;r&&(typeof e=="string"?(!(e in r)||"parent"in r[e]&&r[e].parent==r&&r[e].name===e)&&(r[e]=this):this.__name in r&&r[this.__name]==this&&delete r[this.__name]),this.__name=e},get imageName(){return this.__imageName},set imageName(e){if(this.__atlasData&&this.__atlasData.loaded){var r=this.__atlasData.frames[e];r&&(this.width=r.frame.w,this.height=r.frame.h)}this.__imageName=e},get atlasData(){return this.__atlasData},set atlasData(e){if(this.__imageName&&e.loaded){var r=e.frames[this.__imageName];r&&(this.width=r.frame.w,this.height=r.frame.h)}this.__atlasData=e},setContext:function(e){this.__context=e},setStage:function(e){this.__stage=e,this.onDisplayed&&e&&this.onDisplayed()},calc:function(){this.matrixLocal=t.get3(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.originX,this.originY),this.matrixGlobal=t.multiply(this.parent.matrixGlobal,this.matrixLocal)},drawImage:function(){var e=this.__context;e.save(),t.setTransform(e,this.matrixGlobal),e.globalAlpha*=this.alpha;var r=this.__atlasData.frames[this.__imageName].frame;e.drawImage(this.__atlasData.image,r.x,r.y,r.w,r.h,0,0,this.width,this.height),e.restore()},drawNothing:function(){},isolate:function(){this.__context=this.__stage=this.parent=null},copy:R,hitTest:function(e,r){var o=this.__context;t.setTransform(o,this.matrixGlobal),o.beginPath(),o.rect(0,0,this.width,this.height);var h=o.isPointInPath(e,r);return o.closePath(),h&&this.useDeepHitTest&&(o=F.PIXEL,o.save(),t.setMovedTransform(o,this.matrixGlobal,-e,-r),h=this.__atlasData.frames[this.__imageName].frame,o.drawImage(this.__atlasData.image,h.x,h.y,h.w,h.h,0,0,this.width,this.height),h=Boolean(o.getImageData(0,0,1,1).data[3]),o.restore(),h&&o.clearRect(0,0,2,2)),h}},la.OWN_PROPS=s.concat("draw width height __atlasData __imageName useDeepHitTest".split(" ")),ma.prototype={className:"AtlasFilmLayer",superclassName:"CanvasLayer",constructor:ma,get totalFrames(){return this.__totalFrames},get name(){return this.__name},set name(e){var r=this.parent;r&&(typeof e=="string"?(!(e in r)||"parent"in r[e]&&r[e].parent==r&&r[e].name===e)&&(r[e]=this):this.__name in r&&r[this.__name]==this&&delete r[this.__name]),this.__name=e},setContext:function(e){this.__context=e},setStage:function(e){e?(this.__stage=e,this.onDisplayed&&this.onDisplayed()):(this.__wasPlayingBeforeRemoving=this.isPlayed,this.stop(),this.matrixLocal=void 0,this.__stage=e)},get fps(){return this.__fps},set fps(e){isNaN(e)||0>=e?this.isPlayed&&this.__fps?(this.__stopChangingIndex(),this.__fps=0,this.__startChangingIndex()):this.__fps=0:this.isPlayed?this.__fps?(this.__fpsTimer.delay=1e3/e,this.__fps=e):(this.__stopChangingIndex(),this.__fps=e,this.__startChangingIndex()):this.__fps=e},loseQueue:function(){this.queue=u.REF_DEFAULT},setNextIndex:function(){this.frameIndex=this.frameIndex<this.__totalFrames-1?this.frameIndex+1:0},setPrevIndex:function(){this.frameIndex=this.frameIndex?this.frameIndex-1:this.__totalFrames-1},setNextIndexStretch:function(){--this.__stretchCount||(this.__stretchCount=this.__stretchRatio,this.setNextIndex())},setPrevIndexStretch:function(){--this.__stretchCount||(this.__stretchCount=this.__stretchRatio,this.setPrevIndex())},handleDestinationFrameTo:function(){if(this.__removeInTheEnd){var e=this.__stage;this.parent.removeChild(this),e.$()}else this.__stopChangingIndex();this.queue.end()},setNextIndexTo:function(){this.frameIndex==this.__destinationFrameIndex?this.handleDestinationFrameTo():this.setNextIndex()},setPrevIndexTo:function(){this.frameIndex==this.__destinationFrameIndex?this.handleDestinationFrameTo():this.setPrevIndex()},setNextIndexToStretch:function(){--this.__stretchCount||(this.__stretchCount=this.__stretchRatio,this.setNextIndexTo())},setPrevIndexToStretch:function(){--this.__stretchCount||(this.__stretchCount=this.__stretchRatio,this.setPrevIndexTo())},handleDestinationFrameFromTo:function(){this.__repeatsNumber===0||--this.__repeatsNumber?this.frameIndex=this.__startIndex:this.handleDestinationFrameTo()},setNextIndexFromTo:function(){this.frameIndex==this.__destinationFrameIndex?this.handleDestinationFrameFromTo():this.setNextIndex()},setPrevIndexFromTo:function(){this.frameIndex==this.__destinationFrameIndex?this.handleDestinationFrameFromTo():this.setPrevIndex()},setNextIndexFromToStretch:function(){--this.__stretchCount||(this.__stretchCount=this.__stretchRatio,this.setNextIndexFromTo())},setPrevIndexFromToStretch:function(){--this.__stretchCount||(this.__stretchCount=this.__stretchRatio,this.setPrevIndexFromTo())},nextFrame:function(){this.__stage&&this.frameIndex<this.__totalFrames-1&&(this.frameIndex++,this.__stage.$())},prevFrame:function(){this.__stage&&this.frameIndex&&(this.frameIndex--,this.__stage.$())},__delayedStartChangingIndex:function(){this.__stage.metronome.addListener(this,this.__changeIndexMethodName),this.__stage.metronome.removeListener(this,"__delayedStartChangingIndex")},__noNewIndexInThisFrame:function(){this[this.__changeIndexMethodName]=this.__changeIndexBufferMethod},__startChangingIndex:function(){this.matrixLocal||(this.__changeIndexBufferMethod=this[this.__changeIndexMethodName],this[this.__changeIndexMethodName]=this.__noNewIndexInThisFrame),this.__fps?this.isPlayed||(this.__fpsTimer=this.__stage.metronome.addTimerListener(this,this.__changeIndexMethodName,1e3/this.__fps)):this.__stage.metronome.addListener(this,this.__changeIndexMethodName),this.isPlayed=!0},__stopChangingIndex:function(){this.__fps?(this.__stage.metronome.removeListener(this.__fpsTimer),this.__fpsTimer=null):this.__stage.metronome.removeListener(this,this.__changeIndexMethodName),this.isPlayed=!1},__startPlayback:function(e){this.loseQueue(),e?(this.__stretchRatio=isNaN(e.stretch)&&1>e.stretch?1:Math.ceil(e.stretch),1<this.__stretchRatio?(this.__stretchCount=this.__stretchRatio,e=e.reverse===!0?"setPrevIndexStretch":"setNextIndexStretch"):e=e.reverse===!0?"setPrevIndex":"setNextIndex"):e="setNextIndex",this.isPlayed&&this.__changeIndexMethodName!=e&&this.__stopChangingIndex(),this.__changeIndexMethodName=e,this.__startChangingIndex()},play:function(e){this.__stage&&this.__startPlayback(e)},playFrom:function(e,r){this.__stage&&(this.frameIndex=e,this.__startPlayback(r))},playTo:function(e,r){if(this.__stage){this.queue=u.ref;var o=this.frameIndex;r?(this.__removeInTheEnd=r.remove,this.__stretchRatio=isNaN(r.stretch)&&1>r.stretch?1:Math.ceil(r.stretch),1<this.__stretchRatio?(this.__stretchCount=this.__stretchRatio,o=o>e&&r.reverse!==!1||o<e&&r.reverse===!0?"setPrevIndexToStretch":"setNextIndexToStretch"):o=o>e&&r.reverse!==!1||o<e&&r.reverse===!0?"setPrevIndexTo":"setNextIndexTo"):(this.__removeInTheEnd=!1,this.__stretchRatio=1,o=o>e?"setPrevIndexTo":"setNextIndexTo"),this.isPlayed&&this.__changeIndexMethodName!=o&&this.__stopChangingIndex(),this.__changeIndexMethodName=o,this.__destinationFrameIndex=e,this.__startChangingIndex()}},playToTheEnd:function(e){this.playTo(this.__totalFrames-1,e)},playToTheBeginning:function(e){this.playTo(0,e)},playFromTo:function(e,r,o){this.__stage&&(this.queue=u.ref,this.frameIndex=this.__startIndex=e,o?(this.__removeInTheEnd=o.remove,this.__repeatsNumber=isNaN(o.repeats)?1:Math.ceil(Math.abs(o.repeats)),this.__stretchRatio=isNaN(o.stretch)&&1>o.stretch?1:Math.ceil(o.stretch),1<this.__stretchRatio?(this.__stretchCount=this.__stretchRatio,e=e>r&&o.reverse!==!1||e<r&&o.reverse===!0?"setPrevIndexFromToStretch":"setNextIndexFromToStretch"):e=e>r&&o.reverse!==!1||e<r&&o.reverse===!0?"setPrevIndexFromTo":"setNextIndexFromTo"):(this.__removeInTheEnd=!1,this.__stretchRatio=this.__repeatsNumber=1,e=e>r?"setPrevIndexFromTo":"setNextIndexFromTo"),this.isPlayed&&this.__changeIndexMethodName!=e&&this.__stopChangingIndex(),this.__changeIndexMethodName=e,this.__destinationFrameIndex=r,this.__startChangingIndex())},stop:function(){this.__stage&&(this.loseQueue(),this.isPlayed&&this.__stopChangingIndex())},goto:function(e){this.__stage&&(this.loseQueue(),this.__stopChangingIndex(),this.frameIndex=e,this.__stage.$())},calcNormal:function(){this.matrixLocal=t.get3(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.originX,this.originY),this.matrixGlobal=t.multiply(this.parent.matrixGlobal,this.matrixLocal)},calcWithAnchors:function(){var e=this.__anchors.$pivot;if(e)if(this.matrixLocal||(this.matrixLocal=t.get(this.x,this.y,this.rotation,this.scaleX,this.scaleY)),typeof e=="string"){var r=this.__anchors[e],o;this.pivotName&&e!=this.pivotName&&(o=t.applyToOffset({x:r.x-this.originX,y:r.y-this.originY},this.matrixLocal),this.x+=o.x,this.y+=o.y),this.originX=r.x,this.originY=r.y,this.pivotName=e}else this.pivotData!=e&&(e[0]==this.pivotName?(o=this.__anchors[this.pivotName],r=this.__anchors[e[1]],o=t.applyToOffset({x:r.x-o.x,y:r.y-o.y},this.matrixLocal),this.pivotName=e[1]):(e[1]==this.pivotName?(o=this.__anchors[this.pivotName],r=this.__anchors[e[0]],o=t.applyToOffset({x:r.x-o.x,y:r.y-o.y},this.matrixLocal)):(r=this.__anchors[e[0]],o=t.applyToOffset({x:r.x-this.originX,y:r.y-this.originY},this.matrixLocal)),this.pivotName=e[0]),this.x+=o.x,this.y+=o.y,this.originX=r.x,this.originY=r.y,this.pivotData=e);this.calcNormal()},drawFrame:function(){var e=this.__context;e.save(),t.setTransform(e,this.matrixGlobal),e.globalAlpha*=this.alpha;var r=this.__atlasData.frames[this.__atlasFilmData.frames[this.frameIndex]];if(r){var o=r.frame,r=r.spriteSourceSize;e.drawImage(this.__atlasData.image,o.x,o.y,o.w,o.h,r.x,r.y,o.w,o.h),this.frameWidth=o.w,this.frameHeight=o.h,this.frameTrimTop=r.y,this.frameTrimLeft=r.x}e.restore()},drawNothing:function(){},isolate:function(){this.__wasPlayingBeforeRemoving=this.isPlayed,this.stop(),this.matrixLocal=void 0,this.__context=this.__stage=this.parent=null},onDisplayed:function(){this.__wasPlayingBeforeRemoving&&this.__startChangingIndex()},copy:function(){var e=new this.constructor(this.__atlasData,this.__atlasFilmData),r=this.constructor.OWN_PROPS;for(i=r.length;i--;)e[r[i]]=this[r[i]];e.listeners={};for(var o in this.listeners)e.listeners[o]=this.listeners[o].slice();return(r=sa.of(this))&&r.addTo(e),this.isPlayed&&(e.__wasPlayingBeforeRemoving=!0),e},set atlasData(e){this.__atlasData=e},get atlasData(){return this.__atlasData},set atlasFilmData(e){this.__totalFrames=e&&e.frames?e.frames.length:void 0,this.__atlasFilmData=e},get atlasFilmData(){return this.__atlasFilmData},set anchors(e){if(e){var r=this.__anchors={},o=!1,h=!0,l,d={},f=this,_;for(_ in e){l=e[_];for(var m in l)d[m]||(h&&m=="$pivot"&&(o=!0,h=!1),function(){var g=m;Object.defineProperty(r,g,{get:function(){return e[f.__atlasFilmData.frames[f.frameIndex]][g]}})}(),d[m]=!0)}o&&(this.calc=this.calcOwnMatrices=this.calcWithAnchors)}else this.calc=this.calcOwnMatrices=this.calcNormal,this.__anchors=null;this.__anchorsSource=e},get anchors(){return this.__anchors},hitTest:function(e,r){var o=this.__context;t.setTransform(o,this.matrixGlobal),o.beginPath(),o.rect(this.frameTrimLeft,this.frameTrimTop,this.frameWidth,this.frameHeight);var h=o.isPointInPath(e,r);if(o.closePath(),h&&this.useDeepHitTest){var l=this.__atlasData.frames[this.__atlasFilmData.frames[this.frameIndex]];l&&(o=F.PIXEL,o.save(),t.setMovedTransform(o,this.matrixGlobal,-e,-r),h=l.frame,o.drawImage(this.__atlasData.image,h.x,h.y,h.w,h.h,this.frameTrimLeft,this.frameTrimTop,this.frameWidth,this.frameHeight),h=Boolean(o.getImageData(0,0,1,1).data[3]),o.restore(),h&&o.clearRect(0,0,2,2))}return h}},ma.OWN_PROPS=s.concat("__atlasData __atlasFilmData __totalFrames __autoRemove __changeIndexMethodName __startIndex __destinationFrameIndex __removeInTheEnd __repeatsNumber __stretchRatio __stretchCount frameWidth frameHeight __wasPlayingBeforeRemoving frameTrimTop frameTrimLeft frameIndex draw useDeepHitTest __fps".split(" ")),P.prototype={className:"StyleObject",superclassName:"Object",constructor:P,clone:function(){return new P(this.props)},mix:function(e,r,o){3>arguments.length&&(o==!0,2>arguments.length&&(r=!0));var h=this.props,l=e.props,d,f,_;if(o)for(d in l)f=h[d],r?(_!=null&&_!=null||!h.hasOwnProperty(d))&&(h[d]=_):(f==null||f==null)&&(h[d]=_);else for(d in l)h.hasOwnProperty(d)&&(f=h[d],_=l[d],r?_!=null&&_!=null&&(h[d]=_):(f==null||f==null)&&(h[d]=_))},setValue:function(e){var r=this.props;e=e.props;for(var o in r)r[o]==e.hasOwnProperty(o)&&e[o]}},P.getDefaultTextStyle=function(){return new P({font:"sans-serif",size:12,color:"rgba(0,0,0,1)",align:"start",baseline:"hanging",bold:!1,italic:!1,strokeWidth:0,strokeColor:"rgba(0,0,0,1)",strokeCap:"butt",strokeJoin:"miter",strokeMiterLimit:10,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0,0,0,0)"})},M.prototype={className:"TextLayer",superclassName:"CanvasLayer",constructor:M,get name(){return this.__name},set name(e){var r=this.parent;r&&(typeof e=="string"?(!(e in r)||"parent"in r[e]&&r[e].parent==r&&r[e].name===e)&&(r[e]=this):this.__name in r&&r[this.__name]==this&&delete r[this.__name]),this.__name=e},get text(){return this.__text},set text(e){this.__text=e,this.calculateText(),this.measureWidth(),this.measureHeight()},get font(){return this.__style.props.font},set font(e){this.__style.props.font=e,this.__textWidth&&this.__text.length&&this.calculateText(),this.measureWidth(),this.measureHeight()},get size(){return this.__style.props.size},set size(e){this.__style.props.size=e,this.__textWidth&&this.__text.length&&this.calculateText(),this.measureWidth(),this.measureHeight()},get bold(){return this.__style.props.bold},set bold(e){this.__style.props.bold=e,this.__boldItalic=(e?"bold ":"")+(this.__style.props.italic?"italic ":""),this.__textWidth&&this.__text.length&&this.calculateText(),this.measureWidth(),this.measureHeight()},get italic(){return this.__style.props.italic},set italic(e){this.__style.props.italic=e,this.__boldItalic=(this.__style.props.bold?"bold ":"")+(e?"italic ":""),this.__textWidth&&this.__text.length&&this.calculateText(),this.measureWidth(),this.measureHeight()},get align(){return this.__style.props.align},set align(e){this.__style.props.align=e,this.__textWidth&&this.__text.length&&this.calculateText(),this.measureWidth(),this.measureHeight()},get baseline(){return this.__style.props.baseline},set baseline(e){this.__style.props.baseline=e},get strokeWidth(){return this.__style.props.strokeWidth},set strokeWidth(e){this.__style.props.strokeWidth=e},get strokeCap(){return this.__style.props.strokeCap},set strokeCap(e){this.__style.props.strokeCap=e},get strokeJoin(){return this.__style.props.strokeJoin},set strokeJoin(e){this.__style.props.strokeJoin=e},get strokeMiterLimit(){return this.__style.props.strokeMiterLimit},set strokeMiterLimit(e){this.__style.props.strokeMiterLimit=e},get shadowOffsetX(){return this.__style.props.shadowOffsetX},set shadowOffsetX(e){this.__style.props.shadowOffsetX=e},get shadowOffsetY(){return this.__style.props.shadowOffsetY},set shadowOffsetY(e){this.__style.props.shadowOffsetY=e},get shadowBlur(){return this.__style.props.shadowBlur},set shadowBlur(e){this.__style.props.shadowBlur=e},get lineSpacing(){return this.__lineSpacing},set lineSpacing(e){this.__lineSpacing=e,this.measureHeight()},get multiline(){return this.__multiline},set multiline(e){this.__textWidth?(this.measureWidth=this.measureBoundedWidth,e?(this.measureHeight=this.measureMultilineHeight,this.calculateText=this.calculateBoundedMultiline,this.fill=this.fillMultiline,this.stroke=this.strokeMultiline,!this.__multiline&&this.__text.length&&this.calculateText()):(this.measureHeight=this.measureLineHeight,this.calculateText=this.calculateBoundedLine,this.fill=this.fillBoundedLine,this.stroke=this.strokeBoundedLine)):e?(this.measureWidth=this.measureMultilineWidth,this.measureHeight=this.measureMultilineHeight,this.calculateText=this.calculateMultiline,this.fill=this.fillMultiline,this.stroke=this.strokeMultiline,!this.__multiline&&this.__text.length&&this.calculateText()):(this.measureWidth=this.measureLineWidth,this.measureHeight=this.measureLineHeight,this.calculateText=na,this.fill=this.fillLine,this.stroke=this.strokeLine),this.__multiline=e,this.measureWidth(),this.measureHeight()},get textWidth(){return this.__width},set textWidth(e){var r=this.__textWidth;this.__textWidth=isNaN(e)?0:Math.abs(e),this.__multiline?(this.measureHeight=this.measureMultilineHeight,this.fill=this.fillMultiline,this.stroke=this.strokeMultiline,e?(this.measureWidth=this.measureBoundedWidth,this.calculateText=this.calculateBoundedMultiline,this.__text.length&&this.calculateText()):(this.measureWidth=this.measureMultilineWidth,this.calculateText=this.calculateMultiline,r&&this.__text.length&&this.calculateText())):(this.measureHeight=this.measureLineHeight,e?(this.measureWidth=this.measureBoundedWidth,this.calculateText=this.calculateBoundedLine,this.fill=this.fillBoundedLine,this.stroke=this.strokeBoundedLine,this.__text.length&&this.calculateText()):(this.measureWidth=this.measureLineWidth,this.calculateText=na,this.fill=this.fillLine,this.stroke=this.strokeLine)),this.measureWidth(),this.measureHeight()},get textHeight(){return this.__height},get style(){var e=this.__style.props;return e.color=this.color,e.strokeColor=this.strokeColor,e.shadowColor=this.shadowColor,this.__style},set style(e){this.__style.setValue(e),this.color=this.__style.props.color,this.strokeColor=this.__style.props.strokeColor,this.shadowColor=this.__style.props.shadowColor,this.__textWidth&&this.calculateText(),this.measureWidth(),this.measureHeight()},addStyle:function(e,r){this.__style.mix(e,r,!1),this.__textWidth&&this.calculateText(),this.measureWidth(),this.measureHeight()},setupStroke:function(e){e.lineWidth=this.__style.props.strokeWidth,e.lineJoin=this.__style.props.strokeJoin,e.strokeStyle=this.strokeColor},fillLine:function(e){e.fillText(this.__text,0,0)},strokeLine:function(e){this.__style.props.strokeWidth&&(this.setupStroke(e),e.strokeText(this.__text,0,0))},fillBoundedLine:function(e){e.fillText(this.lines[0],0,0)},strokeBoundedLine:function(e){this.__style.props.strokeWidth&&(this.setupStroke(e),e.strokeText(this.lines[0],0,0))},fillMultiline:function(e){for(var r=0,o=this.lines.length;r<o;r++)e.fillText(this.lines[r],0,r*this.__lineSpacing)},strokeMultiline:function(e){this.setupStroke(e);for(var r=0,o=this.lines.length;r<o;r++)e.strokeText(this.lines[r],0,r*this.__lineSpacing)},measureBoundedWidth:function(){this.__width=this.__textWidth},measureLineWidth:function(){var e=M.RULER;this.prepareMeasureWidth(e),this.__width=e.measureText(this.__text).width,e=this.align,this.__alignOffsetX=e=="start"||e=="left"?0:e=="center"?-this.__width/2:-this.__width},measureMultilineWidth:function(){var e=M.RULER;this.prepareMeasureWidth(e);for(var r=this.__width=0,o=this.lines.length;r<o;r++)this.__width=Math.max(this.__width,e.measureText(this.lines[r]).width);this.measureAlignOffsetX(this.align)},measureAlignOffsetX:function(e){this.__alignOffsetX=e=="start"||e=="left"?0:e=="center"?-this.__width/2:-this.__width},prepareMeasureWidth:function(e){e.font=this.__boldItalic+this.__style.props.size+"px "+this.__style.props.font,e.textAlign=this.__style.props.align,e.textBaseline=this.__style.props.baseline},measureLineHeight:function(){this.__height=1.03*this.size},measureMultilineHeight:function(){this.__height=this.__lineSpacing*(this.lines.length-1)+1.03*this.size},calculateBoundedLine:function(){var e=M.RULER;this.lines.length=1,this.lines[0]="";var r=this.__text.split(" "),o="",h=0,l=r.length;for(this.prepareMeasureWidth(e);e.measureText(o).width<=this.__textWidth&&h<l;)this.lines[0]=o,o+=r[h++]+" "},calculateMultiline:function(){this.lines=this.__text.split(`
`)},calculateBoundedMultiline:function(){var e=M.RULER;this.lines.length=0;var r=this.__text.split(`
`),o,h,l,d,f=0,_,m;for(this.prepareMeasureWidth(e),l=0,stringsTotal=r.length;l<stringsTotal;l++){for(o=r[l].split(" "),this.lines[f]=h="",_=d=-1,m=o.length;d<m;)e.measureText(h).width>this.__textWidth?(_&&d--,_=-1,this.lines[++f]=h=""):(this.lines[f]=h,h+=o[++d]+" ",_++);f++}},calc:function(){this.matrixLocal=t.get3(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.originX,this.originY),this.matrixGlobal=t.multiply(this.parent.matrixGlobal,this.matrixLocal)},drawNormal:function(){var e=this.__context;e.save(),t.setTransform(e,this.matrixGlobal),e.globalAlpha*=this.alpha,e.font=this.__boldItalic+this.__style.props.size+"px "+this.__style.props.font,e.textAlign=this.__style.props.align,e.textBaseline=this.__style.props.baseline,e.fillStyle=this.color,this.strokeOverFill?(this.useFill&&this.fill(e),this.__style.props.strokeWidth&&this.stroke(e)):(this.__style.props.strokeWidth&&this.stroke(e),this.useFill&&this.fill(e)),e.restore()},drawCached:function(){},setContext:function(e){this.__context=e},setStage:function(e){this.__stage=e,this.onDisplayed&&e&&this.onDisplayed()},isolate:function(){this.__context=this.__stage=this.parent=null},copy:function(){var e=R.call(this);return e.lines=this.lines.slice(),e},onAdded:function(){this.measureWidth(),this.measureHeight()},hitTest:function(e,r){var o=this.__context;t.setTransform(o,this.matrixGlobal),o.beginPath(),o.rect(this.__alignOffsetX,0,this.__width,this.__height);var h=o.isPointInPath(e,r);if(o.closePath(),h){if(this.useDeepHitTest)o=F.PIXEL,o.save(),t.setMovedTransform(o,this.matrixGlobal,-e,-r),o.font=this.__boldItalic+this.__style.props.size+"px "+this.__style.props.font,o.textAlign=this.__style.props.align,o.textBaseline=this.__style.props.baseline,o.fillStyle=this.color,this.strokeOverFill?(this.useFill&&this.fill(o),this.strokeWidth&&this.stroke(o)):(this.strokeWidth&&this.stroke(o),this.useFill&&this.fill(o)),h=Boolean(o.getImageData(0,0,1,1).data[3]),o.restore(),h&&o.clearRect(0,0,2,2);else if(!this.useFill&&!this.strokeWidth)return!1}return h}},M.OWN_PROPS=s.concat("__text __style __boldItalic color strokeColor shadowColor draw __width __height __alignOffsetX strokeOverFill useDeepHitTest useFill __lineSpacing __textWidth __multiline fill stroke measureWidth measureHeight calculateText".split(" ")),function(){var e=document.createElement("canvas");e.width=e.height=1,M.RULER=e.getContext("2d")}(),FontLoader={},function(){function e(){o=!1,FontLoader.hasOwnProperty("onComplete")&&FontLoader.onComplete()}function r(_,m,g){var v=u.ref,p={fontName:_,fontStyle:m,charSet:g};d&&d.parentNode==l.parentNode&&l.parentNode.removeChild(d),WebFontConfig={google:{families:[_+":"+m+":"+g]},active:function(){f+="|"+_+(m?"||"+m:"")+(g?"|||"+g:"")+"  ",FontLoader.hasOwnProperty("onFontLoaded")&&FontLoader.onFontLoaded(p),v.end()},inactive:function(){FontLoader.hasOwnProperty("onFontFail")&&FontLoader.onFontFail(p),v.end()}},d=document.createElement("script"),d.src=(document.location.protocol=="https:"?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",d.type="text/javascript",d.async="true",l=document.getElementsByTagName("script")[0],l.parentNode.insertBefore(d,l)}var o=!1,h,l=document.getElementsByTagName("script")[0],d,f="";Object.defineProperty(FontLoader,"isLoading",{get:function(){return o}}),FontLoader.loadGoogleFont=function(_,m,g){m=m||"400",g=g||"latin",o?h.addTask(r,_,m,g):(h=new u,h.onComplete=e,h.addTask(r,_,m,g),o=!0,h.run())},FontLoader.loadGoogleFontList=function(){var _=u.ref,m={};if(document.location.protocol=="file:")setTimeout(function(){m.data=[""],D("loadGoogleFontList ERROR: font list can not be loaded from 'file://' location. Use it online."),m.hasOwnProperty("onComplete")&&(m.onComplete(),_.end())},0);else{var g=new W;g.onComplete=function(){m.data=JSON.parse(this.data).items,m.hasOwnProperty("onComplete")&&m.onComplete(),_.end()},g.load("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyADQfYE852T3oiRpLbivr44TfmczbjlIqQ")}return m},FontLoader.hasGoogleFont=function(_,m,g){return f.indexOf("|"+_+(m?"||"+m:"")+(g?"|||"+g:""))!=-1}}();var xa={set:function(e,r){for(var o in r)e.style[o]=r[o]}};N.prototype={className:"CssPropNum",constructor:N,get value(){return this.__value},set value(e){this.__element.style[this.__prop]=e+this.__suffix,this.__value=e}},N.parseCSSValue=function(e){var r={value:0,suffix:""};e=String(e).replace(/ /g,"");for(var o=e.length;o--;)if(!isNaN(e.charAt(o))){r.value=Number(e.substring(0,o+1)),r.suffix=e.substring(o+1,e.length);break}return r},N.tween=function(e,r,o,h,l){var d,f,_,m={object:e};for(f in r)_=N.parseCSSValue(r[f]),d=new N(e,f,_.suffix),d=Ka.run(d,"value",_.value,o,1e3*h,l);return d.onComplete=function(){m.hasOwnProperty("onComplete")&&m.onComplete()},m},N.instances={},u.REF_DEFAULT={end:function(){}},Object.defineProperty(u,"ref",{get:function(){var e=u.__ref;return u.__ref=u.REF_DEFAULT,e},set:function(e){u.__ref=e},enumerable:!0,configurable:!0}),u.ref=u.REF_DEFAULT,u.createTask2=function(e,r,o,h){var l=function(){h&&e.onStartBranch();var d=arguments.callee;u.ref=h?{end:function(){e.endBranch()}}:e,d._result=d._func.apply(null,d._arguments)};return l._arguments=o,l._func=r,l._result={},l},u.createTask3=function(e,r,o,h,l){var d=function(){l&&e.onStartBranch();var f=arguments.callee;u.ref=l?{end:function(){e.endBranch()}}:e,f._result=f._object[f._method].apply(f._object,f._arguments)};return d._arguments=h,d._method=o,d._object=r,d._result={},d};var t={get:function(e,r,o,h,l){var d=Math.PI*o/180;return o=Math.cos(d),d=Math.sin(d),{a:h*o,b:h*d,c:-l*d,d:l*o,e,f:r}},get2:function(e,r,o,h,l,d,f){var _=Math.PI*o/180;return o=Math.cos(_),_=Math.sin(_),{a:(o-f*_)*h,b:(_+f*o)*h,c:(d*o-_)*l,d:(d*_+o)*l,e,f:r}},applyTo:function(e,r){return{x:r.a*e.x+r.c*e.y+r.e,y:r.b*e.x+r.d*e.y+r.f}},applyToOffset:function(e,r){return{x:r.a*e.x+r.c*e.y,y:r.b*e.x+r.d*e.y}},multiply:function(e,r){return{a:e.a*r.a+e.c*r.b,b:e.b*r.a+e.d*r.b,c:e.a*r.c+e.c*r.d,d:e.b*r.c+e.d*r.d,e:e.a*r.e+e.c*r.f+e.e,f:e.b*r.e+e.d*r.f+e.f}},get3:function(e,r,o,h,l,d,f){var _=Math.PI*o/180;return o=Math.cos(_),_=Math.sin(_),{a:h*o,b:h*_,c:-l*_,d:l*o,e:l*_*f-h*o*d+e,f:-h*_*d-l*o*f+r}},invert:function(e){var r=e.c*e.b-e.a*e.d;return{a:-e.d/r,b:e.b/r,c:e.c/r,d:-e.a/r,e:(e.e*e.d-e.c*e.f)/r,f:(e.f*e.a-e.b*e.e)/r}},getSkew:function(e,r){return{a:1,b:e,c:r,d:1,e:0,f:0}},getStretch:function(e,r,o,h){var l=Math.PI*r/180;r=Math.cos(l);var d=Math.sin(l),l=r*r,f=d*d,_=r*d;return r*=d,{a:e*l+f,b:e*_-r,c:e*r-_,d:e*f+l,e:o||0,f:h||0}},transform:function(e,r){e.transform(r.a,r.b,r.c,r.d,r.e,r.f)},setTransform:function(e,r){e.setTransform(r.a,r.b,r.c,r.d,r.e,r.f)},setMovedTransform:function(e,r,o,h){e.setTransform(r.a,r.b,r.c,r.d,r.e+o,r.f+h)},calculateFor:function(e){for(var r=e.__stage,o=[];e!=r;)o.push(e),e=e.parent;for(e=o.length;e--;)o[e].calcOwnMatrices()}};t.GLOBAL=t.UNIT={a:1,b:0,c:0,d:1,e:0,f:0},t.ZERO=t.NULL={a:0,b:0,c:0,d:0,e:0,f:0};var Ba={globalToLocal:function(e,r,o){return o||t.calculateFor(r),t.applyTo(e,t.invert(r.matrixGlobal))},localToGlobal:function(e,r,o){return o||t.calculateFor(r),t.applyTo(e,r.matrixGlobal)},localToParent:function(e,r,o){return o||r.calcOwnMatrices(),t.applyTo(e,r.matrixLocal)},localToChild:function(e,r,o,h){return o.parent==r?(h||o.calcOwnMatrices(),t.applyTo(e,t.invert(o.matrixLocal))):null},localToLocal:function(e,r,o,h){return h||(t.calculateFor(r),t.calculateFor(o)),t.applyTo(t.applyTo(e,r.matrixGlobal),t.invert(o.matrixGlobal))}};K.prototype={className:"Shape",constructor:K,build:void 0,copy:Ea},K.EMPTY=new K(function(e){}),K.OWN_PROPS=pa;var ga={SquareShape:function(e){this.super(),this.size=A(e,100)},RectangleShape:function(e,r){this.super(),this.width=A(e,200),this.height=A(r,100)},RhombShape:function(e,r){this.super(),this.width=A(e,100),this.height=A(r,200)},RoundRectangleShape:function(e,r,o,h,l,d){this.super(),this.width=A(e,200),this.height=A(r,100),this.ra=A(o,10),this.rb=A(h,this.ra),this.rc=A(l,this.rb),this.rd=A(d,this.rc)},CircleShape:function(e){this.super(),this.radius=A(e,50)},EllipseShape:function(e,r){this.super(),this.a=A(e,50),this.b=A(r,.618*this.a)},SectorShape:function(e,r,o){this.super(),this.radius=A(e,50),this.startAngle=r||0,this.endAngle=o||0},RingShape:function(e,r){this.super(),this.radius=A(e,50),this.thickness=ra(r,0,this.radius,this.radius/2)},ArcShape:function(e,r,o,h){this.super(),this.radius=A(e,50),this.thickness=ra(r,0,this.radius,this.radius/2),this.startAngle=o||0,this.endAngle=h||2*Math.PI},CapsuleShape:function(e,r,o){this.super(),this.length=A(e,100),this.radius=ra(r,0,this.length/2,this.length/3),o&&(this.originY=2*this.radius,this.rotation=90)},StarShape:function(e,r,o,h){this.super(),this.ra=A(e,50),this.rb=A(r,100),this.n=A(o,5),this.offsetAngle=h||0},PolygonShape:function(e,r,o){this.super(),this.radius=A(e,50),this.n=A(r,5),this.offsetAngle=o||0}},pa={SquareShape:function(e){e.rect(0,0,this.size,this.size)},RectangleShape:function(e){e.rect(0,0,this.width,this.height)},RhombShape:function(e){var r=this.width/2,o=this.height/2;e.moveTo(0,-o),e.lineTo(r,0),e.lineTo(0,o),e.lineTo(-r,0),e.closePath()},RoundRectangleShape:function(e){e.moveTo(this.ra,0),e.lineTo(this.width-this.rb,0),e.arcTo(this.width,0,this.width,this.rb,this.rb),e.lineTo(this.width,this.height-this.rc),e.arcTo(this.width,this.height,this.width-this.rc,this.height,this.rc),e.lineTo(this.rd,this.height),e.arcTo(0,this.height,0,this.height-this.rd,this.rd),e.lineTo(0,this.ra),e.arcTo(0,0,this.ra,0,this.ra),e.closePath()},CircleShape:function(e){e.moveTo(this.radius,0),e.arc(0,0,this.radius,0,2*Math.PI)},EllipseShape:function(e){e.save(),e.scale(this.a/this.b,1),e.moveTo(this.b,0),e.arc(0,0,this.b,0,2*Math.PI),e.restore()},SectorShape:function(e){var r=Math.abs(this.endAngle-this.startAngle)<2*Math.PI;r?(e.moveTo(0,0),e.lineTo(this.radius*Math.cos(this.startAngle),this.radius*Math.sin(this.startAngle))):e.moveTo(this.radius*Math.cos(this.startAngle),this.radius*Math.sin(this.startAngle)),e.arc(0,0,this.radius,this.startAngle,this.endAngle),r&&(e.lineTo(0,0),e.closePath())},RingShape:function(e){var r=this.radius>this.thickness?this.radius-this.thickness:0;e.moveTo(this.radius,0),e.arc(0,0,this.radius,0,2*Math.PI),e.moveTo(r,0),e.arc(0,0,r,0,2*Math.PI,!0),e.moveTo(this.radius,0)},ArcShape:function(e){var r=this.radius>this.thickness?this.radius-this.thickness:0,o=Math.abs(this.endAngle-this.startAngle)<2*Math.PI;e.moveTo(this.radius*Math.cos(this.startAngle),this.radius*Math.sin(this.startAngle)),e.arc(0,0,this.radius,this.startAngle,this.endAngle),o?e.lineTo(r*Math.cos(this.endAngle),r*Math.sin(this.endAngle)):e.moveTo(r*Math.cos(this.endAngle),r*Math.sin(this.endAngle)),e.arc(0,0,r,this.endAngle,this.startAngle,!0),o&&(e.lineTo(this.radius*Math.cos(this.startAngle),this.radius*Math.sin(this.startAngle)),e.closePath())},CapsuleShape:function(e){var r=Math.PI/2;e.moveTo(this.radius,0),e.lineTo(this.length-this.radius,0),e.arc(this.length-this.radius,this.radius,this.radius,-r,r),e.lineTo(this.radius,2*this.radius),e.arc(this.radius,this.radius,this.radius,r,-r),e.closePath()},StarShape:function(e){var r=this.offsetAngle,o=r-Math.PI/2,h=o+Math.PI/this.n;e.moveTo(this.rb*Math.cos(o),this.rb*Math.sin(o)),e.lineTo(this.ra*Math.cos(h),this.ra*Math.sin(h));for(var l=1;l<this.n;l++)o=Math.PI*(l/this.n*2-.5)+r,h=o+Math.PI/this.n,e.lineTo(this.rb*Math.cos(o),this.rb*Math.sin(o)),e.lineTo(this.ra*Math.cos(h),this.ra*Math.sin(h));e.closePath()},PolygonShape:function(e){var r=this.offsetAngle,o=r-Math.PI/2;e.moveTo(this.radius*Math.cos(o),this.radius*Math.sin(o));for(var h=1;h<this.n;h++)o=Math.PI*(h/this.n*2-.5)+r,e.lineTo(this.radius*Math.cos(o),this.radius*Math.sin(o));e.closePath()}},La={SquareShape:["size"],RectangleShape:["width","height"],RhombShape:["width","height"],RoundRectangleShape:"width height ra rb rc rd".split(" "),CircleShape:["radius"],EllipseShape:["a","b"],SectorShape:["radius","startAngle","endAngle"],RingShape:["radius","thickness"],ArcShape:["radius","thickness","startAngle","endAngle"],CapsuleShape:["length","radius","isVertical"],StarShape:["ra","rb","n","offsetAngle"],PolygonShape:["radius","n","offsetAngle"]},Q,Z;for(Z in ga)Q=ga[Z],ia(Q,K),Q.prototype.className=Z,Q.prototype.superclassName="ShapeLayer",Q.prototype.build=pa[Z],Q.SPECIFIC_OWN_PROPS=La[Z],Q.OWN_PROPS=K.OWN_PROPS.concat(La[Z]);X.prototype={className:"ShapeLayer",superclassName:"CanvasLayer",constructor:X,get strokeWidth(){return this.__strokeWidth},set strokeWidth(e){this.paint=e?this.__useFill?this.fillAndStrokeShape:this.strokeShape:this.__useFill?this.fillShape:this.paintNothing,this.__strokeWidth=e},get useFill(){return this.__useFill},set useFill(e){this.paint=e?this.__strokeWidth?this.fillAndStrokeShape:this.fillShape:this.__strokeWidth?this.strokeShape:this.paintNothing,this.__useFill=e},get name(){return this.__name},set name(e){var r=this.parent;r&&(typeof e=="string"?(!(e in r)||"parent"in r[e]&&r[e].parent==r&&r[e].name===e)&&(r[e]=this):this.__name in r&&r[this.__name]==this&&delete r[this.__name]),this.__name=e},buildShape:function(e){e.save(),t.setTransform(e,this.shapeMatrixGlobal),this.shape.build(e),e.restore()},buildMovedShape:function(e,r,o){t.setMovedTransform(e,this.shapeMatrixGlobal,r,o),this.shape.build(e)},paintNothing:function(e){},fillAndStrokeShape:function(e){this.strokeOverFill?(this.fillShape(e),this.strokeShape(e)):(this.strokeShape(e),this.fillShape(e))},fillShape:function(e){e.fillStyle=this.color,e.fill()},strokeShape:function(e){e.strokeStyle=this.strokeColor,e.lineWidth=this.__strokeWidth,e.lineCap=this.strokeCap,e.lineJoin=this.strokeJoin,e.miterLimit=this.strokeMiterLimit,e.stroke()},calc:function(){this.matrixLocal=t.get3(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.originX,this.originY),this.matrixGlobal=this.parent.matrixGlobal?t.multiply(this.parent.matrixGlobal,this.matrixLocal):this.matrixLocal},draw:function(){var e=this.__context;e.save(),this.setMatrixAndAlpha(e),e.beginPath(),this.buildShape(e),this.paint(e),e.restore()},setMatrixAndAlpha:function(e){t.setTransform(e,this.matrixGlobal);var r=this.shape;this.shapeMatrixLocal=t.get3(r.x,r.y,r.rotation,r.scaleX,r.scaleY,r.originX,r.originY),this.shapeMatrixGlobal=t.multiply(this.matrixGlobal,this.shapeMatrixLocal),e.globalAlpha*=this.alpha},setContext:function(e){this.__context=e},setStage:function(e){this.__stage=e,this.onDisplayed&&e&&this.onDisplayed()},isolate:function(){this.__context=this.__stage=this.parent=null},copy:function(){var e=R.call(this);return e.shape=this.shape.copy(),e},hitTest:function(e,r){var o=this.__context;if(t.setTransform(o,this.shapeMatrixGlobal),o.beginPath(),this.shape.build(o),o=this.__useFill?o.isPointInPath(e,r):!1,!o&&this.useDeepHitTest){var h=F.PIXEL;h.save(),h.beginPath(),this.buildMovedShape(h,-e,-r),t.setMovedTransform(h,this.matrixGlobal,-e,-r),this.paint(h),o=Boolean(h.getImageData(0,0,1,1).data[3]),h.restore(),o&&h.clearRect(0,0,2,2)}return o}},X.OWN_PROPS=s.concat("strokeOverFill color strokeColor __strokeWidth strokeCap strokeJoin strokeMiterLimit useDeepHitTest __useFill paint".split(" ")),ia(Y,X),Y.prototype.className="RectangleLayer",Y.prototype.superclassName="CanvasLayer",Object.defineProperty(Y.prototype,"width",{get:function(){return this.shape.width},set:function(e){this.shape.width=e}}),Object.defineProperty(Y.prototype,"height",{get:function(){return this.shape.height},set:function(e){this.shape.height=e}}),ia(ha,X),ha.prototype.className="CircleLayer",ha.prototype.superclassName="CanvasLayer",Object.defineProperty(ha.prototype,"radius",{get:function(){return this.shape.radius},set:function(e){this.shape.radius=e}}),oa.prototype={className:"ShapeRegion",superclassName:"CanvasLayer",constructor:oa,drawNothing:function(){},drawShape:function(){var e=this.__context;e.save(),this.setMatrix(e),e.beginPath(),e.globalAlpha*=this.alpha,e.fillStyle=this.color,this.shape.build(e),e.fill(),e.restore()},get name(){return this.__name},set name(e){var r=this.parent;r&&(typeof e=="string"?(!(e in r)||"parent"in r[e]&&r[e].parent==r&&r[e].name===e)&&(r[e]=this):this.__name in r&&r[this.__name]==this&&delete r[this.__name]),this.__name=e},get visible(){return this.__visible},set visible(e){this.draw=e?this.drawShape:this.drawNothing,this.__visible=e},calc:function(){this.matrixLocal=t.get3(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.originX,this.originY),this.matrixGlobal=this.parent.matrixGlobal?t.multiply(this.parent.matrixGlobal,this.matrixLocal):this.matrixLocal},setMatrix:function(e){var r=this.shape;this.shapeMatrixLocal=t.get3(r.x,r.y,r.rotation,r.scaleX,r.scaleY,r.originX,r.originY),this.shapeMatrixGlobal=t.multiply(this.matrixGlobal,this.shapeMatrixLocal),t.setTransform(e,this.shapeMatrixGlobal)},setContext:function(e){this.__context=e},setStage:function(e){this.__stage=e,this.onDisplayed&&e&&this.onDisplayed()},isolate:function(){this.__context=this.__stage=this.parent=null},copy:function(){var e=R.call(this);return e.shape=this.shape.copy(),e},hitTest:function(e,r){var o=this.__context;return this.setMatrix(o),o.beginPath(),this.shape.build(o),o.isPointInPath(e,r)}},oa.OWN_PROPS=s.concat(["draw","color","__visible"]);var qa={DRAG_START:"dragBehaviorStart",DRAG_END:"dragBehaviorEnd",DRAG_MOVE:"dragBehaviorMove"},sa=function(){function e(st){ot=p.gesturePoint,isNaN(ot.x)||isNaN(ot.y)||(rt=v.parent.isContainer?Ba.globalToLocal(ot,v.parent,!0):ot,w.idle||(j=rt.x-m,y=rt.y-g,isNaN(j)||w.fixedX||(v.x=j<w.minX?w.minX:j>w.maxX?w.maxX:j),isNaN(y)||w.fixedY||(v.y=y<w.minY?w.minY:y>w.maxY?w.maxY:y)),(nt=(st-it)/1e3)?(J=rt.x-ht.x,tt=rt.y-ht.y,V=J/nt,et=tt/nt):V=et=J=tt=0,v.dispatchEvent(qa.DRAG_MOVE,{x:rt.x,y:rt.y,speedX:V,speedY:et,deltaX:J,deltaY:tt}),ht.x=rt.x,ht.y=rt.y,it=st)}function r(st){p.gesturePoint=p.getMousePoint(st)}function o(st){p.gesturePoint=p.getTouchPoint(st)}function h(st){document.addEventListener("mousemove",r),document.addEventListener("touchmove",o)}function l(st){document.removeEventListener("mousemove",r),document.removeEventListener("touchmove",o)}function d(st){v=st.currentTarget,(p=v.__stage)&&(x=p.canvas,w=z.get(v),at=v.parent.isContainer?Ba.globalToLocal(p.gesturePoint,v.parent,!0):p.gesturePoint,m=at.x-v.x,g=at.y-v.y,p.metronome.addListener(e),x.addEventListener("mouseleave",h),x.addEventListener("mouseenter",l),document.addEventListener("mouseup",l),document.addEventListener("touchend",l),document.addEventListener("touchcancel",l),v.dispatchEvent(qa.DRAG_START,{x:at.x,y:at.y,speedX:0,speedY:0,deltaX:0,deltaY:0}),ht.x=at.x,ht.y=at.y,V=et=J=tt=0,it=new Date().getTime())}function f(st){p&&p.metronome.removeListener(e),x&&(x.removeEventListener("mouseleave",h),x.removeEventListener("mouseenter",l)),document.removeEventListener("mouseup",l),document.removeEventListener("touchend",l),document.removeEventListener("touchcancel",l),l(st),v&&v.dispatchEvent(qa.DRAG_END,{x:rt.x,y:rt.y,speedX:V,speedY:et,deltaX:J,deltaY:tt}),v=p=w=void 0}function _(st){st=st&&st instanceof Object?st:{},this.idle=st.idle,this.fixedX=st.fixedX,this.fixedY=st.fixedY,this.minX=st.hasOwnProperty("minX")?st.minX:Number.NEGATIVE_INFINITY,this.maxX=st.hasOwnProperty("maxX")?st.maxX:Number.POSITIVE_INFINITY,this.minY=st.hasOwnProperty("minY")?st.minY:Number.NEGATIVE_INFINITY,this.maxY=st.hasOwnProperty("maxY")?st.maxY:Number.POSITIVE_INFINITY}var m,g,v,p,x,w,z=new I,j,y,V,et,J,tt,it,nt,at,ht={},rt,ot;return _.prototype={className:"DragBehavior",superclassName:"Object",constructor:_,addTo:function(st){st.addEventListener("mouseDown",d),document.addEventListener("mouseup",f),document.addEventListener("touchend",f),document.addEventListener("touchcancel",f),z.set(st,this)},removeFrom:function(st){st.removeEventListener("mouseDown",d),document.removeEventListener("mouseup",f),document.removeEventListener("touchend",f),document.removeEventListener("touchcancel",f),z.delete(st)},addedTo:function(st){return z.get(st)===this}},_.addedTo=function(st){return z.has(st)},_.of=function(st){return z.get(st)},_.catch=function(st){_.addedTo(st)&&st.__stage&&st.__stage.isDown&&d({currentTarget:st})},_}(),Ma={line:function(e,r){return{init:function(o,h){function l(_){return o+_*(e-o)}function d(_){return h+_*(r-h)}var f=L(e-o,r-h);return f?{type:"line",isRealPath:!0,hasConstantCurvature:!0,x:l,y:d,locate:function(_,m){_.x=l(m),_.y=d(m)},locateAndRotate:function(_,m){_.x=l(m),_.y=d(m),_.rotation=180*Math.atan2(r-h,e-o)/Math.PI},speed:function(_){return f},length:f,endX:e,endY:r,build:function(_){_.lineTo(e,r)},buildRange:function(_,m,g){_.moveTo(l(m),d(m)),_.lineTo(l(g),d(g))},injectLeap:function(){this.archBuild=this.build,this.build=function(_){_.moveTo(o,h),this.archBuild(_)}}}:!1},getInitRotation:function(o,h){return 2>arguments.length&&(h=o.y,o=o.x),180*Math.atan2(r-h,e-o)/Math.PI}}},arc:function(e,r,o,h,l){return{init:function(d,f){function _(J){return w+o*Math.cos(j+J*(y-j))}function m(J){return z+o*Math.sin(j+J*(y-j))}var g=L(e-d,r-f);if(!g)return!1;o=!o||o<g/2?g/2+.1:o;var v=(d+e)/2,p=(f+r)/2,g=Math.sqrt(o*o-g*g/4)/g,x=Boolean(h)==Boolean(l)?1:-1,w=v+x*g*(f-r),z=p+x*g*(e-d),j=Math.atan2(f-z,d-w),y=Math.atan2(r-z,e-w);Math.abs(y-j)>Math.PI!=Boolean(l)&&(j+=j>y?-2*Math.PI:2*Math.PI);var V=o*(y-j),et=Math.abs(V);return{type:"arc",isRealPath:!0,hasConstantCurvature:!0,x:_,y:m,locate:function(J,tt){J.x=_(tt),J.y=m(tt)},locateAndRotate:function(J,tt){J.x=_(tt),J.y=m(tt),J.rotation=180*Math.atan2(V*Math.cos(j+tt*(y-j)),-V*Math.sin(j+tt*(y-j)))/Math.PI},speed:function(J){return et},length:et,endX:e,endY:r,build:function(J){J.arc(w,z,o,j,y,h)},buildRange:function(J,tt,it){J.moveTo(_(tt),m(tt)),J.arc(w,z,o,j+(y-j)*tt,j+(y-j)*it,h)},injectLeap:function(){this.archBuild=this.build,this.build=function(J){J.moveTo(d,f),this.archBuild(J)}}}},getInitRotation:function(d,f){2>arguments.length&&(f=d.y,d=d.x);var _=L(e-d,r-f);o=!o||o<_/2?_/2:o;var m=(d+e)/2,g=(f+r)/2,_=Math.sqrt(o*o-_*_/4)/_,v=Boolean(h)==Boolean(l)?1:-1,m=m+v*_*(f-r),_=g+v*_*(e-d),g=Math.atan2(f-_,d-m),m=Math.atan2(r-_,e-m);return Math.abs(m-g)>Math.PI!=Boolean(l)&&(g+=g>m?-2*Math.PI:2*Math.PI),m=o*(m-g),180*Math.atan2(m*Math.cos(g),-m*Math.sin(g))/Math.PI}}},bezier2:function(e,r,o,h){return{init:function(l,d){function f(x){return Math.pow(1-x,2)*l+2*x*(1-x)*e+x*x*o}function _(x){return Math.pow(1-x,2)*d+2*x*(1-x)*r+x*x*h}if(l==e&&e==o&&d==r&&r==h)return!1;var m=2*l-4*e+2*o,g=2*e-2*l,v=2*d-4*r+2*h,p=2*r-2*d;return{type:"bezier2",isRealPath:!0,hasConstantCurvature:!1,x:f,y:_,locate:function(x,w){x.x=f(w),x.y=_(w)},locateAndRotate:function(x,w){x.x=f(w),x.y=_(w),x.rotation=180*Math.atan2(w*v+p,w*m+g)/Math.PI},speed:function(x){return L(x*m+g,x*v+p)},length:function(){for(var x=0,w=100;w--;){var z;z=f(w/100);var j=_(w/100),y=f((w+1)/100),V=_((w+1)/100);z=L(y-z,V-j),x+=z}return x}(),endX:o,endY:h,build:function(x){x.quadraticCurveTo(e,r,o,h)},buildRange:function(x,w,z){var j=1-w,y=1-z,V=j*j,et=2*w*j,J=w*w,tt=j*y,j=w*y+j*z,it=w*z;w=y*y;var y=2*z*y,nt=z*z;z=tt*l+j*e+it*o,tt=tt*d+j*r+it*h,j=w*l+y*e+nt*o,w=w*d+y*r+nt*h,x.moveTo(V*l+et*e+J*o,V*d+et*r+J*h),x.quadraticCurveTo(z,tt,j,w)},injectLeap:function(){this.archBuild=this.build,this.build=function(x){x.moveTo(l,d),this.archBuild(x)}}}},getInitRotation:function(l,d){return 2>arguments.length&&(d=l.y,l=l.x),180*Math.atan2(2*r-2*d,2*e-2*l)/Math.PI}}},bezier3:function(e,r,o,h,l,d){return{init:function(f,_){function m(y){return Math.pow(1-y,3)*f+3*y*(1-y)*(1-y)*e+3*y*y*(1-y)*o+y*y*y*l}function g(y){return Math.pow(1-y,3)*_+3*y*(1-y)*(1-y)*r+3*y*y*(1-y)*h+y*y*y*d}if(f==e&&e==o&&o==l&&_==r&&r==h&&h==d)return!1;var v=-3*f+9*e-9*o+3*l,p=6*f-12*e+6*o,x=-3*f+3*e,w=-3*_+9*r-9*h+3*d,z=6*_-12*r+6*h,j=-3*_+3*r;return{type:"bezier3",isRealPath:!0,hasConstantCurvature:!1,x:m,y:g,locate:function(y,V){y.x=m(V),y.y=g(V)},locateAndRotate:function(y,V){y.x=m(V),y.y=g(V),y.rotation=180*Math.atan2(V*V*w+V*z+j,V*V*v+V*p+x)/Math.PI},speed:function(y){return L(y*y*v+y*p+x,y*y*w+y*z+j)},length:function(){for(var y=0,V=100;V--;){var et;et=m(V/100);var J=g(V/100),tt=m((V+1)/100),it=g((V+1)/100);et=L(tt-et,it-J),y+=et}return y}(),endX:l,endY:d,build:function(y){y.bezierCurveTo(e,r,o,h,l,d)},buildRange:function(y,V,et){var J=1-V,tt=1-et,it=J*J*J,nt=3*V*J*J,at=3*V*V*J,ht=V*V*V,rt=J*J*tt,ot=2*V*J*tt+J*J*et,st=V*V*tt+2*J*V*et,ut=V*V*et,_t=J*tt*tt,ct=V*tt*tt+2*J*et*tt,ft=2*V*et*tt+J*et*et,mt=V*et*et;V=tt*tt*tt;var J=3*et*tt*tt,tt=3*et*et*tt,lt=et*et*et;et=rt*f+ot*e+st*o+ut*l,rt=rt*_+ot*r+st*h+ut*d,ot=_t*f+ct*e+ft*o+mt*l,_t=_t*_+ct*r+ft*h+mt*d,ct=V*f+J*e+tt*o+lt*l,V=V*_+J*r+tt*h+lt*d,y.moveTo(it*f+nt*e+at*o+ht*l,it*_+nt*r+at*h+ht*d),y.bezierCurveTo(et,rt,ot,_t,ct,V)},injectLeap:function(){this.archBuild=this.build,this.build=function(y){y.moveTo(f,_),this.archBuild(y)}}}},getInitRotation:function(f,_){return 2>arguments.length&&(_=f.y,f=f.x),180*Math.atan2(-3*_+3*r,-3*f+3*e)/Math.PI}}},custom:function(e,r,o){return o=3>arguments.length?100:Math.round(Math.abs(o)),{init:function(h,l){var d=function(){for(var f=0,_=100;_--;){var m;m=e(_/100);var g=r(_/100),v=e((_+1)/100),p=r((_+1)/100);m=L(v-m,p-g),f+=m}return f}();return d?{type:"custom",isRealPath:!0,hasConstantCurvature:!1,x:e,y:r,locate:function(f,_){f.x=e(_),f.y=r(_)},locateAndRotate:function(f,_){f.x=e(_),f.y=r(_),f.rotation=180*Math.atan2((r(_+1e-8)-r(_))/1e-8,(e(_+1e-8)-e(_))/1e-8)/Math.PI},speed:function(f){return L((e(f+1e-8)-e(f))/1e-8,(r(f+1e-8)-r(f))/1e-8)},length:d,endX:e(1),endY:r(1),build:function(f){this.buildRange(f,0,1)},buildRange:function(f,_,m){m-=_;var g;f.moveTo(e(_),r(_));for(var v=0;v<o;v++)g=_+(v+1)*m/o,f.lineTo(e(g),r(g))},injectLeap:function(){}}:!1},getInitRotation:function(h,l){return 2>arguments.length&&(l=h.y,h=h.x),180*Math.atan2((r(1e-8)-r(0))/1e-8,(e(1e-8)-e(0))/1e-8)/Math.PI}}},leap:function(e,r){return{init:function(o,h){return o==e&&h==r?!1:{type:"leap",isRealPath:!1,endX:e,endY:r}}}},combo:function(){var e=arguments;return{init:function(r,o){function h(z){for(var j=l;j--;)if(z>=p[j])return j}var l=e.length;if(!l)return!1;var d,f=r,_=o,m,g=!1,v=0,p=[0],x=!0,w=[];for(d=0;d<l;d++)(m=e[d].init(f,_))&&(m.isRealPath?(g&&m.injectLeap(),v+=m.length,p.push(v),x=x&&m.hasConstantCurvature,w.push(m),g=!1):g=!0,f=m.endX,_=m.endY);for(l=w.length,d=l+1;d--;)p[d]/=v;return{type:"combo",isRealPath:!0,hasConstantCurvature:x,x:function(z){var j=h(z);return w[j].x((z-p[j])/(p[j+1]-p[j]))},y:function(z){var j=h(z);return w[j].y((z-p[j])/(p[j+1]-p[j]))},locate:function(z,j){var y=h(j);w[y].locate(z,(j-p[y])/(p[y+1]-p[y]))},locateAndRotate:function(z,j){var y=h(j);w[y].locateAndRotate(z,(j-p[y])/(p[y+1]-p[y]))},speed:function(z){var j=h(z);return v/w[j].length*w[j].speed((z-p[j])/(p[j+1]-p[j]))},length:v,endX:w[l-1].endX,endY:w[l-1].endY,build:function(z){for(var j=0,y=w.length;j<y;j++)w[j].build(z)},buildRange:function(z,j,y){for(var V,et=w.length;et--;)y>p[et]&&j<p[et+1]&&(V=p[et+1]-p[et],w[et].buildRange(z,(Math.max(p[et],j)-p[et])/V,(Math.min(p[et+1],y)-p[et])/V))},injectLeap:function(){this.archBuild=this.build,this.build=function(z){z.moveTo(r,o),this.archBuild(z)}}}},getInitRotation:function(){return e[0].getInitRotation.apply(null,arguments)}}}};Tween2D={run:function(e,r,o,h,l,d){var f=u.ref,_={object:e,stop:function(){d.removeListener(J)}};if(r=(r instanceof Array?Ma.combo.apply(null,r):r).init(e.x,e.y),h=h||E.lin(),l=l||500,d||(d=e.__stage&&e.__stage.metronome?e.__stage.metronome:C.getInstance()),r)var m=r.speed,g=new Date().getTime(),v=0,p,x,w,z,j,y=0,V=r.length,et=o?r.locateAndRotate:r.locate,J=r.hasConstantCurvature?function(){p=(new Date().getTime()-g)/l,y+=(p-v)*V/m(y),1>y?(et(e,h(0,1,y)),v=p):(et(e,1),d.removeListener(J),_.hasOwnProperty("onComplete")&&_.onComplete(),f.end())}:function(){if(x=(new Date().getTime()-g)/l,1>x){for(p=h(0,1,x),w=p-v,j=0;Math.abs(j)<Math.abs(w);)z=w/50,j+=z*m(y)/V,y+=z;et(e,y),v+=j}else et(e,1),d.removeListener(J),_.hasOwnProperty("onComplete")&&_.onComplete(),f.end()};else g=new Date().getTime(),J=function(){p=(new Date().getTime()-g)/l,y=h(0,1,p),1<=p&&(d.removeListener(J),_.hasOwnProperty("onComplete")&&_.onComplete(),f.end())};return d.addListener(J),_}},window.hasOwnProperty("jsband")||(window.jsband={}),s=window.jsband,s.wrap={},s.ui={},s.use=function(a){a=a.split(" ").join("");var b,c=a.lastIndexOf(".*");if(c==a.length-2)for(b in a=eval(a.substring(0,c)),a)window[b]=a[b];else b=a.split("."),b=b[b.length-1],window[b]=eval(a)},s.trace=D,s.extend=ia,s.createClass=function(e,r,o){function h(){if(r)for(var l in r)this[l]=r[l];o&&o(this)}return h.prototype=e,h.prototype.constructor=h},s.getColorComponents=$,s.rgbToHsl=Da,s.getHslComponents=function(e){return Da($(e))},s.getRgbComponents=$,s.EnterFrameSignal=s.Metronome=C,s.Ease=E,s.Pause=ya,s.Wait=Ja,s.MonoTween={run:function(e,r,o,h,l,d){var f=u.ref,_={object:e},m=l||30,g=h||E.lin(),v,p=e[r],x="change"+r;v=d||(e.__stage&&e.__stage.metronome?e.__stage.metronome:C.getInstance());var w=1;return e[x]=function(){this[r]=g(p,o,w++/m),w>m&&(this[r]=o,v.removeListener(this,x),delete this[x],_.hasOwnProperty("onComplete")&&setTimeout(function(){_.onComplete()},0),f.end())},v.addListener(e,x),_}},s.MonoTweenTimebased=Ka,s.PolyTween={run:function(e,r,o,h,l,d){var f=u.ref,_={object:e},m=h||30,g=o||E.lin(),v;v=l||(e.__stage&&e.__stage.metronome?e.__stage.metronome:C.getInstance());var p;d?(o=d.startFrame||1,p=d.looped):(o=1,p=!1);var x=0,w,z={};for(w in r)z[w]=e[w],x++;var j=x;for(w in r)d="change"+w,e[d]=function(){j=j?j-1:x-1;var y=arguments.callee,V=y.p,et=y.updateFunctionName;this[V]=g(z[V],r[V],y.n++/m),y.n>m&&(this[V]=r[V],p?y.n=1:(v.removeListener(this,et),delete this[et],j||(_.hasOwnProperty("onComplete")&&setTimeout(function(){_.onComplete()},0),f.end())))},e[d].p=w,e[d].n=o,e[d].updateFunctionName=d,v.addListener(e,d);return _}},s.PolyTweenTimebased=s.Tween=fa,s.ColorTween=za,s.ColorTweenTimebased=za,s.Boom=Aa,s.Boomerang={run:function(e,r,o,h,l,d){var f=u.ref,_={object:e},m=h||30,g=o||Aa.osc(),v;v=l||(e.__stage&&e.__stage.metronome?e.__stage.metronome:C.getInstance());var p;d?(o=d.startFrame||1,p=d.looped):(o=1,p=!1);var x=0,w,z={},j={};for(w in r)z[w]=e[w],j[w]=r[w]-z[w],x++;var y=x;for(w in r)r="change"+w,e[r]=function(){y=y?y-1:x-1;var V=arguments.callee,et=V.p,J=V.updateFunctionName;this[et]=z[et]+j[et]*g(V.n++/m),V.n>m&&(this[et]=z[et],p?V.n=1:(v.removeListener(this,J),delete this[J],y||(_.hasOwnProperty("onComplete")&&setTimeout(function(){_.onComplete()},0),f.end())))},e[r].p=w,e[r].n=o,e[r].updateFunctionName=r,v.addListener(e,r);return _}},s.BoomerangTimebased={run:function(e,r,o,h,l){var d=u.ref,f={object:e},_=h||500,m=o||Aa.osc(),g;g=l||(e.__stage&&e.__stage.metronome?e.__stage.metronome:C.getInstance()),o=0;var v,p={},x={};for(v in r)p[v]=e[v],x[v]=r[v]-p[v],o++;var w=new Date().getTime();for(v in r)r="change"+v,e[r]=function(z){var j=arguments.callee,y=j.p,V=j.updateFunctionName;this[y]=p[y]+x[y]*m(j.t/_),j.t=z-w,j.t>_&&(this[y]=p[y],g.removeListener(this,V),delete this[V],!j.propsCounter)&&(f.hasOwnProperty("onComplete")&&f.onComplete(),d.end())},e[r].p=v,e[r].t=0,e[r].propsCounter=--o,e[r].updateFunctionName=r,g.addListener(e,r);return f}},s.Shift=ta,s.ShiftTimebased=ua,s.CanvasContainer=ea,s.CanvasComposition=F,s.ImageLayer=ka,s.TextLoader=W,s.XMLLoader=function(){this.data=null;var e=this;this.load=function(r){var o=u.ref,h=new XMLHttpRequest;h.open("GET",r,!0),h.onreadystatechange=function(){h.readyState===4&&(h.status===200||h.status==0)&&(e.data=h.responseXML,e.hasOwnProperty("onComplete")&&e.onComplete(),o.end())},h.send(null)}},s.AtlasData=function(){this.imageURL=this.image=this.scale=this.size=this.format=this.frames=null,this.loaded=!1;var e=this;this.load=function(r,o){function h(f){if(f=f instanceof W?JSON.parse(f.data):f,e.frames=f.frames,e.format=f.meta.format,e.size=f.meta.size,e.scale=f.meta.scale,o&&(o instanceof Image||o instanceof HTMLCanvasElement))e.image=o,e.loaded=!0,e.hasOwnProperty("onLoad")&&e.onLoad(),l.end();else{var _=new Image;_.onload=function(){e.image=_,e.loaded=!0,e.hasOwnProperty("onLoad")&&e.onLoad(),l.end()},_.src=e.imageURL=o||f.meta.image}}var l=u.ref;if(typeof r=="string"){var d=new W;d.onComplete=function(){h(this)},d.load(r)}else h(r)}},s.AtlasFilmData=Ia,s.AtlasFilmDataSheet=function(){var e=this;this.load=function(r){var o=u.ref,h=new W;h.onComplete=function(){e.parse(this.data.trim()),e.hasOwnProperty("onLoad")&&e.onLoad(),o.end()},h.load(r)},this.parse=function(r){r.charAt(0)!="&"&&(r="&".concat(r)),r=r.split("&");for(var o=r.length,h,l,d,f=1;f<o;f++)h=r[f].split("="),d=h[0].trim(),l=new Ia,l.parse(h[1]),e[d]=l}},s.AtlasImageLayer=la,s.AtlasFilmLayer=ma,s.EventDispatcherBehaivor=G,s.StyleObject=P,s.TextLayer=M,s.CssProp=xa,s.CssPropNum=N,s.CssPropCompound=function(e,r,o,h){for(var l=this,d=-1,f,_=0,m=[],g,v=[];0<=(d=o.indexOf("[",d+1));)if(0<=(f=o.indexOf("]",d))){g=o.substring(_,d);var _=o.substring(d+1,f),p={get:function(){return this["__"+p.subPropName]},set:function(z){this["__"+p.subPropName]=z,z=m.length;for(var j=v[0],y=0;y<z;y++)j+=l["__"+m[y]]+v[y+1];l.__value=e.style[r]=j}};p.subPropName=_,Object.defineProperty(l,_,p),v.push(g),m.push(_),_=f+1}if(v.push(o.substring(f+1,o.length)),h)for(var x in h)this[x]=h[x]},s.Queue=u,s.Matrix=t,s.Point=Ba,s.Shape=K,s.ShapeLayer=X,s.RectangleLayer=Y,s.CircleLayer=ha,s.ShapeRegion=oa,s.CommonMap=aa,s.SoftMap=I,s.HardMap=O,s.SoftSet=ba,s.HardSet=ca,s.IdChain=T,s.HashIterator=Fa,s.FontLoader=FontLoader,s.DragBehavior=sa,s.DragBehaviorEvent=qa,s.CanvasCompositionWrapper=wa,s.Swing=da,s.Wave=H,s.Motion=ja,s.Motion2D=va,s.Path=Ma,s.Tween2D=Tween2D,s.events={CustomEvent:{CUSTOM_STRING_CONSTANT_1:"customEventName_1",CUSTOM_STRING_CONSTANT_2:"customEventName_2"},CustomEventData:function(e,r,o){this.eventProp_1=e,this.eventProp_2=r,this.eventProp_3=o}},s.shapes=ga})()});xt();})();
