(()=>{var a=(b,a)=>function(){return a||(0,b[Object.keys(b)[0]])((a={exports:{}}).exports,a),a.exports},b=a({"<stdin>"(a,b){(function(){var w,Q,I,a,ab,g,l,an,aq,f,aa,ad,R,ae,D,_,m,Y,b,X,z,ah,u,x,O,U,ac;function j(a){console.log(a)}function V(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.prototype.super=b,"OWN_PROPS"in b&&(a.OWN_PROPS=b.OWN_PROPS.slice())}function N(b){if(b=b.replace(/ /g,""),b.indexOf("#")!=-1){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16),a:1}:null}return a=b.toLowerCase(),a.indexOf("rgb(")!=-1||a.indexOf("rgba(")!=-1?(a=a.substring(a.indexOf("(")+1,a.indexOf(")")).split(","),{r:Number(a[0]),g:Number(a[1]),b:Number(a[2]),a:3<a.length?Number(a[3]):1}):typeof ab[a]!="undefined"?(b=ab[a],b.a=1,b):(a=h.PIXEL,a.save(),a.fillStyle=b,a.fillRect(0,0,1,1),b=a.getImageData(0,0,1,1).data,b={r:b[0],g:b[1],b:b[2],a:b[3]/255},a.restore(),a.clearRect(0,0,2,2),b)}function ao(c){var e=c.r/255,d=c.g/255,f=c.b/255,a,b;return c="a"in c?c.a:1,a=Math.min(e,d,f),b=Math.max(e,d,f),b==a?{h:0,s:0,l:100*a,a:c}:(e=b==e?60*(d-f)/(b-a)+(d<f?360:0):b==d?60*(f-e)/(b-a)+120:60*(e-d)/(b-a)+240,d=(b-a)/(1-Math.abs(1-b-a)),a=(b+a)/2,{h:Math.round(e),s:Math.round(100*d),l:Math.round(100*a),a:c})}function d(a,b){return isNaN(a)||0>a?b:a}function ag(a,b,c,d){return isNaN(a)?d:a<b?b:a>c?c:a}function al(){var b=new this.constructor,a=this.constructor.OWN_PROPS;for(i=a.length;i--;)b[a[i]]=this[a[i]];return b}function E(){var a=al.call(this),b;a.listeners={};for(b in this.listeners)a.listeners[b]=this.listeners[b].slice();return(b=U.of(this))&&b.addTo(a),a}function r(a,b){return Math.sqrt(a*a+b*b)}function M(){var a,b=[],c=[];this.get=function(d){for(a=b.length;a--;)if(b[a]===d)return c[a]},this.set=function(d,e){for(a=b.length;a--;){if(k=b[a],k===d){c[a]=e;return}this.useGC&&this.gcCondition(k,c[a])&&(b.splice(a,1),c.splice(a,1),this.useGCEvents&&this.dispatchEvent("removedByGC",{key:k,value:c[a]}))}b.push(d),c.push(e)},this.has=function(c){for(a=b.length;a--;)if(b[a]===c)return!0;return!1},this.delete=function(d){for(a=b.length;a--;)if(b[a]===d){b.splice(a,1),c.splice(a,1);break}},Object.defineProperty(this,"size",{get:function(){return b.length},enumerable:!0,configurable:!1}),this.log=function(){j(""),j('Hash-table "'+this.name+'" log:'),j(""),a=0;for(n=b.length;a<n;a++)j(a+". key = "+b[a]+", value = "+c[a])},this.name="untitled",this.gcCondition=M.EMPTY_GC_CONDITION,this.useGCEvents=this.useGC=!1,l.init(this)}function o(){var c,e,a,f,d,l,h,m,b,i,k;arguments.length&&arguments[0]===w?(c=arguments[1],e=c.errorType,c.hostClass?(a=c.hostClass.getID(),f=c.hostClass.prototype.className):(a=o.getID(),f="SoftMap")):(e='SoftMap "set"',a=o.getID(),f="SoftMap"),d=0,l=g.createHiddenZone,h=g.keyIsObject,m=g.keyIsFixed,b=g.hiddenZoneOf,i=g.keyHasHiddenZone,k=g.keyKnowsID,this.set=function(c,f){if(!h(c))return j(e+" ERROR: "+c+" is not an Object"),!1;if(i(c))k(c,a)||(d++,b(c).propsTotal++);else{if(m(c))return j(e+" ERROR: "+c+' is frozen or its "valueOf" is not configurable'),!1;l(c),d++,b(c).propsTotal++}return b(c)[a]=f,!0},this.get=function(c){if(h(c)&&i(c))return b(c)[a]},this.has=function(b){return h(b)&&i(b)&&k(b,a)},this.hasPair=function(c,d){return this.has(c)&&b(c)[a]===d},this.delete=function(c){return!!this.has(c)&&(delete b(c)[a],b(c).propsTotal--,d--,!0)},Object.defineProperty(this,"size",{get:function(){return d}}),this.traceID=function(){j(f+" instance id == "+a)},this.traceCollectionsOf=g.traceCollectionsOf}function L(){var a=new o(w,{hostClass:L,errorType:'SoftSet "add"'});this.add=function(b){return a.set(b,!0)},this.has=function(b){return a.has(b)},this.delete=function(b){return a.delete(b)},Object.defineProperty(this,"size",{get:function(){return a.size}}),this.traceID=function(){a.traceID()},this.traceCollectionsOf=g.traceCollectionsOf}function v(){var f,i,h,b,c,d,a,e;arguments.length&&arguments[0]===w&&(f=arguments[1],i=f.errorType,h=f.hostClass),b=f?new o(w,{hostClass:h||v,errorType:i||'HardMap "set"'}):new o(w,{hostClass:v,errorType:'HardMap "set"'}),c={},d={},a={},e=0,this.set=function(f,i){var h=!g.keyIsObject(f),j;return h&&(j=f,a.hasOwnProperty(f)&&(f=a[f])),b.has(f)?(h=b.get(f),d[h]=i,!0):(h&&(a[j]=f={$:f}),b.set(f,++e))?(c[e]=h?j:f,d[e]=i,!0):(e--,!1)},this.get=function(c){return g.keyIsObject(c)?d[b.get(c)]:a.hasOwnProperty(c)?d[b.get(a[c])]:void 0},this.has=function(c){return g.keyIsObject(c)?b.has(c):a.hasOwnProperty(c)},this.hasPair=function(a,b){return this.has(a)&&this.get(a)===b},this.delete=function(e){if(!g.keyIsObject(e)&&a.hasOwnProperty(e)){var f=a[e];delete a[e],e=f}return f=b.get(e),f!==void 0&&(delete c[f],delete d[f],b.delete(e),!0)},this.forEach=function(a){for(id in c)a(d[id],c[id],this)},this.forEachKey=function(a,b){for(id in c)a(c[id],b)},this.randomKey=function(){var a=Math.ceil(this.size*Math.random())||1,b=0;for(id in c)if(++b==a)return c[id]},this.clear=function(){for(id in c){var f=c[id];b.delete(g.keyIsObject(f)?f:a[f])}c={},d={},a={},e=0},Object.defineProperty(this,"size",{get:function(){return b.size}}),this.traceID=function(){b.traceID()},this.traceCollectionsOf=g.traceCollectionsOf}function K(){var a=new v(w,{hostClass:K,errorType:'HardSet "add"'});this.add=function(b){return a.set(b,!0)},this.has=function(b){return a.has(b)},this.delete=function(b){return a.delete(b)},this.forEach=function(b){a.forEachKey(b,this)},this.clear=function(){a.clear()},this.random=function(){return a.randomKey()},Object.defineProperty(this,"size",{get:function(){return a.size}}),this.traceID=function(){a.traceID()},this.traceCollectionsOf=g.traceCollectionsOf}function B(g){var h,f,a,d,c,b,e;if(g&&g instanceof Object){h=new B;for(f in g)h.add(f);return h}a={},e=0,this.add=function(d){return d=String(d),!(this.has(d)||d==="")&&(e?(b[2]=d,b=a[d]=[b[1],d,0]):a[d]=c=b=[0,d,0],e++,!0)},this.addBefore=function(g,f){if(this.has(g)&&f!=g&&f!==""){if(f=String(f),this.has(f))if(a[g][0]!=f)a[g][0]?(a[f][2]?(d=a[f],a[d[0]][2]=d[2],a[d[2]][0]=d[0]):(d=b,b=a[d[0]],b[2]=0),d[2]=g,d[0]=a[g][0],a[d[0]][2]=a[g][0]=f):(a[f][2]?(c=a[f],a[c[0]][2]=c[2],a[c[2]][0]=c[0]):(c=b,b=a[c[0]],b[2]=0),c[2]=g,c[0]=0,a[g][0]=f);else return!1;else{if(a[g][0]){var h=a[g][0];a[h][2]=f,a[g][0]=f,a[f]=[h,f,g]}else c[0]=f,c=a[f]=[0,f,g];e++}return!0}return!1},this.addAfter=function(c,d){if(this.has(c)&&d!=c&&a[c][2]!=d&&d!==""){if(a[c][2])return this.addBefore(a[c][2],d);b[2]="",b=a[""]=[c,"",0];var e=this.addBefore("",d);return b=a[b[0]],b[2]=0,delete a[""],e}return!1},this.has=function(b){return a.hasOwnProperty(b)},this.nextTo=function(b){return this.has(b)?a[b][2]:void 0},this.prevTo=function(b){return this.has(b)?a[b][0]:void 0},this.delete=function(f){return!!this.has(f)&&(a[f][0]?a[f][2]?(d=a[f],a[d[0]][2]=d[2],a[d[2]][0]=d[0]):(b=a[a[f][0]],b[2]=0):(c=a[a[f][2]],c[0]=0),delete a[f],e--,!0)},this.isFirst=function(b){return this.has(b)&&!a[b][0]},this.isLast=function(b){return this.has(b)&&!a[b][2]},Object.defineProperty(this,"size",{get:function(){return e}}),Object.defineProperty(this,"first",{get:function(){return e?c[1]:void 0}}),Object.defineProperty(this,"last",{get:function(){return e?b[1]:void 0}}),this.traceLinks=function(){j(""),j("----- IdChain links: -----");for(var b=c[1];b;)j(b+": ["+a[b]+"]"),b=a[b][2]}}function ar(e,b){b=b||new B(e);var c=b.first,d,a;this.next=function(){return b.size?a?b.has(a)?((a=b.nextTo(a))&&(c=a),d=!0,{value:a?e[a]:void 0,done:!a}):(a=c=b.first,d=!0,{value:e[a],done:!1}):(a=b.isFirst(c)?1<b.size?c:d?void 0:c:void 0,d=!0,{value:a?e[a]:void 0,done:!a}):{value:void 0,done:!0}},this.prev=function(){return b.size?a?b.has(a)?((a=b.prevTo(a))&&(c=a),d=!1,{value:a?e[a]:void 0,done:!a}):(a=c=b.first,d=!0,{value:e[a],done:!1}):(a=b.isLast(c)?1<b.size?c:d?c:void 0:void 0,d=!1,{value:a?e[a]:void 0,done:!a}):{value:void 0,done:!0}}}function A(){Object.defineProperty(this,"propsTotal",{value:0,configurable:!1,wrirable:!0,enumerable:!1})}function e(j,r,t){var l,h,b,a,g,f,i,m,c,d,n,p,s,q,o,k;(t||3>arguments.length)&&(e.__defaultInstance=this),j=isNaN(j)||0>=j?60:j,l=j==60,this.frameDuration=1e3/j,r=2>arguments.length||r,h=null,b=[],a=[],g=0,f=!1,i=!1,c=0,d=0,n=this,p={object:{func:function(){n.removeListener(p.object,"func")}},methodName:"func"},s=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,n.frameDuration)},q=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||clearTimeout,o=r?function(){m=(new Date).getTime(),i=!0;for(c=b.length;c--;)b[c]&&b[c].object[b[c].methodName](m,m);if(i=!1,g)for(d=a.length;d--;)a[d]&&a[d].object[a[d].methodName]();f&&k()}:function(){i=!0;for(c=b.length;c--;)b[c]&&b[c].object[b[c].methodName]();if(i=!1,g)for(d=a.length;d--;)a[d]&&a[d].object[a[d].methodName]();f&&k()},k=l?function(){h=s(o)}:function(){h=setTimeout(o,n.frameDuration)},this.addListener=function(e,c,d){2>arguments.length?c="call":typeof arguments[1]=="boolean"&&(d=c,c="call");for(var a=b.length;a--;)if(b[a].object===e&&b[a].methodName===c)return;a={object:e,methodName:c,debugStr:"debugStr"},d?a.isHidden=d:g++,b.push(a),f||(f=!0,i||k())},this.removeListener=function(j,i){var d,e;2>arguments.length&&(i="call");for(d=b.length;d--;)if(b[d].object===j&&b[d].methodName===i){if(e=!b[d].isHidden,e&&g--,b.splice(d,1),d<c&&c--,b.length){if(!g&&e)for(d=a.length;d--;)a[d].object[a[d].methodName]()}else if(f=!1,l?q(h):clearTimeout(h),e)for(d=a.length;d--;)a[d].object[a[d].methodName]();break}},this.removeAllListeners=function(){l?q(h):clearTimeout(h),f=!1,b.length=g=c=0;for(var d=a.length;d--;)a[d].object[a[d].methodName]()},this.addUpdateListener=function(c,d){for(var b=a.length;b--;)if(a[b].object===c&&a[b].methodName===d)return;a.push({object:c,methodName:d})},this.removeUpdateListener=function(c,e){for(var b=a.length;b--;)if(a[b].object===c&&a[b].methodName===e){a.splice(b,1),b<d&&d--;break}},this.doNextTick=function(c,b){function a(){d.removeListener(a),c()}var d=this;return b?this.addListener(a,b):this.addListener(a),a},this.doLater=function(c,d,b){function a(){(new Date).getTime()-f>d&&(e.removeListener(a),c())}var e=this,f=(new Date).getTime();return b?this.addListener(a,b):this.addListener(a),a},this.addTimerListener=function(k,a,j,f){var p,n,o,g,e,c,q,m,i,l,d,h,b;return 1<arguments.length&&isNaN(arguments[1])&&(p=k,n=a,k=function(){p[n]()},a=j,j=f,f=arguments[4]),a=a||1e3,o=this,g=(new Date).getTime(),c=0,f?(q=1,m=f.repeats||0,i=f.precision||1,l=f.randomization||0,d=a*(1+l*(2*Math.random()-1)),h=i*d,b=function(){if(e=(new Date).getTime(),c+=e-g,c>h){for(;c>h;)k(),c-=d;++q>m&&m?o.removeListener(b):(d=a*(1+l*(2*Math.random()-1)),h=i*d)}g=e},Object.defineProperty(b,"delay",{get:function(){return a},set:function(b){a=b,d=a*(1+l*(2*Math.random()-1)),h=i*d}})):(b=function(){e=(new Date).getTime();for(c+=e-g;c>a;)k(),c-=a;g=e},Object.defineProperty(b,"delay",{get:function(){return a},set:function(b){a=b}})),j?this.addListener(b,j):this.addListener(b),b},this.ensureNextTickUpdate=function(){g||(g++,b.push(p),f||(f=!0,k()))},this.listenersTotal=function(){return b.length},this.getListeners=function(){return b}}function am(a,b){var c=a[b];Object.defineProperty(this,"value",{get:function(){return c},set:function(d){c=a[b]=d}})}function af(b,d,f,c){this.__object=b,this.__delta=d||{},this.__deltaInit={};for(var a in this.__delta)this.__deltaInit[a]=this.__delta[a];this.__ratio=f||{},this.__ratioInit={};for(a in this.__ratio)this.__ratioInit[a]=this.__ratio[a];this.__efs,this.__isPlayed=!1,this.__efs=c?c:b.__stage&&b.__stage.metronome?b.__stage.metronome:e.getInstance()}function ak(a,b,c){this.__object=a,this.__delta=b||{},this.__deltaInit={};for(var d in b)this.__deltaInit[d]=b[d];this.__efs=c?c:a.__stage&&a.__stage.metronome?a.__stage.metronome:e.getInstance(),this.__frameDuration=this.__efs.frameDuration,this.__isPlayed=!1}function Z(a,b,c){this.__object=a,this.__speed=b||{},this.__speedInit={};for(var d in b)this.__speedInit[d]=b[d];this.__efs=c?c:a.__stage&&a.__stage.metronome?a.__stage.metronome:e.getInstance(),this.__speed.__stage={metronome:this.__efs},this.__isPlayed=!1}function ai(c,a,b,d){this.__speed=isNaN(a)?0:a,this.__angle=isNaN(b)?0:b*Math.PI/180,this.__motion=new Z(c,{x:this.__speed*Math.cos(this.__angle),y:this.__speed*Math.sin(this.__angle)},d)}function J(b,c,a,d){this.__object=b,this.__propName=c,this.__baseValue=b[c],a?(this.wave="wave"in a?a.wave:m.sin,this.amplitude="amplitude"in a?a.amplitude:10,this.__frequency="frequency"in a?a.frequency:1,this.phase="phase"in a?a.phase:0):(this.wave=m.sin,this.amplitude=10,this.__frequency=1,this.phase=0),this.__efs=d?d:b.__stage&&b.__stage.metronome?b.__stage.metronome:e.getInstance(),this.__stage={metronome:this.__efs},this.__isPlayed=!1,this.__startTime=void 0,this.__stopTime}function H(){this.__stage=this.__context=null,this.__children=[],this.parent=null,this.__name=void 0,this.rotation=this.x=this.y=0,this.scaleX=this.scaleY=1,this.originX=this.originY=0,this.alpha=1,this.matrixLocal=void 0,this.matrixGlobal=b.ZERO,l.init(this),this.masks=[],this.holes=[],this.draw=this.drawNormal,this.getHitAsset=this.getHitAssetNormal}function h(k){function h(b){a.__gestureOccured=!0,a.gesturePoint=a.getMousePoint(b),a.gestures.group1.mouseDown=!0,delete a.gestures.group1.mouseUp,a.isDown=!0}function d(b){a.__gestureOccured=!0,a.gesturePoint=a.getMousePoint(b),a.gestures.group1.mouseUp=!0,delete a.gestures.group1.mouseDown,a.isDown=!1}function j(b){a.__gestureOccured=!0,b=a.getMousePoint(b),(b.x!=a.gesturePoint.x||b.y!=a.gesturePoint.y)&&(a.gesturePoint=b,a.gestures.group1.mouseMove=!0,a.gestures.group2.mouseOver=!0,a.gestures.group2.mouseOut=!0)}function f(b){a.__gestureOccured=!0,a.gesturePoint=a.getMousePoint(b),a.gestures.group1.mouseMove=!0,a.gestures.group2.mouseOver=!0}function g(b){a.__gestureOccured=!0,a.gesturePoint={x:void 0,y:void 0},a.gestures.group2.mouseOut=!0,a.gestures.group1.mouseUp=!0,delete a.gestures.group1.mouseDown}function c(b){a.__gestureOccured=!0,a.gestures.group1.mouseDown=!0,delete a.gestures.group1.mouseUp,a.isDown=!0,a.gesturePoint=a.getTouchPoint(b)}function b(b){a.__gestureOccured=!0,a.__touchEndOccured=!0,a.gestures.group1.mouseUp=!0,delete a.gestures.group1.mouseDown,a.isDown=!1,a.gesturePoint=a.getTouchPoint(b)}function i(b){a.__gestureOccured=!0,a.gesturePoint=a.getTouchPoint(b),a.gestures.group1.mouseMove=!0,a.gestures.group2.mouseOver=!0,a.gestures.group2.mouseOut=!0}this.__container=this.__height=this.__width=this.__context=this.__canvas=this.__canvasID=null,this.__cornerRadius=0,this.__cornerTL,this.__cornerTR,this.__cornerBL,this.__cornerBR,this.draw=this.drawNormal,this.metronome=new e(k,!0,!1),this.clearBeforeDraw=!0,this.listenPassiveGestures=this.__listenGestures=!1,this.gesturePoint={x:void 0,y:void 0},this.isDown=!1,this.hitAsset=void 0,this.hitContainers=[],this.downAsset=void 0,this.downContainers=[],this.outContainers=[],this.__downTimeForDbClick=this.__downTime=0,this.__clickWithoutMouseMotion=!1,this.__dbClickCandidates=[],this.__minDbClickDownTime=0,this.dbClickTime=this.fastClickTime=200,this.pixelRatio=1,this.__touchEndOccured=this.__gestureOccured=!1,this.gestures={group1:{},group2:{},group3:{}};var a=this;this.addDomGestureListeners=function(){var a=this.__canvas;a.addEventListener("mousedown",h),a.addEventListener("mouseup",d),a.addEventListener("mousemove",j),a.addEventListener("mouseenter",f),a.addEventListener("mouseleave",g),a.addEventListener("touchstart",c),a.addEventListener("touchend",b),a.addEventListener("touchmove",i),a.addEventListener("touchcancel",b)},this.removeDomGestureListeners=function(){var a=this.__canvas;a.removeEventListener("mousedown",h),a.removeEventListener("mouseup",d),a.removeEventListener("mousemove",j),a.removeEventListener("mouseenter",f),a.removeEventListener("mouseleave",g),a.removeEventListener("touchstart",c),a.removeEventListener("touchend",b),a.removeEventListener("touchmove",i),a.removeEventListener("touchcancel",b)}}function aj(b){var c=1,a=document.createElement("canvas");Y.set(a,{position:"relative",width:"100%",height:"100%",top:0,left:0,margin:0}),a.width=c*b.clientWidth,a.height=c*b.clientHeight,b.appendChild(a),this.__stage=void 0,Object.defineProperties(this,{canvas:{get:function(){return a}},webElement:{get:function(){return b}},pixelRatio:{get:function(){return c},set:function(a){c=a,this.__stage&&(this.__stage.pixelRatio=a,this.resize())}}}),window.addEventListener("resize",function(a){this.__stage&&this.resize()})}function W(a,c,d,e,f){this.parent=this.__stage=this.__context=null,this.__name=void 0,this.rotation=this.x=this.y=0,this.scaleX=this.scaleY=1,this.originX=this.originY=0,this.image=null,this.alpha=1,this.draw=this.drawNothing,this.height=this.width=0,this.sx=c,this.sy=d,this.sw=e,this.sh=f,this.matrixLocal=void 0,this.matrixGlobal=b.ZERO,this.isLoading=this.useDeepHitTest=!1,this.calcOwnMatrices=this.calc,l.init(this),a&&(this.src=a)}function C(){this.data=null;var a=this;this.load=function(d){var e=c.ref,b=new XMLHttpRequest;b.open("GET",d,!0),b.onreadystatechange=function(){b.readyState===4&&(b.status===200||b.status==0)&&(a.data=b.responseText,a.hasOwnProperty("onComplete")&&a.onComplete(),e.end())},b.send(null)}}function ap(e){this.frames=[],this.data=null;var a=this,b,d=function(c,d,e,f){c=String(c);for(d-=c.length;d--;)c="0"+c;b=e+c+f,a.frames.push(b)};this.load=function(d){var e=c.ref,b=new C;b.onComplete=function(){var b=a.data=this.data;a.parse(b),a.hasOwnProperty("onLoad")&&a.onLoad(),e.end()},b.load(d)},this.parse=function(k){var m,f,g,h,c,i,j,l;k=k.trim().split(" ").join("").split(",");for(m=k.length,f,g,h,c,i,j=0;j<m;j++)if(f=k[j],c=f.length,g=f.indexOf("*"),g+1){if(h=f.lastIndexOf("*")-g+1,i=f.substr(0,g),f=f.substring(g+h,c),c=f.lastIndexOf("["),g=f.lastIndexOf("]"),c+1&&f.length-g==1)if(g=f.substring(c+1,g),f=f.substr(0,c),c=g.split("-"),1<c.length)if(g=c[0],c=c[1],g<c)for(;g<=c;g++)d(g,h,i,f);else for(;g>=c;g--)d(g,h,i,f);else d(g,h,i,f);else if(e)for(g=0,c=!0;c;){c=g++,c=String(c);for(l=h-c.length;l--;)c="0"+c;c=i+c+f,(l=e.frames.hasOwnProperty(c))&&(a.frames.push(c),b=c),c=l}}else if(f.indexOf("[")==0&&f.indexOf("]")==c-1){if(h=f.substr(1,c-2),!isNaN(h)&&b)for(;h--;)i=b,a.frames.push(i),b=i}else if(f.indexOf("<")==0&&f.indexOf(">")==c-1){if(h=f.substr(1,c-2),!isNaN(h))for(;h--;)a.frames.length++,b=void 0}else h=f,a.frames.push(h),b=h}}function T(a,c){this.parent=this.__stage=this.__context=null,this.__name=void 0,this.rotation=this.x=this.y=0,this.scaleX=this.scaleY=1,this.originX=this.originY=0,this.alpha=1,this.draw=this.drawImage,this.matrixLocal=void 0,this.matrixGlobal=b.ZERO,this.__imageName=this.__atlasData=null,a&&(this.atlasData=a),c&&(this.imageName=c),this.useDeepHitTest=!1,this.calcOwnMatrices=this.calc,l.init(this)}function $(c,a){this.parent=this.__stage=this.__context=null,this.__name=void 0,this.rotation=this.x=this.y=0,this.scaleX=this.scaleY=1,this.originX=this.originY=0,this.alpha=1,this.__atlasData=c,this.__totalFrames=(this.__atlasFilmData=a)&&a.frames?a.frames.length:void 0,this.__destinationFrameIndex=this.__startIndex=this.__changeIndexMethodName=void 0,this.__removeInTheEnd=!1,this.__stretchRatio=this.__repeatsNumber=1,this.frameIndex=this.frameTrimLeft=this.frameTrimTop=this.frameHeight=this.frameWidth=this.__stretchCount=0,this.__wasPlayingBeforeRemoving=this.isPlayed=!1,this.loseQueue(),this.matrixLocal=void 0,this.matrixGlobal=b.ZERO,this.draw=this.drawFrame,this.useDeepHitTest=!1,this.__fps=0,this.pivotName=this.__anchorsSource=this.__anchors=this.__fpsTimer=void 0,this.calc=this.calcOwnMatrices=this.calcNormal,l.init(this)}function y(a){if(this.props={},a)for(var b in a)this.props[b]=a[b]}function s(){this.parent=this.__stage=this.__context=null,this.__name=void 0,this.rotation=this.x=this.y=0,this.scaleX=this.scaleY=1,this.originX=this.originY=0,this.alpha=1,this.__text="",this.__style=y.getDefaultTextStyle(),this.__boldItalic=(this.__style.props.bold?"bold ":"")+(this.__style.props.italic?"italic ":""),this.color=this.__style.props.color,this.strokeColor=this.__style.props.strokeColor,this.shadowColor=this.__style.props.shadowColor,this.draw=this.drawNormal,this.__alignOffsetX=this.__height=this.__width=0,this.matrixLocal=void 0,this.matrixGlobal=b.ZERO,this.strokeOverFill=!0,this.useDeepHitTest=!1,this.useFill=!0,this.lines=[],this.__lineSpacing=30,this.__textWidth=void 0,this.__multiline=!1,this.fill=this.fillLine,this.stroke=this.strokeLine,this.measureWidth=this.measureLineWidth,this.measureHeight=this.measureLineHeight,this.calculateText=Q,this.calcOwnMatrices=this.calc,l.init(this)}function t(b,a,c){var d=t.parseCSSValue(b.style[a]||(a=="opacity"?"1":"0"));this.__element=b,this.__prop=a,this.__suffix=c||d.suffix,this.__value=d.value}function c(k){var i,h,a,f,b,e,g,j,d;function l(){d?d=!1:i.nextTask()}i=this,h=k=="parallel"?"parallel":"sequence",a=[],f=[],this.onComplete=function(){},this.onStart=function(){},d=!1,this.delay=0,this.getIndex=function(){return b},this.getTaskDataList=function(){return f},this.nextTask=function(){b+1<a.length?a[++b]():e||(d=!1,this.onComplete(),g.end())},this.cancelScheduledTask=function(){d=!0},this.end=function(){h=="sequence"?setTimeout(l,1e3*this.delay):(b++,b>=a.length&&!e&&(d=!1,this.onComplete(),g.end()))},this.onStartBranch=function(){e++,h=="sequence"&&i.nextTask()},this.endBranch=function(){e--,b+1>=a.length&&!e&&(d=!1,this.onComplete(),g.end())},this.run=function(f){if(g=c.ref,a.length||this.addCall(function(){}),j=f,this.onStart(),b=e=0,h=="sequence")a[0]();else if(this.delay){if(a[0](),1<a.length){var d=1;f=function(){var a=arguments.callee;clearInterval(a._delayInterval),d<a.tasks.length&&(a.tasks[d++](),a._delayInterval=setInterval(a,1e3*i.delay))},f.tasks=a,f._delayInterval=setInterval(f,1e3*this.delay)}}else for(d=0;d<a.length;d++)a[d]()},this.clear=function(){a.length=f.length=0,d=!1},this.getArgs=function(){return j},this.clone=function(){for(var d=new c,e=a.length,b=0;b<e;b++)d.addTaskData(f[b]);return d},this.addTask=function(){var b,d;f.push(arguments),b=[];for(d=1;d<arguments.length;d++)b[d-1]=arguments[d];return arguments[0]instanceof Function?b=c.createTask2(this,arguments[0],b):(b.shift(),b=c.createTask3(this,arguments[0],arguments[1],b)),a.push(b),b._result},this.addBranchTask=function(){var b,d;f.push(arguments),b=[];for(d=1;d<arguments.length;d++)b[d-1]=arguments[d];return arguments[0]instanceof Function?b=c.createTask2(this,arguments[0],b,!0):(b.shift(),b=c.createTask3(this,arguments[0],arguments[1],b,!0)),a.push(b),b._result},this.addTaskData=function(b){f.push(b);var d=b.concat();d.shift(),b[0]instanceof Function?b=c.createTask2(this,b[0],d):(d.shift(),b=c.createTask3(this,b[0],b[1],d)),a.push(b)},this.addQueue=function(a,b){return this.addTask(a,"run",b)},this.addBranchQueue=function(a,b){return this.addBranchTask(a,"run",b)},this.addQueueClone=function(a,b){return this.addQueue(a.clone(),b)},this.attachQueue=function(a,b){return this.addCall(a,"run",b)},this.embedQueue=function(a){a=a.getTaskDataList();for(var c=a.length,b=0;b<c;b++)this.addTaskData(a[b])},this.addCall=function(){for(var b=[],a=1,d,e;a<arguments.length;a++)b[a-1]=arguments[a];return d=arguments[0],d instanceof Function?a=function(){var a=c.ref,e=d.apply(null,b);return a.end(),e}:(b.shift(),e=arguments[1],a=function(){var a=c.ref,f=d[e].apply(d,b);return a.end(),f}),this.addTask(a)},this.addPause=function(a,b){return this.addTask(b?aa.frames:aa.seconds,a)},this.addWait=function(){var b=arguments,a=b[0];return typeof a=="string"?this.addTask(function(){var f=c.ref,d=1<b.length?b[1]:document,e=function(b){d.removeEventListener(a,e),f.end()};d.addEventListener(a,e)}):this.addTask(ad.run,a)},this.addTween=function(a,b,c,d,e){this.addTask(D.run,a,b,c,1e3*d,e)},this.addCallTween=function(a,b,c,d,e){this.addCall(D.run,a,b,c,1e3*d,e)},this.addBranchTween=function(a,b,c,d,e){this.addBranchTask(D.run,a,b,c,1e3*d,e)},this.addLoad=function(c){if("load"in c){for(var b=[arguments[0],"load"],d=arguments.length,a=1;a<d;a++)b.push(arguments[a]);return this.addTask.apply(this,b)}return this.addCall(Q)}}function p(b,a){if(this.x=this.y=this.rotation=this.originX=this.originY=0,this.scaleX=this.scaleY=1,b&&(this.build=b),a)for(var c in a)this[c]=a[c]}function G(a){this.parent=this.__stage=this.__context=null,this.__name=void 0,this.x=this.y=this.rotation=this.originX=this.originY=0,this.scaleX=this.scaleY=this.alpha=1,this.shape=a||p.EMPTY,this.strokeOverFill=!0,this.paint=this.fillShape,this.__useFill=!0,this.strokeColor=this.color="rgb(0,0,0)",this.__strokeWidth=0,this.strokeCap="butt",this.strokeJoin="miter",this.strokeMiterLimit=10,this.matrixLocal=void 0,this.matrixGlobal=b.ZERO,this.shapeMatrixLocal=void 0,this.shapeMatrixGlobal=b.ZERO,this.useDeepHitTest=!1,this.calcOwnMatrices=this.calc,l.init(this)}function F(){this.super(new z.RectangleShape(162,100))}function P(){this.super(new z.CircleShape(25))}function S(a){this.parent=this.__stage=this.__context=null,this.__name=void 0,this.x=this.y=this.rotation=this.originX=this.originY=0,this.scaleX=this.scaleY=1,this.shape=a||p.EMPTY,this.draw=this.drawNothing,this.__visible=!1,this.color="rgb(0,100,200)",this.alpha=.5,this.matrixLocal=void 0,this.matrixGlobal=b.ZERO,this.shapeMatrixLocal=void 0,this.shapeMatrixGlobal=b.ZERO,this.calcOwnMatrices=this.calc,l.init(this)}w={},Q=function(){},I="x y rotation scaleX scaleY originX originY".split(" "),a=I.concat(["alpha","__name"]),ab={aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},aqua:{r:0,g:255,b:255},aquamarine:{r:127,g:255,b:212},azure:{r:240,g:255,b:255},beige:{r:245,g:245,b:220},bisque:{r:255,g:228,b:196},black:{r:0,g:0,b:0},blanchedalmond:{r:255,g:235,b:205},blue:{r:0,g:0,b:255},blueviolet:{r:138,g:43,b:226},brown:{r:165,g:42,b:42},burlywood:{r:222,g:184,b:135},cadetblue:{r:95,g:158,b:160},chartreuse:{r:127,g:255,b:0},chocolate:{r:210,g:105,b:30},coral:{r:255,g:127,b:80},cornflowerblue:{r:100,g:149,b:237},cornsilk:{r:255,g:248,b:220},crimson:{r:220,g:20,b:60},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgoldenrod:{r:184,g:134,b:11},darkgray:{r:169,g:169,b:169},darkgreen:{r:0,g:100,b:0},darkkhaki:{r:189,g:183,b:107},darkmagenta:{r:139,g:0,b:139},darkolivegreen:{r:85,g:107,b:47},darkorange:{r:255,g:140,b:0},darkorchid:{r:153,g:50,b:204},darkred:{r:139,g:0,b:0},darksalmon:{r:233,g:150,b:122},darkseagreen:{r:143,g:188,b:143},darkslateblue:{r:72,g:61,b:139},darkslategray:{r:47,g:79,b:79},darkturquoise:{r:0,g:206,b:209},darkviolet:{r:148,g:0,b:211},deeppink:{r:255,g:20,b:147},deepskyblue:{r:0,g:191,b:255},dimgray:{r:105,g:105,b:105},dodgerblue:{r:30,g:144,b:255},firebrick:{r:178,g:34,b:34},floralwhite:{r:255,g:250,b:240},forestgreen:{r:34,g:139,b:34},fuchsia:{r:255,g:0,b:255},gainsboro:{r:220,g:220,b:220},ghostwhite:{r:248,g:248,b:255},gold:{r:255,g:215,b:0},goldenrod:{r:218,g:165,b:32},gray:{r:128,g:128,b:128},green:{r:0,g:128,b:0},greenyellow:{r:173,g:255,b:47},honeydew:{r:240,g:255,b:240},hotpink:{r:255,g:105,b:180},indianred:{r:205,g:92,b:92},indigo:{r:75,g:0,b:130},ivory:{r:255,g:255,b:240},khaki:{r:240,g:230,b:140},lavender:{r:230,g:230,b:250},lavenderblush:{r:255,g:240,b:245},lawngreen:{r:124,g:252,b:0},lemonchiffon:{r:255,g:250,b:205},lightblue:{r:173,g:216,b:230},lightcoral:{r:240,g:128,b:128},lightcyan:{r:224,g:255,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},lightgrey:{r:211,g:211,b:211},lightgreen:{r:144,g:238,b:144},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightseagreen:{r:32,g:178,b:170},lightskyblue:{r:135,g:206,b:250},lightslategray:{r:119,g:136,b:153},lightsteelblue:{r:176,g:196,b:222},lightyellow:{r:255,g:255,b:224},lime:{r:0,g:255,b:0},limegreen:{r:50,g:205,b:50},linen:{r:250,g:240,b:230},magenta:{r:255,g:0,b:255},maroon:{r:128,g:0,b:0},mediumaquamarine:{r:102,g:205,b:170},mediumblue:{r:0,g:0,b:205},mediumorchid:{r:186,g:85,b:211},mediumpurple:{r:147,g:112,b:216},mediumseagreen:{r:60,g:179,b:113},mediumslateblue:{r:123,g:104,b:238},mediumspringgreen:{r:0,g:250,b:154},mediumturquoise:{r:72,g:209,b:204},mediumvioletred:{r:199,g:21,b:133},midnightblue:{r:25,g:25,b:112},mintcream:{r:245,g:255,b:250},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},navy:{r:0,g:0,b:128},oldlace:{r:253,g:245,b:230},olive:{r:128,g:128,b:0},olivedrab:{r:107,g:142,b:35},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},orchid:{r:218,g:112,b:214},palegoldenrod:{r:238,g:232,b:170},palegreen:{r:152,g:251,b:152},paleturquoise:{r:175,g:238,b:238},palevioletred:{r:216,g:112,b:147},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},peru:{r:205,g:133,b:63},pink:{r:255,g:192,b:203},plum:{r:221,g:160,b:221},powderblue:{r:176,g:224,b:230},purple:{r:128,g:0,b:128},rebeccapurple:{r:102,g:51,b:153},red:{r:255,g:0,b:0},rosybrown:{r:188,g:143,b:143},royalblue:{r:65,g:105,b:225},saddlebrown:{r:139,g:69,b:19},salmon:{r:250,g:128,b:114},sandybrown:{r:244,g:164,b:96},seagreen:{r:46,g:139,b:87},seashell:{r:255,g:245,b:238},sienna:{r:160,g:82,b:45},silver:{r:192,g:192,b:192},skyblue:{r:135,g:206,b:235},slateblue:{r:106,g:90,b:205},slategray:{r:112,g:128,b:144},snow:{r:255,g:250,b:250},springgreen:{r:0,g:255,b:127},steelblue:{r:70,g:130,b:180},tan:{r:210,g:180,b:140},teal:{r:0,g:128,b:128},thistle:{r:216,g:191,b:216},tomato:{r:255,g:99,b:71},turquoise:{r:64,g:224,b:208},violet:{r:238,g:130,b:238},wheat:{r:245,g:222,b:179},white:{r:255,g:255,b:255},whitesmoke:{r:245,g:245,b:245},yellow:{r:255,g:255,b:0},yellowgreen:{r:154,g:205,b:50}},M.prototype={className:"CommonMap",superclassName:"Object",constructor:M},M.EMPTY_GC_CONDITION=function(a,b){return!1},o.prototype={className:"SoftMap",superclassName:"Object",constructor:o},function(){var a=0;o.getID=function(){return"SoftMap_"+ ++a}}(),L.prototype={className:"SoftSet",superclassName:"Object",constructor:L},function(){var a=0;L.getID=function(){return"SoftSet_"+ ++a}}(),v.prototype={className:"HardMap",superclassName:"Object",constructor:v,get forEachProxy(){var a=this;return{forEach:function(b){a.forEach(b)}}}},function(){var a=0;v.getID=function(){return"HardMap_"+ ++a}}(),K.prototype={className:"HardSet",superclassName:"Object",constructor:K,get forEachProxy(){var a=this;return{forEach:function(b){a.forEach(b)}}}},function(){var a=0;K.getID=function(){return"HardSet_"+ ++a}}(),B.prototype={className:"IdChain",superclassName:"Object",constructor:B},B.prototype={className:"HashIterator",superclassName:"Object",constructor:ar},A.prototype={className:"__KeyHiddenZone",superclassName:"Object",constructor:A},g={},function(a){function c(a){return a&&a instanceof Object}function b(a){return a.valueOf(A)}function d(a){return a.hasOwnProperty("valueOf")&&b(a)instanceof A}a.createHiddenZone=function(a){var b=new A,c=a.valueOf;Object.defineProperty(a,"valueOf",{value:function(a){return a&&a===A?b:c.apply(this,arguments)},configurable:!1,wrirable:!1})},a.keyIsObject=c,a.keyIsFixed=function(a){var b=Object.getOwnPropertyDescriptor(a,"valueOf");return b&&!b.configurable||Object.isFrozen(a)},a.hiddenZoneOf=b,a.keyHasHiddenZone=d,a.keyKnowsID=function(a,c){return b(a).hasOwnProperty(c)},a.traceCollectionsOf=function(a){if(c(a)&&d(a))for(str in j(""),j("Collections of "+a+":"),a=b(a),a)str!="className"&&str!="superclassName"&&str!="constructor"&&j(str)}}(g),e.prototype={className:"EnterFrameSignal",superclassName:"Object",constructor:e,get frameRate(){return 1e3/this.frameDuration}},e.getInstance=function(){return e.__defaultInstance?e.__defaultInstance:new e},l={},an=function(a,b){a.object[a.methodName](b)},aq=function(a,b){a.object(b)},l.addEventListener=function(b,d,e){this.listeners[b]||(this.listeners[b]=[]);for(var f=3>arguments.length?aq:an,a=this.listeners[b],c=a.length;c--;)if(a[c].object===d&&a[c].methodName===e)return;a.push({object:d,methodName:e,invokeListenerType:f,debugStr:"debugStr"})},l.removeEventListener=function(c,d,e){if(this.listeners[c])for(var a=this.listeners[c],b=a.length;b--;)if(a[b].object===d&&a[b].methodName===e){a.splice(b,1),a.length||delete this.listeners[c];break}},l.dispatchEvent=function(c,a){if(this.listeners[c])for(var d=this.listeners[c],e=d.length,f={type:c,currentTarget:this,target:a&&a.target?a.target:this,data:a},b=0;b<e;b++)d[b].invokeListenerType(d[b],f)},l.init=function(a){a.listeners={},a.addEventListener=this.addEventListener,a.removeEventListener=this.removeEventListener,a.dispatchEvent=this.dispatchEvent},f={lin:function(){return function(a,b,c){return a+(b-a)*c}},circ:function(){return function(b,c,a){return.5>a?b+(c-b)/2*(1-Math.sqrt(1-4*a*a)):c-(c-b)/2*(1-Math.sqrt(1-4*(1-a)*(1-a)))}},circIn:function(){return function(a,c,b){return a+(c-a)*(1-Math.sqrt(1-b*b))}},circOut:function(){return function(c,a,b){return a-(a-c)*(1-Math.sqrt(1-(1-b)*(1-b)))}},elps:function(a,b){return a=a||.618,b=b||9,function(c,d,e){return.5>e?c+(d-c)/2*a*(1-Math.sqrt(1-Math.pow(2*e,b))):d-(d-c)/2*a*(1-Math.sqrt(1-Math.pow(2-2*e,b)))}},elpsIn:function(a,b){return a=a||.618,b=b||9,function(c,d,e){return c+(d-c)*a*(1-Math.sqrt(1-Math.pow(e,b)))}},elpsOut:function(a,b){return a=a||.618,b=b||9,function(d,c,e){return c-(c-d)*a*(1-Math.sqrt(1-Math.pow(1-e,b)))}},pow:function(a){return a=a||3,function(b,c,d){return.5>d?b+(c-b)/2*Math.pow(2*d,a):c-(c-b)/2*Math.pow(2*(1-d),a)}},powIn:function(a){return a=a||3,function(b,c,d){return b+(c-b)*Math.pow(d,a)}},powOut:function(a){return a=a||3,function(c,b,d){return b-(b-c)*Math.pow(1-d,a)}},sin:function(){return function(a,b,c){return a-(b-a)/2*(Math.cos(Math.PI*c)-1)}},sinIn:function(){return function(b,a,c){return a-(a-b)*Math.cos(Math.PI/2*c)}},sinOut:function(){return function(a,b,c){return a+(b-a)*Math.sin(Math.PI/2*c)}},exp:function(){return function(a,c,b){return b==0?a:b==1?c:1>(b*=2)?a+(c-a)/2*Math.pow(2,10*(b-1)):a+(c-a)/2*(2-Math.pow(2,10*(1-b)))}},expIn:function(){return function(a,c,b){return b==0?a:a+(c-a)*Math.pow(2,10*(b-1))}},expOut:function(){return function(a,b,c){return c==1?b:a+(b-a)*(1-Math.pow(2,-10*c))}},osc:function(a,b){return a=a||4,b=b||11,function(d,e,c){return.5>c?d+(e-d)/2*Math.abs(Math.pow((c=1-2*c)-1,a))*Math.sin(Math.PI/2*(b*c+1)):e-(e-d)/2*Math.abs(Math.pow((c=2*c-1)-1,a))*Math.sin(Math.PI/2*(b*c+1))}},oscOut:function(a,b){return a=a||4,b=b||11,function(e,c,d){return c-(c-e)*Math.abs(Math.pow(d-1,a))*Math.sin(Math.PI/2*(b*d+1))}},oscIn:function(a,b){return a=a||4,b=b||11,function(c,e,d){return c+(e-c)*Math.abs(Math.pow(d,a))*Math.sin(Math.PI/2*(b*(1-d)+1))}},osc2:function(a,b){return a=a||9,b=b||11,function(d,e,c){return.5>c?d+(e-d)/2*Math.exp(-a*(c=1-2*c))*Math.sin(Math.PI/2*(b*c+1)):e-(e-d)/2*Math.exp(-a*(c=2*c-1))*Math.sin(Math.PI/2*(b*c+1))}},osc2Out:function(a,b){return a=a||9,b=b||11,function(e,c,d){return c-(c-e)*Math.exp(-a*d)*Math.sin(Math.PI/2*(b*d+1))}},osc2In:function(a,b){return a=a||9,b=b||11,function(c,e,d){return c+(e-c)*Math.exp(-a*(1-d))*Math.sin(Math.PI/2*(b*(1-d)+1))}},_bncGetParams:function(g,h){for(var b=Math.sqrt(h),d=[{tMax:1,tOffset:0,fOffset:0}],f=0,e=0,c=0,a;c++<g;)f=e,e=e+2*Math.pow(b,c),a={},a.tMax=1+e,a.tOffset=1+f+Math.pow(b,c),a.fOffset=1-Math.pow(h,c),d.push(a);for(b=1/d[g-1].tMax;c--;)a=d[c],a.tMax*=b,a.tOffset*=b;return{f:d,s:1/(b*b)}},bncOut:function(a,c){a=a||5;var b=f._bncGetParams(a,c||.25),d=b.f,e=b.s;return function(g,h,c){for(var f=0,b;f<a;f++)if(b=d[f],c<b.tMax)return g+(h-g)*(e*(c-b.tOffset)*(c-b.tOffset)+b.fOffset)}},bncIn:function(a,c){a=a||5;var b=f._bncGetParams(a,c||.25),d=b.f,e=b.s;return function(h,g,b){var f,c;b=1-b;for(f=0;f<a;f++)if(c=d[f],b<c.tMax)return g-(g-h)*(e*(b-c.tOffset)*(b-c.tOffset)+c.fOffset)}},bnc:function(a,e){a=a||5;var b=f._bncGetParams(a,e||.25),c=b.f,d=b.s;return function(g,h,b){var f,e;if(.5>b){b=1-2*b;for(f=0;f<a;f++)if(e=c[f],b<e.tMax)return h-(h-g)/2*(d*(b-e.tOffset)*(b-e.tOffset)+e.fOffset+1)}b=2*b-1;for(f=0;f<a;f++)if(e=c[f],b<e.tMax)return g+(h-g)/2*(d*(b-e.tOffset)*(b-e.tOffset)+e.fOffset+1)}},backIn:function(a){a=a||2.7;var b=-2*a-1,c=a+2;return function(f,e,d){return e-(e-f)*(a*(d=1-d)*d*d+b*d*d+c*d)}},backOut:function(a){a=a||2.7;var b=-2*a-1,c=a+2;return function(e,f,d){return e+(f-e)*(a*d*d*d+b*d*d+c*d)}},back:function(a){a=a||2.7;var b=-2*a-1,c=a+2;return function(e,f,d){return.5>d?f-(f-e)/2*(a*(d=1-2*d)*d*d+b*d*d+c*d+1):e+(f-e)/2*(a*(d=2*d-1)*d*d+b*d*d+c*d+1)}},powLin:function(b,a){b=b||3,a=a==void 0||0>a||1<a?.309:a/2;var c=b*(1/a-2)+2;return a?function(d,f,e){return e<=a?d+(f-d)/c*Math.pow(e/a,b):e>1-a?f-(f-d)/c*Math.pow((1-e)/a,b):d+(f-d)*(1/c+(1-2/c)*(e-a)/(1-2*a))}:f.lin()},powLinIn:function(b,a){b=b||3,a=a==void 0||0>a||1<a?.618:a;var c=b*(1/a-1)+1;return a?function(d,f,e){return e<a?d+(f-d)/c*Math.pow(e/a,b):d+(f-d)*(1/c+(1-1/c)*(e-a)/(1-a))}:f.lin()},powLinOut:function(b,a){b=b||3,a=a==void 0||0>a||1<a?.618:a;var c=b*(1/a-1)+1;return a?function(f,d,e){return e>1-a?d-(d-f)/c*Math.pow((1-e)/a,b):d-(d-f)*(1+e*(1-c)/(c*(1-a)))}:f.lin()},powCombo:function(a,c,b){a=a||3,c=c||5,b=b||.618;var d=a/(c*(1/b-1)+a);return function(e,f,g){return g<d?e+(f-e)*b*Math.pow(g/d,a):f-(f-e)*(1-b)*Math.pow((1-g)/(1-d),c)}},powCombo2:function(b,c,a){b=b||3,c=c||5,a=a||.618;var d=1/(b/c*(1/a-1)+1);return function(e,f,g){return g<a?e+(f-e)*d*Math.pow(g/a,b):f-(f-e)*(1-d)*Math.pow((1-g)/(1-a),c)}},morph:function(a,b,c){return a=a||f.circ(),b=b||f.pow(5),c?function(e,f,d){return c(a(e,f,d),b(e,f,d),d)}:function(d,e,c){return(1-c)*a(d,e,c)+c*b(d,e,c)}},stretch:function(b,a){b=b||f.powOut(3),a=a||.5;var c=1/a;return function(f,d,e){return e<a?b(f,d,c*e):d}},custom:function(a){return function(b,c,d){return.5>d?b+(c-b)/2*a(2*d):c-(c-b)/2*a(2-2*d)}},customIn:function(a){return function(b,c,d){return b+(c-b)*a(d)}},customOut:function(a){return function(c,b,d){return b-(b-c)*a(1-d)}}},f.def=f.pow,aa={frames:function(f,g){function b(){h++>f&&(d.removeListener(b),a.hasOwnProperty("onComplete")&&setTimeout(function(){a.onComplete()},0),q.end())}var a={},d=g||e.getInstance(),h=0;return q=c.ref,d.addListener(b,!0),a},seconds:function(b){var a={},d=c.ref;return setTimeout(function(){a.onComplete&&a.onComplete(),d.end()},1e3*b),a}},ad={run:function(f,g){function b(){f()&&(d.removeListener(b),a.hasOwnProperty("onComplete")&&setTimeout(function(){a.onComplete()},0),h.end())}var a={},d=g||e.getInstance(),h=c.ref;return Object.defineProperty(a,"abort",{value:function(){d.removeListener(b)},writable:!1}),d.addListener(b,!0),a},abort:function(a){a.abort()}},R={run:function(a,b,p,s,r,o){var q,m,n,j,l,h,i,g,k,d,t;return a instanceof HTMLElement&&!a.hasOwnProperty(b)&&b in a.style?(a.style[b]=window.getComputedStyle(a)[b],(!a.hasOwnProperty("cssPropModifier")||!a.cssPropModifier instanceof am)&&(a.cssPropModifier=new am(a.style,b)),R.run(a.cssPropModifier,"value",p,s,r,o)):(q=c.ref,m={object:a},n=r||500,j=s||f.lin(),h=N(a[b]),i=N(p),g="change"+b,l=o?o:a.__stage&&a.__stage.metronome?a.__stage.metronome:e.getInstance(),k=0,t=(new Date).getTime(),a[g]=function(a){d=k/n,this[b]="rgba("+Math.round(j(h.r,i.r,d))+","+Math.round(j(h.g,i.g,d))+","+Math.round(j(h.b,i.b,d))+","+j(h.a,i.a,d)+")",k=a-t,k>n&&(this[b]=p,l.removeListener(this,g),delete this[g],m.hasOwnProperty("onComplete")&&m.onComplete(),q.end())},l.addListener(a,g),m)}},ae={run:function(a,b,l,q,o,j){var m=c.ref,i={object:a},k=o||500,n=q||f.lin(),h,p=a[b],d="change"+b,g,r;return h=j?j:a.__stage&&a.__stage.metronome?a.__stage.metronome:e.getInstance(),g=0,r=(new Date).getTime(),a[d]=function(a){this[b]=n(p,l,g/k),g=a-r,g>k&&(this[b]=l,h.removeListener(this,d),delete this[d],i.hasOwnProperty("onComplete")&&i.onComplete(),m.end())},h.addListener(a,d),i}},D={run:function(b,h,d,i,n){var p=c.ref,k={object:b},l=i||500,o=d||f.lin(),j=n?n:b.__stage&&b.__stage.metronome?b.__stage.metronome:e.getInstance(),a,m,g,q;d=0,m={},g={};for(a in h)typeof h[a]=="string"?(i=h[a].replace(/ /g,""),i.indexOf("+")||(g[a]=b[a]+Number(i.substring(1,i.length)))):g[a]=h[a],m[a]=b[a],d++;h=d,q=(new Date).getTime();for(a in g)d="change"+a,b[d]=function(d){var a=arguments.callee,b=a.p,c=a.updateFunctionName;this[b]=o(m[b],g[b],a.t/l),a.t=d-q,a.t>l&&(this[b]=g[b],j.removeListener(this,c),delete this[c],!a.propsCounter)&&(k.hasOwnProperty("onComplete")&&k.onComplete(),p.end())},b[d].p=a,b[d].t=0,b[d].propsCounter=--h,b[d].updateFunctionName=d,j.addListener(b,d);return k.stop=function(){for(a in g)j.removeListener(b,"change"+a)},k}},_={osc:function(a,b,c){return a=a||3,b=b||1,c=c||2,function(d){return Math.pow(d-1,c)*Math.sin((2*a+1.5)*Math.PI*Math.pow(d,b))}}},af.prototype={className:"Shift",superclassName:"Object",constructor:af,get delta(){return this.__delta},get ratio(){return this.__ratio},get isPlayed(){return this.__isPlayed},update:function(){for(var a in this.__deltaInit)this.__object[a]+=this.__delta[a];for(a in this.__ratioInit)this.__object[a]*=this.__ratio[a]},play:function(){this.__isPlayed=!0,this.__efs.addListener(this,"update")},stop:function(){this.__efs.removeListener(this,"update"),this.__isPlayed=!1}},ak.prototype={className:"ShiftTimebased",superclassName:"Object",constructor:ak,get delta(){return this.__delta},get isPlayed(){return this.__isPlayed},update:function(b){var c=(b-this.__currentTimer)/this.__frameDuration,a;for(a in this.__deltaInit)this.__object[a]+=this.__delta[a]*c;this.__currentTimer=b},play:function(){this.__isPlayed||(this.__isPlayed=!0,this.__currentTimer=(new Date).getTime(),this.__efs.addListener(this,"update"))},stop:function(){this.__efs.removeListener(this,"update"),this.__isPlayed=!1}},Z.prototype={className:"Motion",superclassName:"Object",constructor:Z,get speed(){return this.__speed},get isPlayed(){return this.__isPlayed},update:function(b){var c=(b-this.__currentTimer)/1e3,a;for(a in this.__speedInit)this.__object[a]+=c*this.__speed[a];this.__currentTimer=b},play:function(){this.__isPlayed||(this.__isPlayed=!0,this.__currentTimer=(new Date).getTime(),this.__efs.addListener(this,"update"))},stop:function(){this.__efs.removeListener(this,"update"),this.__isPlayed=!1}},ai.prototype={className:"Motion2D",superclassName:"Object",constructor:ai,get speed(){return this.__speed},set speed(a){this.__speed=a,this.updateSpeedVector(this.__motion.speed,a,this.__angle)},get angle(){return 180*this.__angle/Math.PI},set angle(a){this.__angle=a*Math.PI/180,this.updateSpeedVector(this.__motion.speed,this.__speed,this.__angle)},get isPlayed(){return this.__motion.isPlayed},updateSpeedVector:function(a,b,c){a.x=b*Math.cos(c),a.y=b*Math.sin(c)},play:function(){this.__motion.play()},stop:function(){this.__motion.stop()}},m={},m.sin=Math.sin,m.sinPro=function(a){if(a===0||0>a)return m.square;!a||isNaN(a)?a=.3:1<a&&(a=1/a);var b=Math.sqrt(a);return function(c){c=Math.sin(c);var d=Math.abs(c);return(0>c?-1:1)*(Math.pow(d,b)*Math.pow(d,a)+(1-Math.pow(d,b))*d)}},m.triangle=function(a){return 2/Math.PI*Math.asin(Math.sin(a))},m.square=function(a){return 0>Math.sin(a)?-1:1},m.noise=function(a){return 2*Math.random()-1},m.pulsePro=function(a){if(a===0)return m.sin;a=!a||isNaN(a)||0>a?4:1+Math.ceil(a);var b=Math.PI/(2*a),c=2*Math.PI,d=2/(2-1/a);return function(e){return e%=c,e<b||e>c-b?Math.sin(a*e):Math.cos(d*e/2-b/d)}},m.pulse=m.pulsePro(),J.prototype={className:"Swing",superclassName:"Object",constructor:J,get isPlayed(){return this.__isPlayed},get frequency(){return this.__frequency},set frequency(a){this.__startTime!=void 0&&(this.__startTime=((a-this.__frequency)*(this.__isPlayed?(new Date).getTime():this.__stopTime)+this.__frequency*this.__startTime)/a),this.__frequency=a},get baseValue(){return this.__baseValue},set baseValue(a){this.__isPlayed?this.__baseValue=a:this.__object[this.__propName]=this.__baseValue=a},update:function(a){this.__object[this.__propName]=this.__baseValue+this.amplitude*this.wave(this.phase+this.__frequency*J.K*(a-this.__startTime))},play:function(){this.__isPlayed||(this.__isPlayed=!0,this.__startTime==void 0?(this.__startTime=(new Date).getTime(),this.__object[this.__propName]=this.__baseValue+this.amplitude*this.wave(this.phase)):this.__stopTime&&(this.__startTime+=(new Date).getTime()-this.__stopTime,this.__stopTime=0),this.__efs.addListener(this,"update"))},stop:function(){this.__stopTime=(new Date).getTime(),this.__efs.removeListener(this,"update"),this.__isPlayed=!1},reset:function(){this.__efs.removeListener(this,"update"),this.__isPlayed=!1,this.__startTime=this.__stopTime=void 0}},J.K=Math.PI/500,H.prototype={className:"CanvasContainer",superclassName:"CanvasLayer",constructor:H,get children(){return this.__children},get isContainer(){return!0},get name(){return this.__name},set name(b){var a=this.parent;a&&(typeof b=="string"?(!(b in a)||"parent"in a[b]&&a[b].parent==a&&a[b].name===b)&&(a[b]=this):this.__name in a&&a[this.__name]==this&&delete a[this.__name]),this.__name=b},setContext:function(a){this.__context=a;for(var b=this.__children,c=b.length;c--;)b[c].setContext(a)},setStage:function(a){this.__stage=a;for(var b=this.__children,c=b.length;c--;)b[c].setStage(a);this.onDisplayed&&a&&this.onDisplayed()},isolate:function(){this.setStage(null),this.setContext(null),this.parent=null},prepareNewChild:function(a){this.removeChild(a),a.parent&&(a.parent.container==a?a.parent.container=null:a.parent.removeChild(a)),this.__context&&a.setContext(this.__context),a.parent=this,this.__stage&&a.setStage(this.__stage);var b=a.name;!b||typeof b!="string"||b in this&&!("parent"in this[b]&&this[b].parent==this&&this[b].name===b)||(this[b]=a),a.onAdded&&a.onAdded()},canBeAdded:function(b){if(b.superclassName=="CanvasLayer"){for(var a=this,c=this.__stage;a!=c;){if(a==b)return!1;a=a.parent}return!0}return!1},addChild:function(a){this.canBeAdded(a)&&(this.prepareNewChild(a),this.__children.push(a))},addRearChild:function(a){this.canBeAdded(a)&&(this.prepareNewChild(a),this.__children.unshift(a))},addChildOver:function(a,d){if(this.canBeAdded(a))for(var b=this.__children,c=b.length;c--;)if(b[c]==d){this.prepareNewChild(a),b.splice(c+1,0,a);break}},addChildUnder:function(a,d){if(this.canBeAdded(a))for(var b=this.__children,c=b.length;c--;)if(b[c]==d){this.prepareNewChild(a),b.splice(c,0,a);break}},removeChild:function(b){for(var c=this.__children,d=c.length,a;d--;)if(c[d]==b){a=b.name,a&&typeof a=="string"&&a in this&&this[a]==b&&delete this[a],b.isolate(),c.splice(d,1);break}},contains:function(a){for(a=a.parent;a&&a.isContainer;){if(a==this)return!0;a=a.parent}return!1},__copy:function(i,l){var c,b,k,j,f,g,d,e,a,h;if(i.isContainer){c=E.call(i),k=arguments.length==2,k?(j=i,f=new v,f.set(i,c),g=[]):(j=arguments[2],f=arguments[3],g=arguments[4]),e=i.children,c.__children=Array(e.length);for(b=e.length;b--;)d=this.__copy(e[b],l,j,f,g),d.parent=c,c.__children[b]=d,f.set(e[b],d),a=d.name,!a||typeof a!="string"||a in c&&!("parent"in c[a]&&c[a].parent==c&&c[a].name===a)||(c[a]=d);a=i.masks,d=i.holes,c.masks=Array(a.length),c.holes=Array(d.length);for(b=a.length;b--;)h=a[b],e=f.get(h.host),c.masks[b]=h.host==j||j.contains(h.host)?{shape:h.shape.copy(),host:e}:{shape:h.shape,host:h.host},e||g.push([c.masks[b],h]);for(b=d.length;b--;)a=d[b],e=f.get(a.host),c.holes[b]=a.host==j||j.contains(a.host)?{shape:a.shape.copy(),host:e}:{shape:a.shape,host:a.host},e||g.push([c.holes[b],a]);if(k){for(b=g.length;b--;)g[b][0].host=f.get(g[b][1].host);f.clear()}return c}return i.copy(l)},copy:function(a){return this.__copy(this,a)},__addShapeData:function(d,a,b){var c,e;a=a||this;for(e=b.length;e--;)if(c=b[e],c.shape===d&&c.host===a)return;b.push({shape:d,host:a})},__removeShapeData:function(e,a,b){var c,d;a=a||this;for(d=b.length;d--;)if(c=b[d],c.shape===e&&c.host===a){b.splice(d,1);break}},addMask:function(a,b){this.masks.length||(this.draw=this.holes.length?this.drawWithMasksAndHoles:this.drawWithMasks,this.getHitAsset=this.holes.length?this.getHitAssetWithMasksAndHoles:this.getHitAssetWithMasks),this.__addShapeData(a,b,this.masks)},removeMask:function(a,b){this.__removeShapeData(a,b,this.masks),this.masks.length||(this.draw=this.holes.length?this.drawWithHoles:this.drawNormal,this.getHitAsset=this.holes.length?this.getHitAssetWithHoles:this.getHitAssetNormal)},addHole:function(a,b){this.holes.length||(this.draw=this.masks.length?this.drawWithMasksAndHoles:this.drawWithHoles,this.getHitAsset=this.masks.length?this.getHitAssetWithMasksAndHoles:this.getHitAssetWithHoles),this.__addShapeData(a,b,this.holes)},removeHole:function(a,b){this.__removeShapeData(a,b,this.holes),this.holes.length||(this.draw=this.masks.length?this.drawWithMasks:this.drawNormal,this.getHitAsset=this.masks.length?this.getHitAssetWithMasks:this.getHitAssetNormal)},drawNormal:function(){var a=this.__context;a.save(),this.setMatrixAndAlpha(a),this.drawChildren(),a.restore()},drawWithMasks:function(){var a=this.__context;a.save(),this.setMatrixAndAlpha(a),this.buildMasks(a),this.drawChildren(),a.restore()},drawWithHoles:function(){var a=this.__context;a.save(),this.setMatrixAndAlpha(a),this.buildHoles(a,this.__stage.width,this.__stage.height),this.drawChildren(),a.restore()},drawWithMasksAndHoles:function(){var a=this.__context;a.save(),this.setMatrixAndAlpha(a),this.buildMasks(a),this.buildHoles(a,this.__stage.width,this.__stage.height),this.drawChildren(),a.restore()},getHitAssetNormal:function(c,d){for(var e=this.__children,a,b,f=e.length;f--;)if(a=e[f],a.isContainer){if(b=a.getHitAsset(c,d))break}else if(a.hitTest&&a.hitTest(c,d)){b=a;break}return b},getHitAssetWithMasks:function(a,b){var c=this.__context;return this.buildPaths(c,this.masks),!!c.isPointInPath(a,b)&&this.getHitAssetNormal(a,b)},getHitAssetWithHoles:function(a,b){var c=this.__context;return this.buildPaths(c,this.holes),!c.isPointInPath(a,b)&&this.getHitAssetNormal(a,b)},getHitAssetWithMasksAndHoles:function(b,c){var a=this.__context;return this.buildPaths(a,this.masks),!!a.isPointInPath(b,c)&&(this.buildPaths(a,this.holes),!a.isPointInPath(b,c)&&this.getHitAssetNormal(b,c))},setMatrixAndAlpha:function(a){b.setTransform(a,this.matrixGlobal),a.globalAlpha*=this.alpha},buildPaths:function(c,f){var d,a,e,g;c.beginPath();for(g=f.length;g--;)c.save(),d=f[g],a=d.shape,e=b.get3(a.x,a.y,a.rotation,a.scaleX,a.scaleY,a.originX,a.originY),b.setTransform(c,d.host=="global"?e:b.multiply(d.host.matrixGlobal,e)),a.build(c),c.restore();c.closePath()},buildMasks:function(a){this.buildPaths(a,this.masks),a.clip()},buildHoles:function(a,f,g){for(var d,c,e,h=this.holes.length;h--;)a.save(),a.beginPath(),a.save(),b.setTransform(a,b.GLOBAL),a.moveTo(0,0),a.lineTo(0,g),a.lineTo(f,g),a.lineTo(f,0),a.closePath(),a.restore(),d=this.holes[h],c=d.shape,e=b.get3(c.x,c.y,c.rotation,c.scaleX,c.scaleY,c.originX,c.originY),b.setTransform(a,d.host=="global"?e:b.multiply(d.host.matrixGlobal,e)),c.build(a),a.restore(),a.closePath(),a.clip()},calcOwnMatrices:function(){this.matrixLocal=b.get3(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.originX,this.originY),this.matrixGlobal=this.parent.matrixGlobal?b.multiply(this.parent.matrixGlobal,this.matrixLocal):this.matrixLocal},calc:function(){this.calcOwnMatrices();for(var a=this.__children,b=a.length;b--;)a[b].calc()},drawChildren:function(){for(var b=this.__children,c=b.length,a=0;a<c;a++)b[a].draw()}},H.GLOBAL="global",H.OWN_PROPS=a.concat(["draw","getHitAsset"]),h.prototype={className:"CanvasComposition",constructor:h,set listenGestures(a){a?(this.addDomGestureListeners(),this.metronome.addListener(this,"processGestures",!0),this.__listenGestures=!0):(this.removeDomGestureListeners(),this.metronome.removeListener(this,"processGestures"),this.__listenGestures=!1)},markHitContainers:function(a){a=a.parent,a.isContainer&&(a.hasHitAsset=!0,this.hitContainers.push(a),this.markHitContainers(a))},markDownContainers:function(a){a=a.parent,a.isContainer&&(a.hasDownAsset=!0,this.downContainers.push(a),this.markDownContainers(a))},markOutContainers:function(a){(a=a.parent)&&a.isContainer&&(a.hasOutAsset=!0,this.outContainers.push(a),this.markOutContainers(a))},unmarkHitContainers:function(){for(var a=this.hitContainers.length;a--;)this.hitContainers[a].hasHitAsset=!1},unmarkDownContainers:function(){for(var a=this.downContainers.length;a--;)this.downContainers[a].hasDownAsset=!1},unmarkOutContainers:function(){for(var a=this.outContainers.length;a--;)this.outContainers[a].hasOutAsset=!1},processGestures:function(){if(this.__gestureOccured){var a=this.gesturePoint,a=this.__container.getHitAsset(a.x,a.y),b;a?(this.markHitContainers(a),this.dispatchGestureGroup(a,a,this.gestures.group1),this.gestures.group1.mouseDown&&(b=a,this.markDownContainers(a)),this.gestures.group2.mouseOver&&a!=this.hitAsset&&(this.hitAsset?(this.markOutContainers(this.hitAsset),this.gestures.group2.mouseOut&&this.dispatchGestureOut(this.hitAsset,this.hitAsset,"mouseOut"),this.dispatchGestureOver(a,a,"mouseOver")):this.dispatchGesture(a,a,"mouseOver"),this.isDown&&this.dispatchGestureOver(a,a,"dragOver")),this.gestures.group1.mouseUp&&(this.__touchEndOccured&&this.dispatchGesture(a,a,"touchEnd"),a==this.downAsset?this.dispatchGesture(a,a,"click"):this.downAsset&&(this.dispatchGestureClick(null,a,"click"),this.dispatchGestureReleaseOutside(this.downAsset,this.downAsset,"releaseOutside"))),this.gestures.group1.mouseMove&&(a==this.downAsset?this.dispatchGesture(a,a,"drag"):this.isDown&&a!=this.hitAsset&&this.hitAsset&&(this.hitAsset==this.downAsset?this.dispatchGestureOut(this.hitAsset,this.hitAsset,"dragOutThis"):this.dispatchGestureDragOutThis(null,this.hitAsset,"dragOutThis"),this.dispatchGestureOut(this.hitAsset,this.hitAsset,"dragOut")))):(this.gestures.group2.mouseOut&&this.hitAsset&&(this.dispatchGesture(this.hitAsset,this.hitAsset,"mouseOut"),this.isDown&&(this.hitAsset==this.downAsset?this.dispatchGestureOut(this.hitAsset,this.hitAsset,"dragOutThis"):this.dispatchGestureDragOutThis(null,this.hitAsset,"dragOutThis"),this.dispatchGestureOut(this.hitAsset,this.hitAsset,"dragOut"))),this.gestures.group1.mouseUp&&this.downAsset&&this.dispatchGesture(this.downAsset,this.downAsset,"releaseOutside")),this.hitAsset=a,this.gestures.group1.mouseUp?(this.unmarkDownContainers(),this.downContainers=[],this.downAsset=void 0):b&&(this.downAsset=b),this.unmarkHitContainers(),this.hitContainers=[],this.unmarkOutContainers(),this.outContainers=[],this.__gestureOccured=!1,this.__touchEndOccured&&(this.gesturePoint={x:void 0,y:void 0},this.__touchEndOccured=!1),this.gestures={group1:{},group2:{},group3:{}}}},dispatchGestureGroup:function(b,c,d){var a=c.parent,e;if(a){for(e in d)c.dispatchEvent(e,{target:b});a.isContainer&&this.dispatchGestureGroup(b,a,d)}},dispatchGesture:function(b,c,d){var a=c.parent;a&&(c.dispatchEvent(d,{target:b}),a.isContainer&&this.dispatchGesture(b,a,d))},dispatchGestureOver:function(b,c,d){var a=c.parent;a&&(c.dispatchEvent(d,{target:b}),a.isContainer&&!a.hasOutAsset&&this.dispatchGestureOver(b,a,d))},dispatchGestureOut:function(b,c,d){var a=c.parent;a&&(c.dispatchEvent(d,{target:b}),a.isContainer&&!a.hasHitAsset&&this.dispatchGestureOut(b,a,d))},dispatchGestureDragOutThis:function(b,a,c){(a=a.parent)&&a.isContainer&&(a.hasDownAsset&&!a.hasHitAsset&&(b||(b=a),a.dispatchEvent(c,{target:b})),this.dispatchGestureDragOutThis(b,a,c))},dispatchGestureClick:function(b,a,c){(a=a.parent)&&a.isContainer&&(a.hasDownAsset&&(b||(b=a),a.dispatchEvent(c,{target:b})),this.dispatchGestureClick(b,a,c))},dispatchGestureReleaseOutside:function(b,a,c){var d=a.parent;d&&(a.isContainer&&!a.hasHitAsset||b==a)&&(a.dispatchEvent(c,{target:b}),this.dispatchGestureReleaseOutside(b,d,c))},getMousePoint:function(a){var b=this.__canvas.getBoundingClientRect();return{x:this.pixelRatio*(a.clientX-b.left),y:this.pixelRatio*(a.clientY-b.top)}},getTouchPoint:function(a){a.preventDefault();var b=this.__canvas.getBoundingClientRect();return a=a.targetTouches[0],{x:this.pixelRatio*(a.clientX-b.left),y:this.pixelRatio*(a.clientY-b.top)}},saveDownTime:function(a){this.__downTime=(new Date).getTime()},detectFastClick:function(a){(new Date).getTime()-this.__downTime<this.fastClickTime&&a.currentTarget.dispatchEvent("fastClick",{target:a.target})},listenFastClickOn:function(a,b){arguments.length==1||b?(a.addEventListener("mouseDown",this,"saveDownTime"),a.addEventListener("click",this,"detectFastClick")):(a.removeEventListener("mouseDown",this,"saveDownTime"),a.removeEventListener("click",this,"detectFastClick"))},listenMouseMotion:function(a){a.currentTarget.addEventListener("mouseMove",this,"detectMouseMotion"),a.currentTarget.addEventListener("mouseOut",this,"detectMouseMotion"),this.__clickWithoutMouseMotion=!0},detectMouseMotion:function(a){a.currentTarget.removeEventListener("mouseMove",this,"detectMouseMotion"),a.currentTarget.removeEventListener("mouseOut",this,"detectMouseMotion"),this.__clickWithoutMouseMotion=!1},detectPointClick:function(a){a.currentTarget.removeEventListener("mouseMove",this,"detectMouseMotion"),this.__clickWithoutMouseMotion&&a.currentTarget.dispatchEvent("pointClick",{target:a.target})},listenPointClickOn:function(a,b){arguments.length==1||b?(a.addEventListener("mouseDown",this,"listenMouseMotion"),a.addEventListener("click",this,"detectPointClick")):(a.removeEventListener("mouseDown",this,"listenMouseMotion"),a.removeEventListener("click",this,"detectPointClick"))},detectDbClick:function(e){for(var f=!1,c=e.currentTarget,b,a=(new Date).getTime(),d=this.__dbClickCandidates.length;d--;)if(this.__dbClickCandidates[d].layer===c){b=d,f=!0;break}f?a-this.__dbClickCandidates[b].downTime<this.dbClickTime?(c.dispatchEvent("dbClick",{target:e.target}),this.__dbClickCandidates.splice(b,1)):this.__minDbClickDownTime=this.__dbClickCandidates[b].downTime=a:(a-this.__minDbClickDownTime>this.dbClickTime&&(this.__minDbClickDownTime=a,this.__dbClickCandidates.length=0),this.__dbClickCandidates.push({layer:c,downTime:a}))},listenDbClickOn:function(a,b){arguments.length==1||b?a.addEventListener("mouseDown",this,"detectDbClick"):a.removeEventListener("mouseDown",this,"detectDbClick")},get canvasID(){return this.__canvasID},set canvasID(a){this.canvas=document.getElementById(a)},get canvas(){return this.__canvas},set canvas(a){if(this.__canvas!==a){this.__canvas&&(this.__canvas.width=this.__width,h.__instanceByCanvas.delete(this.__canvas));var b=h.__instanceByCanvas.get(a);b&&b.isolate(),this.__canvasID=a.id,this.__canvas=a,this.__context=a.getContext("2d"),this.__width=a.width,this.__height=a.height,this.__container&&(this.__container.setContext(this.__context),this.__container.parent=this,this.__container.setStage(this)),h.__instanceByCanvas.set(a,this)}},get container(){return this.__container},set container(a){this.__container&&this.__container.isolate(),a.isContainer&&(this.__context&&a.setContext(this.__context),a.parent=this,this.__container=a,a.setStage(this))},get width(){return this.__width},set width(a){this.__width=this.__canvas.width=a},get height(){return this.__height},set height(a){this.__height=this.__canvas.height=a},get metronome(){return this.__metronome},set metronome(a){this.__metronome&&this.__metronome.removeUpdateListener(this,"draw"),a.addUpdateListener(this,"draw"),this.__metronome=a},get cornerRadius(){return this.__cornerRadius},set cornerRadius(b){var c,a;0<b&&(c=document.createElement("canvas"),c.width=c.height=b,a=c.getContext("2d"),a.fillStyle="rgb(0,0,0)",a.beginPath(),a.moveTo(0,0),a.lineTo(b,0),a.arcTo(0,0,0,b,b),a.lineTo(0,0),a.fill(),this.__cornerTL=c,c=document.createElement("canvas"),c.width=c.height=b,a=c.getContext("2d"),a.fillStyle="rgb(0,0,0)",a.beginPath(),a.moveTo(0,0),a.lineTo(b,0),a.lineTo(b,b),a.arcTo(b,0,0,0,b),a.fill(),this.__cornerTR=c,c=document.createElement("canvas"),c.width=c.height=b,a=c.getContext("2d"),a.fillStyle="rgb(0,0,0)",a.beginPath(),a.moveTo(b,0),a.lineTo(b,b),a.lineTo(0,b),a.arcTo(b,b,b,0,b),a.fill(),this.__cornerBR=c,c=document.createElement("canvas"),c.width=c.height=b,a=c.getContext("2d"),a.fillStyle="rgb(0,0,0)",a.beginPath(),a.moveTo(0,0),a.lineTo(0,b),a.lineTo(b,b),a.arcTo(0,b,0,0,b),a.fill(),this.__cornerBL=c,this.__cornerRadius=b)},drawNormal:function(){if(this.__canvas.width=this.__width,this.__container.calc(),this.__container.draw(),this.listenPassiveGestures&&(this.__gestureOccured=!0,this.gestures.group2.mouseOver=!0,this.gestures.group2.mouseOut=!0),this.__cornerRadius){var b=this.__canvas.width,c=this.__canvas.height,a=this.__cornerRadius;this.__context.save(),this.__context.globalCompositeOperation="destination-out",this.__context.drawImage(this.__cornerTL,0,0),this.__context.drawImage(this.__cornerTR,b-a,0),this.__context.drawImage(this.__cornerBR,b-a,c-a),this.__context.drawImage(this.__cornerBL,0,c-a),this.__context.restore()}},drawTweenSize:function(){this.__canvas.height=this.__height,this.drawNormal()},tweenSize:function(e,f,g,h,i){this.draw=this.drawTweenSize;var d=this,a={},b={},j=c.ref;return isNaN(e)||(a.__width=e),isNaN(f)||(a.__height=f),D.run(this,a,g,h,i||this.metronome).onComplete=function(){d.draw=d.drawNormal,b.hasOwnProperty("onComplete")&&b.onComplete(),j.end()},b},isolate:function(){this.__canvas.width=this.__width,h.__instanceByCanvas.delete(this.__canvas),this.__container&&this.__container.isolate(),this.__canvasID=this.__canvas=this.__context=this.__width=null},$:function(){this.__metronome.ensureNextTickUpdate()}},function(){var a=document.createElement("canvas");a.width=a.height=1,h.PIXEL=a.getContext("2d")}(),h.__instanceByCanvas=new o,aj.prototype={className:"CanvasCompositionWrapper",superclassName:"Object",constructor:aj,get stage(){return this.__stage},set stage(a){a.canvas=this.canvas,a.pixelRatio=this.pixelRatio,this.__stage=a,this.resize()},resize:function(){var a=this.__stage;a.width=this.pixelRatio*this.webElement.clientWidth,a.height=this.pixelRatio*this.webElement.clientHeight,a.$()}},W.prototype={className:"ImageLayer",superclassName:"CanvasLayer",constructor:W,get name(){return this.__name},set name(b){var a=this.parent;a&&(typeof b=="string"?(!(b in a)||"parent"in a[b]&&a[b].parent==a&&a[b].name===b)&&(a[b]=this):this.__name in a&&a[this.__name]==this&&delete a[this.__name]),this.__name=b},get src(){return this.image.src},set src(d){var j,a,b,e,i,h,g;function f(){a.draw=a.drawImage,a.sx=a.sx&&0<a.sx&&a.sx<b.width?a.sx:0,a.sy=a.sy&&0<a.sy&&a.sy<b.height?a.sy:0,a.width=a.sw=a.sw&&a.sw<=b.width-a.sx&&0<a.sw?a.sw:b.width-a.sx,a.height=a.sh=a.sh&&a.sh<=b.height-a.sy&&0<a.sh?a.sh:b.height-a.sy,a.isLoading=!1,a.hasOwnProperty("onLoad")&&a.onLoad(),a.dispatchEvent("load"),j.end()}j=c.ref,a=this,d instanceof Image?(b=this.image=d,b.complete?f():b.onload=f):d instanceof HTMLCanvasElement?(b=this.image=d,f()):d instanceof HTMLElement?(this.isLoading=!0,e=document.createElement("div"),d=d.cloneNode(!0),e.appendChild(d),Y.set(e,{position:"absolute",opacity:0}),i=(new XMLSerializer).serializeToString(d),document.body.appendChild(e),d='<svg xmlns="http://www.w3.org/2000/svg" width="'+(d.clientWidth||1)+'" height="'+(d.clientHeight||1)+'"><foreignObject width="100%" height="100%">'+i+"</foreignObject></svg>",document.body.removeChild(e),h=window.URL||window.webkitURL||window,e=new Blob([d],{type:"image/svg+xml"}),g=h.createObjectURL(e),b=this.image=new Image,b.onload=function(){h.revokeObjectURL(g),f()},b.src=g):(this.isLoading=!0,b=this.image=new Image,b.onload=f,b.src=d)},load:function(a){this.src=a},setContext:function(a){this.__context=a},setStage:function(a){this.__stage=a,this.onDisplayed&&a&&this.onDisplayed()},calc:function(){this.matrixLocal=b.get3(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.originX,this.originY),this.matrixGlobal=b.multiply(this.parent.matrixGlobal,this.matrixLocal)},drawImage:function(){var a=this.__context;a.save(),b.setTransform(a,this.matrixGlobal),a.globalAlpha*=this.alpha,a.drawImage(this.image,this.sx,this.sy,this.sw,this.sh,0,0,this.width,this.height),a.restore()},drawNothing:function(){},isolate:function(){this.__context=this.__stage=this.parent=null},copy:function(b){var a=E.call(this),c;return this.isLoading?a.load(this.src):b&&!this.image&&(c=this,this.addEventListener("load",function(b){a.load(c.src)})),a},hitTest:function(d,e){var a=this.__context,c;return b.setTransform(a,this.matrixGlobal),a.beginPath(),a.rect(0,0,this.width,this.height),c=a.isPointInPath(d,e),a.closePath(),c&&this.useDeepHitTest&&(a=h.PIXEL,a.save(),b.setMovedTransform(a,this.matrixGlobal,-d,-e),a.drawImage(this.image,this.sx,this.sy,this.sw,this.sh,0,0,this.width,this.height),c=Boolean(a.getImageData(0,0,1,1).data[3]),a.restore(),c&&a.clearRect(0,0,2,2)),c}},W.OWN_PROPS=a.concat("image draw width height sx sy sw sh useDeepHitTest isLoading".split(" ")),T.prototype={className:"AtlasImageLayer",superclassName:"CanvasLayer",constructor:T,get name(){return this.__name},set name(b){var a=this.parent;a&&(typeof b=="string"?(!(b in a)||"parent"in a[b]&&a[b].parent==a&&a[b].name===b)&&(a[b]=this):this.__name in a&&a[this.__name]==this&&delete a[this.__name]),this.__name=b},get imageName(){return this.__imageName},set imageName(b){if(this.__atlasData&&this.__atlasData.loaded){var a=this.__atlasData.frames[b];a&&(this.width=a.frame.w,this.height=a.frame.h)}this.__imageName=b},get atlasData(){return this.__atlasData},set atlasData(a){if(this.__imageName&&a.loaded){var b=a.frames[this.__imageName];b&&(this.width=b.frame.w,this.height=b.frame.h)}this.__atlasData=a},setContext:function(a){this.__context=a},setStage:function(a){this.__stage=a,this.onDisplayed&&a&&this.onDisplayed()},calc:function(){this.matrixLocal=b.get3(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.originX,this.originY),this.matrixGlobal=b.multiply(this.parent.matrixGlobal,this.matrixLocal)},drawImage:function(){var a=this.__context,c;a.save(),b.setTransform(a,this.matrixGlobal),a.globalAlpha*=this.alpha,c=this.__atlasData.frames[this.__imageName].frame,a.drawImage(this.__atlasData.image,c.x,c.y,c.w,c.h,0,0,this.width,this.height),a.restore()},drawNothing:function(){},isolate:function(){this.__context=this.__stage=this.parent=null},copy:E,hitTest:function(d,e){var a=this.__context,c;return b.setTransform(a,this.matrixGlobal),a.beginPath(),a.rect(0,0,this.width,this.height),c=a.isPointInPath(d,e),a.closePath(),c&&this.useDeepHitTest&&(a=h.PIXEL,a.save(),b.setMovedTransform(a,this.matrixGlobal,-d,-e),c=this.__atlasData.frames[this.__imageName].frame,a.drawImage(this.__atlasData.image,c.x,c.y,c.w,c.h,0,0,this.width,this.height),c=Boolean(a.getImageData(0,0,1,1).data[3]),a.restore(),c&&a.clearRect(0,0,2,2)),c}},T.OWN_PROPS=a.concat("draw width height __atlasData __imageName useDeepHitTest".split(" ")),$.prototype={className:"AtlasFilmLayer",superclassName:"CanvasLayer",constructor:$,get totalFrames(){return this.__totalFrames},get name(){return this.__name},set name(b){var a=this.parent;a&&(typeof b=="string"?(!(b in a)||"parent"in a[b]&&a[b].parent==a&&a[b].name===b)&&(a[b]=this):this.__name in a&&a[this.__name]==this&&delete a[this.__name]),this.__name=b},setContext:function(a){this.__context=a},setStage:function(a){a?(this.__stage=a,this.onDisplayed)&&this.onDisplayed():(this.__wasPlayingBeforeRemoving=this.isPlayed,this.stop(),this.matrixLocal=void 0,this.__stage=a)},get fps(){return this.__fps},set fps(a){isNaN(a)||0>=a?this.isPlayed&&this.__fps?(this.__stopChangingIndex(),this.__fps=0,this.__startChangingIndex()):this.__fps=0:this.isPlayed?this.__fps?(this.__fpsTimer.delay=1e3/a,this.__fps=a):(this.__stopChangingIndex(),this.__fps=a,this.__startChangingIndex()):this.__fps=a},loseQueue:function(){this.queue=c.REF_DEFAULT},setNextIndex:function(){this.frameIndex=this.frameIndex<this.__totalFrames-1?this.frameIndex+1:0},setPrevIndex:function(){this.frameIndex=this.frameIndex?this.frameIndex-1:this.__totalFrames-1},setNextIndexStretch:function(){--this.__stretchCount||(this.__stretchCount=this.__stretchRatio,this.setNextIndex())},setPrevIndexStretch:function(){--this.__stretchCount||(this.__stretchCount=this.__stretchRatio,this.setPrevIndex())},handleDestinationFrameTo:function(){if(this.__removeInTheEnd){var a=this.__stage;this.parent.removeChild(this),a.$()}else this.__stopChangingIndex();this.queue.end()},setNextIndexTo:function(){this.frameIndex==this.__destinationFrameIndex?this.handleDestinationFrameTo():this.setNextIndex()},setPrevIndexTo:function(){this.frameIndex==this.__destinationFrameIndex?this.handleDestinationFrameTo():this.setPrevIndex()},setNextIndexToStretch:function(){--this.__stretchCount||(this.__stretchCount=this.__stretchRatio,this.setNextIndexTo())},setPrevIndexToStretch:function(){--this.__stretchCount||(this.__stretchCount=this.__stretchRatio,this.setPrevIndexTo())},handleDestinationFrameFromTo:function(){this.__repeatsNumber===0||--this.__repeatsNumber?this.frameIndex=this.__startIndex:this.handleDestinationFrameTo()},setNextIndexFromTo:function(){this.frameIndex==this.__destinationFrameIndex?this.handleDestinationFrameFromTo():this.setNextIndex()},setPrevIndexFromTo:function(){this.frameIndex==this.__destinationFrameIndex?this.handleDestinationFrameFromTo():this.setPrevIndex()},setNextIndexFromToStretch:function(){--this.__stretchCount||(this.__stretchCount=this.__stretchRatio,this.setNextIndexFromTo())},setPrevIndexFromToStretch:function(){--this.__stretchCount||(this.__stretchCount=this.__stretchRatio,this.setPrevIndexFromTo())},nextFrame:function(){this.__stage&&this.frameIndex<this.__totalFrames-1&&(this.frameIndex++,this.__stage.$())},prevFrame:function(){this.__stage&&this.frameIndex&&(this.frameIndex--,this.__stage.$())},__delayedStartChangingIndex:function(){this.__stage.metronome.addListener(this,this.__changeIndexMethodName),this.__stage.metronome.removeListener(this,"__delayedStartChangingIndex")},__noNewIndexInThisFrame:function(){this[this.__changeIndexMethodName]=this.__changeIndexBufferMethod},__startChangingIndex:function(){this.matrixLocal||(this.__changeIndexBufferMethod=this[this.__changeIndexMethodName],this[this.__changeIndexMethodName]=this.__noNewIndexInThisFrame),this.__fps?this.isPlayed||(this.__fpsTimer=this.__stage.metronome.addTimerListener(this,this.__changeIndexMethodName,1e3/this.__fps)):this.__stage.metronome.addListener(this,this.__changeIndexMethodName),this.isPlayed=!0},__stopChangingIndex:function(){this.__fps?(this.__stage.metronome.removeListener(this.__fpsTimer),this.__fpsTimer=null):this.__stage.metronome.removeListener(this,this.__changeIndexMethodName),this.isPlayed=!1},__startPlayback:function(a){this.loseQueue(),a?(this.__stretchRatio=isNaN(a.stretch)&&1>a.stretch?1:Math.ceil(a.stretch),1<this.__stretchRatio?(this.__stretchCount=this.__stretchRatio,a=a.reverse===!0?"setPrevIndexStretch":"setNextIndexStretch"):a=a.reverse===!0?"setPrevIndex":"setNextIndex"):a="setNextIndex",this.isPlayed&&this.__changeIndexMethodName!=a&&this.__stopChangingIndex(),this.__changeIndexMethodName=a,this.__startChangingIndex()},play:function(a){this.__stage&&this.__startPlayback(a)},playFrom:function(a,b){this.__stage&&(this.frameIndex=a,this.__startPlayback(b))},playTo:function(d,b){if(this.__stage){this.queue=c.ref;var a=this.frameIndex;b?(this.__removeInTheEnd=b.remove,this.__stretchRatio=isNaN(b.stretch)&&1>b.stretch?1:Math.ceil(b.stretch),1<this.__stretchRatio?(this.__stretchCount=this.__stretchRatio,a=a>d&&b.reverse!==!1||a<d&&b.reverse===!0?"setPrevIndexToStretch":"setNextIndexToStretch"):a=a>d&&b.reverse!==!1||a<d&&b.reverse===!0?"setPrevIndexTo":"setNextIndexTo"):(this.__removeInTheEnd=!1,this.__stretchRatio=1,a=a>d?"setPrevIndexTo":"setNextIndexTo"),this.isPlayed&&this.__changeIndexMethodName!=a&&this.__stopChangingIndex(),this.__changeIndexMethodName=a,this.__destinationFrameIndex=d,this.__startChangingIndex()}},playToTheEnd:function(a){this.playTo(this.__totalFrames-1,a)},playToTheBeginning:function(a){this.playTo(0,a)},playFromTo:function(a,d,b){this.__stage&&(this.queue=c.ref,this.frameIndex=this.__startIndex=a,b?(this.__removeInTheEnd=b.remove,this.__repeatsNumber=isNaN(b.repeats)?1:Math.ceil(Math.abs(b.repeats)),this.__stretchRatio=isNaN(b.stretch)&&1>b.stretch?1:Math.ceil(b.stretch),1<this.__stretchRatio?(this.__stretchCount=this.__stretchRatio,a=a>d&&b.reverse!==!1||a<d&&b.reverse===!0?"setPrevIndexFromToStretch":"setNextIndexFromToStretch"):a=a>d&&b.reverse!==!1||a<d&&b.reverse===!0?"setPrevIndexFromTo":"setNextIndexFromTo"):(this.__removeInTheEnd=!1,this.__stretchRatio=this.__repeatsNumber=1,a=a>d?"setPrevIndexFromTo":"setNextIndexFromTo"),this.isPlayed&&this.__changeIndexMethodName!=a&&this.__stopChangingIndex(),this.__changeIndexMethodName=a,this.__destinationFrameIndex=d,this.__startChangingIndex())},stop:function(){this.__stage&&(this.loseQueue(),this.isPlayed&&this.__stopChangingIndex())},goto:function(a){this.__stage&&(this.loseQueue(),this.__stopChangingIndex(),this.frameIndex=a,this.__stage.$())},calcNormal:function(){this.matrixLocal=b.get3(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.originX,this.originY),this.matrixGlobal=b.multiply(this.parent.matrixGlobal,this.matrixLocal)},calcWithAnchors:function(){var c=this.__anchors.$pivot,a,d;c&&(this.matrixLocal||(this.matrixLocal=b.get(this.x,this.y,this.rotation,this.scaleX,this.scaleY)),typeof c=="string"?(a=this.__anchors[c],this.pivotName&&c!=this.pivotName&&(d=b.applyToOffset({x:a.x-this.originX,y:a.y-this.originY},this.matrixLocal),this.x+=d.x,this.y+=d.y),this.originX=a.x,this.originY=a.y,this.pivotName=c):this.pivotData!=c&&(c[0]==this.pivotName?(d=this.__anchors[this.pivotName],a=this.__anchors[c[1]],d=b.applyToOffset({x:a.x-d.x,y:a.y-d.y},this.matrixLocal),this.pivotName=c[1]):(c[1]==this.pivotName?(d=this.__anchors[this.pivotName],a=this.__anchors[c[0]],d=b.applyToOffset({x:a.x-d.x,y:a.y-d.y},this.matrixLocal)):(a=this.__anchors[c[0]],d=b.applyToOffset({x:a.x-this.originX,y:a.y-this.originY},this.matrixLocal)),this.pivotName=c[0]),this.x+=d.x,this.y+=d.y,this.originX=a.x,this.originY=a.y,this.pivotData=c)),this.calcNormal()},drawFrame:function(){var d=this.__context,a,c;d.save(),b.setTransform(d,this.matrixGlobal),d.globalAlpha*=this.alpha,a=this.__atlasData.frames[this.__atlasFilmData.frames[this.frameIndex]],a&&(c=a.frame,a=a.spriteSourceSize,d.drawImage(this.__atlasData.image,c.x,c.y,c.w,c.h,a.x,a.y,c.w,c.h),this.frameWidth=c.w,this.frameHeight=c.h,this.frameTrimTop=a.y,this.frameTrimLeft=a.x),d.restore()},drawNothing:function(){},isolate:function(){this.__wasPlayingBeforeRemoving=this.isPlayed,this.stop(),this.matrixLocal=void 0,this.__context=this.__stage=this.parent=null},onDisplayed:function(){this.__wasPlayingBeforeRemoving&&this.__startChangingIndex()},copy:function(){var a=new this.constructor(this.__atlasData,this.__atlasFilmData),b=this.constructor.OWN_PROPS,c;for(i=b.length;i--;)a[b[i]]=this[b[i]];a.listeners={};for(c in this.listeners)a.listeners[c]=this.listeners[c].slice();return(b=U.of(this))&&b.addTo(a),this.isPlayed&&(a.__wasPlayingBeforeRemoving=!0),a},set atlasData(a){this.__atlasData=a},get atlasData(){return this.__atlasData},set atlasFilmData(a){this.__totalFrames=a&&a.frames?a.frames.length:void 0,this.__atlasFilmData=a},get atlasFilmData(){return this.__atlasFilmData},set anchors(a){var i,h,d,e,f,g,c,b;if(a){i=this.__anchors={},h=!1,d=!0,f={},g=this;for(c in a){e=a[c];for(b in e)f[b]||(d&&b=="$pivot"&&(h=!0,d=!1),function(){var c=b;Object.defineProperty(i,c,{get:function(){return a[g.__atlasFilmData.frames[g.frameIndex]][c]}})}(),f[b]=!0)}h&&(this.calc=this.calcOwnMatrices=this.calcWithAnchors)}else this.calc=this.calcOwnMatrices=this.calcNormal,this.__anchors=null;this.__anchorsSource=a},get anchors(){return this.__anchors},hitTest:function(d,e){var a=this.__context,c,f;return b.setTransform(a,this.matrixGlobal),a.beginPath(),a.rect(this.frameTrimLeft,this.frameTrimTop,this.frameWidth,this.frameHeight),c=a.isPointInPath(d,e),a.closePath(),c&&this.useDeepHitTest&&(f=this.__atlasData.frames[this.__atlasFilmData.frames[this.frameIndex]],f&&(a=h.PIXEL,a.save(),b.setMovedTransform(a,this.matrixGlobal,-d,-e),c=f.frame,a.drawImage(this.__atlasData.image,c.x,c.y,c.w,c.h,this.frameTrimLeft,this.frameTrimTop,this.frameWidth,this.frameHeight),c=Boolean(a.getImageData(0,0,1,1).data[3]),a.restore(),c&&a.clearRect(0,0,2,2))),c}},$.OWN_PROPS=a.concat("__atlasData __atlasFilmData __totalFrames __autoRemove __changeIndexMethodName __startIndex __destinationFrameIndex __removeInTheEnd __repeatsNumber __stretchRatio __stretchCount frameWidth frameHeight __wasPlayingBeforeRemoving frameTrimTop frameTrimLeft frameIndex draw useDeepHitTest __fps".split(" ")),y.prototype={className:"StyleObject",superclassName:"Object",constructor:y,clone:function(){return new y(this.props)},mix:function(h,f,g){3>arguments.length&&(g==!0,2>arguments.length&&(f=!0));var c=this.props,e=h.props,a,d,b;if(g){for(a in e)d=c[a],f?(b!=void 0&&b!=null||!c.hasOwnProperty(a))&&(c[a]=b):(d==void 0||d==null)&&(c[a]=b)}else for(a in e)c.hasOwnProperty(a)&&(d=c[a],b=e[a],f?b!=void 0&&b!=null&&(c[a]=b):(d==void 0||d==null)&&(c[a]=b))},setValue:function(a){var c=this.props,b;a=a.props;for(b in c)c[b]==a.hasOwnProperty(b)?a[b]:void 0}},y.getDefaultTextStyle=function(){return new y({font:"sans-serif",size:12,color:"rgba(0,0,0,1)",align:"start",baseline:"hanging",bold:!1,italic:!1,strokeWidth:0,strokeColor:"rgba(0,0,0,1)",strokeCap:"butt",strokeJoin:"miter",strokeMiterLimit:10,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0,0,0,0)"})},s.prototype={className:"TextLayer",superclassName:"CanvasLayer",constructor:s,get name(){return this.__name},set name(b){var a=this.parent;a&&(typeof b=="string"?(!(b in a)||"parent"in a[b]&&a[b].parent==a&&a[b].name===b)&&(a[b]=this):this.__name in a&&a[this.__name]==this&&delete a[this.__name]),this.__name=b},get text(){return this.__text},set text(a){this.__text=a,this.calculateText(),this.measureWidth(),this.measureHeight()},get font(){return this.__style.props.font},set font(a){this.__style.props.font=a,this.__textWidth&&this.__text.length&&this.calculateText(),this.measureWidth(),this.measureHeight()},get size(){return this.__style.props.size},set size(a){this.__style.props.size=a,this.__textWidth&&this.__text.length&&this.calculateText(),this.measureWidth(),this.measureHeight()},get bold(){return this.__style.props.bold},set bold(a){this.__style.props.bold=a,this.__boldItalic=(a?"bold ":"")+(this.__style.props.italic?"italic ":""),this.__textWidth&&this.__text.length&&this.calculateText(),this.measureWidth(),this.measureHeight()},get italic(){return this.__style.props.italic},set italic(a){this.__style.props.italic=a,this.__boldItalic=(this.__style.props.bold?"bold ":"")+(a?"italic ":""),this.__textWidth&&this.__text.length&&this.calculateText(),this.measureWidth(),this.measureHeight()},get align(){return this.__style.props.align},set align(a){this.__style.props.align=a,this.__textWidth&&this.__text.length&&this.calculateText(),this.measureWidth(),this.measureHeight()},get baseline(){return this.__style.props.baseline},set baseline(a){this.__style.props.baseline=a},get strokeWidth(){return this.__style.props.strokeWidth},set strokeWidth(a){this.__style.props.strokeWidth=a},get strokeCap(){return this.__style.props.strokeCap},set strokeCap(a){this.__style.props.strokeCap=a},get strokeJoin(){return this.__style.props.strokeJoin},set strokeJoin(a){this.__style.props.strokeJoin=a},get strokeMiterLimit(){return this.__style.props.strokeMiterLimit},set strokeMiterLimit(a){this.__style.props.strokeMiterLimit=a},get shadowOffsetX(){return this.__style.props.shadowOffsetX},set shadowOffsetX(a){this.__style.props.shadowOffsetX=a},get shadowOffsetY(){return this.__style.props.shadowOffsetY},set shadowOffsetY(a){this.__style.props.shadowOffsetY=a},get shadowBlur(){return this.__style.props.shadowBlur},set shadowBlur(a){this.__style.props.shadowBlur=a},get lineSpacing(){return this.__lineSpacing},set lineSpacing(a){this.__lineSpacing=a,this.measureHeight()},get multiline(){return this.__multiline},set multiline(a){this.__textWidth?(this.measureWidth=this.measureBoundedWidth,a?(this.measureHeight=this.measureMultilineHeight,this.calculateText=this.calculateBoundedMultiline,this.fill=this.fillMultiline,this.stroke=this.strokeMultiline,!this.__multiline&&this.__text.length&&this.calculateText()):(this.measureHeight=this.measureLineHeight,this.calculateText=this.calculateBoundedLine,this.fill=this.fillBoundedLine,this.stroke=this.strokeBoundedLine)):a?(this.measureWidth=this.measureMultilineWidth,this.measureHeight=this.measureMultilineHeight,this.calculateText=this.calculateMultiline,this.fill=this.fillMultiline,this.stroke=this.strokeMultiline,!this.__multiline&&this.__text.length&&this.calculateText()):(this.measureWidth=this.measureLineWidth,this.measureHeight=this.measureLineHeight,this.calculateText=Q,this.fill=this.fillLine,this.stroke=this.strokeLine),this.__multiline=a,this.measureWidth(),this.measureHeight()},get textWidth(){return this.__width},set textWidth(a){var b=this.__textWidth;this.__textWidth=isNaN(a)?0:Math.abs(a),this.__multiline?(this.measureHeight=this.measureMultilineHeight,this.fill=this.fillMultiline,this.stroke=this.strokeMultiline,a?(this.measureWidth=this.measureBoundedWidth,this.calculateText=this.calculateBoundedMultiline,this.__text.length&&this.calculateText()):(this.measureWidth=this.measureMultilineWidth,this.calculateText=this.calculateMultiline,b&&this.__text.length&&this.calculateText())):(this.measureHeight=this.measureLineHeight,a?(this.measureWidth=this.measureBoundedWidth,this.calculateText=this.calculateBoundedLine,this.fill=this.fillBoundedLine,this.stroke=this.strokeBoundedLine,this.__text.length&&this.calculateText()):(this.measureWidth=this.measureLineWidth,this.calculateText=Q,this.fill=this.fillLine,this.stroke=this.strokeLine)),this.measureWidth(),this.measureHeight()},get textHeight(){return this.__height},get style(){var a=this.__style.props;return a.color=this.color,a.strokeColor=this.strokeColor,a.shadowColor=this.shadowColor,this.__style},set style(a){this.__style.setValue(a),this.color=this.__style.props.color,this.strokeColor=this.__style.props.strokeColor,this.shadowColor=this.__style.props.shadowColor,this.__textWidth&&this.calculateText(),this.measureWidth(),this.measureHeight()},addStyle:function(a,b){this.__style.mix(a,b,!1),this.__textWidth&&this.calculateText(),this.measureWidth(),this.measureHeight()},setupStroke:function(a){a.lineWidth=this.__style.props.strokeWidth,a.lineJoin=this.__style.props.strokeJoin,a.strokeStyle=this.strokeColor},fillLine:function(a){a.fillText(this.__text,0,0)},strokeLine:function(a){this.__style.props.strokeWidth&&(this.setupStroke(a),a.strokeText(this.__text,0,0))},fillBoundedLine:function(a){a.fillText(this.lines[0],0,0)},strokeBoundedLine:function(a){this.__style.props.strokeWidth&&(this.setupStroke(a),a.strokeText(this.lines[0],0,0))},fillMultiline:function(b){for(var a=0,c=this.lines.length;a<c;a++)b.fillText(this.lines[a],0,a*this.__lineSpacing)},strokeMultiline:function(b){this.setupStroke(b);for(var a=0,c=this.lines.length;a<c;a++)b.strokeText(this.lines[a],0,a*this.__lineSpacing)},measureBoundedWidth:function(){this.__width=this.__textWidth},measureLineWidth:function(){var a=s.RULER;this.prepareMeasureWidth(a),this.__width=a.measureText(this.__text).width,a=this.align,this.__alignOffsetX=a=="start"||a=="left"?0:a=="center"?-this.__width/2:-this.__width},measureMultilineWidth:function(){var b=s.RULER,a,c;this.prepareMeasureWidth(b);for(a=this.__width=0,c=this.lines.length;a<c;a++)this.__width=Math.max(this.__width,b.measureText(this.lines[a]).width);this.measureAlignOffsetX(this.align)},measureAlignOffsetX:function(a){this.__alignOffsetX=a=="start"||a=="left"?0:a=="center"?-this.__width/2:-this.__width},prepareMeasureWidth:function(a){a.font=this.__boldItalic+this.__style.props.size+"px "+this.__style.props.font,a.textAlign=this.__style.props.align,a.textBaseline=this.__style.props.baseline},measureLineHeight:function(){this.__height=1.03*this.size},measureMultilineHeight:function(){this.__height=this.__lineSpacing*(this.lines.length-1)+1.03*this.size},calculateBoundedLine:function(){var b=s.RULER,c,a,d,e;this.lines.length=1,this.lines[0]="",c=this.__text.split(" "),a="",d=0,e=c.length;for(this.prepareMeasureWidth(b);b.measureText(a).width<=this.__textWidth&&d<e;)this.lines[0]=a,a+=c[d++]+" "},calculateMultiline:function(){this.lines=this.__text.split("\n")},calculateBoundedMultiline:function(){var g=s.RULER,h,f,a,d,e,b,c,i;this.lines.length=0,h=this.__text.split("\n"),b=0,this.prepareMeasureWidth(g),d=0;for(stringsTotal=h.length;d<stringsTotal;d++){f=h[d].split(" "),this.lines[b]=a="",c=e=-1;for(i=f.length;e<i;)g.measureText(a).width>this.__textWidth?(c&&e--,c=-1,this.lines[++b]=a=""):(this.lines[b]=a,a+=f[++e]+" ",c++);b++}},calc:function(){this.matrixLocal=b.get3(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.originX,this.originY),this.matrixGlobal=b.multiply(this.parent.matrixGlobal,this.matrixLocal)},drawNormal:function(){var a=this.__context;a.save(),b.setTransform(a,this.matrixGlobal),a.globalAlpha*=this.alpha,a.font=this.__boldItalic+this.__style.props.size+"px "+this.__style.props.font,a.textAlign=this.__style.props.align,a.textBaseline=this.__style.props.baseline,a.fillStyle=this.color,this.strokeOverFill?(this.useFill&&this.fill(a),this.__style.props.strokeWidth&&this.stroke(a)):(this.__style.props.strokeWidth&&this.stroke(a),this.useFill&&this.fill(a)),a.restore()},drawCached:function(){},setContext:function(a){this.__context=a},setStage:function(a){this.__stage=a,this.onDisplayed&&a&&this.onDisplayed()},isolate:function(){this.__context=this.__stage=this.parent=null},copy:function(){var a=E.call(this);return a.lines=this.lines.slice(),a},onAdded:function(){this.measureWidth(),this.measureHeight()},hitTest:function(d,e){var a=this.__context,c;if(b.setTransform(a,this.matrixGlobal),a.beginPath(),a.rect(this.__alignOffsetX,0,this.__width,this.__height),c=a.isPointInPath(d,e),a.closePath(),c)if(this.useDeepHitTest)a=h.PIXEL,a.save(),b.setMovedTransform(a,this.matrixGlobal,-d,-e),a.font=this.__boldItalic+this.__style.props.size+"px "+this.__style.props.font,a.textAlign=this.__style.props.align,a.textBaseline=this.__style.props.baseline,a.fillStyle=this.color,this.strokeOverFill?(this.useFill&&this.fill(a),this.strokeWidth&&this.stroke(a)):(this.strokeWidth&&this.stroke(a),this.useFill&&this.fill(a)),c=Boolean(a.getImageData(0,0,1,1).data[3]),a.restore(),c&&a.clearRect(0,0,2,2);else if(!this.useFill&&!this.strokeWidth)return!1;return c}},s.OWN_PROPS=a.concat("__text __style __boldItalic color strokeColor shadowColor draw __width __height __alignOffsetX strokeOverFill useDeepHitTest useFill __lineSpacing __textWidth __multiline fill stroke measureWidth measureHeight calculateText".split(" ")),function(){var a=document.createElement("canvas");a.width=a.height=1,s.RULER=a.getContext("2d")}(),FontLoader={},function(){function h(){e=!1,FontLoader.hasOwnProperty("onComplete")&&FontLoader.onComplete()}function g(g,b,e){var h=c.ref,i={fontName:g,fontStyle:b,charSet:e};a&&a.parentNode==d.parentNode&&d.parentNode.removeChild(a),WebFontConfig={google:{families:[g+":"+b+":"+e]},active:function(){f+="|"+g+(b?"||"+b:"")+(e?"|||"+e:"")+"  ",FontLoader.hasOwnProperty("onFontLoaded")&&FontLoader.onFontLoaded(i),h.end()},inactive:function(){FontLoader.hasOwnProperty("onFontFail")&&FontLoader.onFontFail(i),h.end()}},a=document.createElement("script"),a.src=(document.location.protocol=="https:"?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",a.type="text/javascript",a.async="true",d=document.getElementsByTagName("script")[0],d.parentNode.insertBefore(a,d)}var e=!1,b,d=document.getElementsByTagName("script")[0],a,f="";Object.defineProperty(FontLoader,"isLoading",{get:function(){return e}}),FontLoader.loadGoogleFont=function(f,a,d){a=a||"400",d=d||"latin",e?b.addTask(g,f,a,d):(b=new c,b.onComplete=h,b.addTask(g,f,a,d),e=!0,b.run())},FontLoader.loadGoogleFontList=function(){var b=c.ref,a={},d;return document.location.protocol=="file:"?setTimeout(function(){a.data=[""],j("loadGoogleFontList ERROR: font list can not be loaded from 'file://' location. Use it online."),a.hasOwnProperty("onComplete")&&(a.onComplete(),b.end())},0):(d=new C,d.onComplete=function(){a.data=JSON.parse(this.data).items,a.hasOwnProperty("onComplete")&&a.onComplete(),b.end()},d.load("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyADQfYE852T3oiRpLbivr44TfmczbjlIqQ")),a},FontLoader.hasGoogleFont=function(c,a,b){return f.indexOf("|"+c+(a?"||"+a:"")+(b?"|||"+b:""))!=-1}}(),Y={set:function(c,a){for(var b in a)c.style[b]=a[b]}},t.prototype={className:"CssPropNum",constructor:t,get value(){return this.__value},set value(a){this.__element.style[this.__prop]=a+this.__suffix,this.__value=a}},t.parseCSSValue=function(a){var c={value:0,suffix:""},b;a=String(a).replace(/ /g,"");for(b=a.length;b--;)if(!isNaN(a.charAt(b))){c.value=Number(a.substring(0,b+1)),c.suffix=a.substring(b+1,a.length);break}return c},t.tween=function(e,f,i,g,h){var a,b,c,d={object:e};for(b in f)c=t.parseCSSValue(f[b]),a=new t(e,b,c.suffix),a=ae.run(a,"value",c.value,i,1e3*g,h);return a.onComplete=function(){d.hasOwnProperty("onComplete")&&d.onComplete()},d},t.instances={},c.REF_DEFAULT={end:function(){}},Object.defineProperty(c,"ref",{get:function(){var a=c.__ref;return c.__ref=c.REF_DEFAULT,a},set:function(a){c.__ref=a},enumerable:!0,configurable:!0}),c.ref=c.REF_DEFAULT,c.createTask2=function(b,e,f,d){var a=function(){d&&b.onStartBranch();var a=arguments.callee;c.ref=d?{end:function(){b.endBranch()}}:b,a._result=a._func.apply(null,a._arguments)};return a._arguments=f,a._func=e,a._result={},a},c.createTask3=function(b,e,f,g,d){var a=function(){d&&b.onStartBranch();var a=arguments.callee;c.ref=d?{end:function(){b.endBranch()}}:b,a._result=a._object[a._method].apply(a._object,a._arguments)};return a._arguments=g,a._method=f,a._object=e,a._result={},a},b={get:function(e,f,b,c,d){var a=Math.PI*b/180;return b=Math.cos(a),a=Math.sin(a),{a:c*b,b:c*a,c:-d*a,d:d*b,e,f}},get2:function(g,h,b,d,e,f,c){var a=Math.PI*b/180;return b=Math.cos(a),a=Math.sin(a),{a:(b-c*a)*d,b:(a+c*b)*d,c:(f*b-a)*e,d:(f*a+b)*e,e:g,f:h}},applyTo:function(b,a){return{x:a.a*b.x+a.c*b.y+a.e,y:a.b*b.x+a.d*b.y+a.f}},applyToOffset:function(a,b){return{x:b.a*a.x+b.c*a.y,y:b.b*a.x+b.d*a.y}},multiply:function(a,b){return{a:a.a*b.a+a.c*b.b,b:a.b*b.a+a.d*b.b,c:a.a*b.c+a.c*b.d,d:a.b*b.c+a.d*b.d,e:a.a*b.e+a.c*b.f+a.e,f:a.b*b.e+a.d*b.f+a.f}},get3:function(g,h,b,c,d,f,e){var a=Math.PI*b/180;return b=Math.cos(a),a=Math.sin(a),{a:c*b,b:c*a,c:-d*a,d:d*b,e:d*a*e-c*b*f+g,f:-c*a*f-d*b*e+h}},invert:function(a){var b=a.c*a.b-a.a*a.d;return{a:-a.d/b,b:a.b/b,c:a.c/b,d:-a.a/b,e:(a.e*a.d-a.c*a.f)/b,f:(a.f*a.a-a.b*a.e)/b}},getSkew:function(a,b){return{a:1,b:a,c:b,d:1,e:0,f:0}},getStretch:function(c,a,g,h){var b=Math.PI*a/180,d,e,f;return a=Math.cos(b),d=Math.sin(b),b=a*a,e=d*d,f=a*d,a*=d,{a:c*b+e,b:c*f-a,c:c*a-f,d:c*e+b,e:g||0,f:h||0}},transform:function(b,a){b.transform(a.a,a.b,a.c,a.d,a.e,a.f)},setTransform:function(b,a){b.setTransform(a.a,a.b,a.c,a.d,a.e,a.f)},setMovedTransform:function(b,a,c,d){b.setTransform(a.a,a.b,a.c,a.d,a.e+c,a.f+d)},calculateFor:function(a){for(var c=a.__stage,b=[];a!=c;)b.push(a),a=a.parent;for(a=b.length;a--;)b[a].calcOwnMatrices()}},b.GLOBAL=b.UNIT={a:1,b:0,c:0,d:1,e:0,f:0},b.ZERO=b.NULL={a:0,b:0,c:0,d:0,e:0,f:0},X={globalToLocal:function(c,a,d){return d||b.calculateFor(a),b.applyTo(c,b.invert(a.matrixGlobal))},localToGlobal:function(c,a,d){return d||b.calculateFor(a),b.applyTo(c,a.matrixGlobal)},localToParent:function(c,a,d){return d||a.calcOwnMatrices(),b.applyTo(c,a.matrixLocal)},localToChild:function(c,d,a,e){return a.parent==d?(e||a.calcOwnMatrices(),b.applyTo(c,b.invert(a.matrixLocal))):null},localToLocal:function(d,a,c,e){return e||(b.calculateFor(a),b.calculateFor(c)),b.applyTo(b.applyTo(d,a.matrixGlobal),b.invert(c.matrixGlobal))}},p.prototype={className:"Shape",constructor:p,build:void 0,copy:al},p.EMPTY=new p(function(a){}),p.OWN_PROPS=I,z={SquareShape:function(a){this.super(),this.size=d(a,100)},RectangleShape:function(a,b){this.super(),this.width=d(a,200),this.height=d(b,100)},RhombShape:function(a,b){this.super(),this.width=d(a,100),this.height=d(b,200)},RoundRectangleShape:function(a,b,c,e,f,g){this.super(),this.width=d(a,200),this.height=d(b,100),this.ra=d(c,10),this.rb=d(e,this.ra),this.rc=d(f,this.rb),this.rd=d(g,this.rc)},CircleShape:function(a){this.super(),this.radius=d(a,50)},EllipseShape:function(a,b){this.super(),this.a=d(a,50),this.b=d(b,.618*this.a)},SectorShape:function(a,b,c){this.super(),this.radius=d(a,50),this.startAngle=b||0,this.endAngle=c||0},RingShape:function(a,b){this.super(),this.radius=d(a,50),this.thickness=ag(b,0,this.radius,this.radius/2)},ArcShape:function(a,b,c,e){this.super(),this.radius=d(a,50),this.thickness=ag(b,0,this.radius,this.radius/2),this.startAngle=c||0,this.endAngle=e||2*Math.PI},CapsuleShape:function(a,b,c){this.super(),this.length=d(a,100),this.radius=ag(b,0,this.length/2,this.length/3),c&&(this.originY=2*this.radius,this.rotation=90)},StarShape:function(a,b,c,e){this.super(),this.ra=d(a,50),this.rb=d(b,100),this.n=d(c,5),this.offsetAngle=e||0},PolygonShape:function(a,b,c){this.super(),this.radius=d(a,50),this.n=d(b,5),this.offsetAngle=c||0}},I={SquareShape:function(a){a.rect(0,0,this.size,this.size)},RectangleShape:function(a){a.rect(0,0,this.width,this.height)},RhombShape:function(a){var b=this.width/2,c=this.height/2;a.moveTo(0,-c),a.lineTo(b,0),a.lineTo(0,c),a.lineTo(-b,0),a.closePath()},RoundRectangleShape:function(a){a.moveTo(this.ra,0),a.lineTo(this.width-this.rb,0),a.arcTo(this.width,0,this.width,this.rb,this.rb),a.lineTo(this.width,this.height-this.rc),a.arcTo(this.width,this.height,this.width-this.rc,this.height,this.rc),a.lineTo(this.rd,this.height),a.arcTo(0,this.height,0,this.height-this.rd,this.rd),a.lineTo(0,this.ra),a.arcTo(0,0,this.ra,0,this.ra),a.closePath()},CircleShape:function(a){a.moveTo(this.radius,0),a.arc(0,0,this.radius,0,2*Math.PI)},EllipseShape:function(a){a.save(),a.scale(this.a/this.b,1),a.moveTo(this.b,0),a.arc(0,0,this.b,0,2*Math.PI),a.restore()},SectorShape:function(a){var b=Math.abs(this.endAngle-this.startAngle)<2*Math.PI;b?(a.moveTo(0,0),a.lineTo(this.radius*Math.cos(this.startAngle),this.radius*Math.sin(this.startAngle))):a.moveTo(this.radius*Math.cos(this.startAngle),this.radius*Math.sin(this.startAngle)),a.arc(0,0,this.radius,this.startAngle,this.endAngle),b&&(a.lineTo(0,0),a.closePath())},RingShape:function(a){var b=this.radius>this.thickness?this.radius-this.thickness:0;a.moveTo(this.radius,0),a.arc(0,0,this.radius,0,2*Math.PI),a.moveTo(b,0),a.arc(0,0,b,0,2*Math.PI,!0),a.moveTo(this.radius,0)},ArcShape:function(a){var b=this.radius>this.thickness?this.radius-this.thickness:0,c=Math.abs(this.endAngle-this.startAngle)<2*Math.PI;a.moveTo(this.radius*Math.cos(this.startAngle),this.radius*Math.sin(this.startAngle)),a.arc(0,0,this.radius,this.startAngle,this.endAngle),c?a.lineTo(b*Math.cos(this.endAngle),b*Math.sin(this.endAngle)):a.moveTo(b*Math.cos(this.endAngle),b*Math.sin(this.endAngle)),a.arc(0,0,b,this.endAngle,this.startAngle,!0),c&&(a.lineTo(this.radius*Math.cos(this.startAngle),this.radius*Math.sin(this.startAngle)),a.closePath())},CapsuleShape:function(a){var b=Math.PI/2;a.moveTo(this.radius,0),a.lineTo(this.length-this.radius,0),a.arc(this.length-this.radius,this.radius,this.radius,-b,b),a.lineTo(this.radius,2*this.radius),a.arc(this.radius,this.radius,this.radius,b,-b),a.closePath()},StarShape:function(b){var e=this.offsetAngle,a=e-Math.PI/2,c=a+Math.PI/this.n,d;b.moveTo(this.rb*Math.cos(a),this.rb*Math.sin(a)),b.lineTo(this.ra*Math.cos(c),this.ra*Math.sin(c));for(d=1;d<this.n;d++)a=Math.PI*(d/this.n*2-.5)+e,c=a+Math.PI/this.n,b.lineTo(this.rb*Math.cos(a),this.rb*Math.sin(a)),b.lineTo(this.ra*Math.cos(c),this.ra*Math.sin(c));b.closePath()},PolygonShape:function(b){var d=this.offsetAngle,a=d-Math.PI/2,c;b.moveTo(this.radius*Math.cos(a),this.radius*Math.sin(a));for(c=1;c<this.n;c++)a=Math.PI*(c/this.n*2-.5)+d,b.lineTo(this.radius*Math.cos(a),this.radius*Math.sin(a));b.closePath()}},ah={SquareShape:["size"],RectangleShape:["width","height"],RhombShape:["width","height"],RoundRectangleShape:"width height ra rb rc rd".split(" "),CircleShape:["radius"],EllipseShape:["a","b"],SectorShape:["radius","startAngle","endAngle"],RingShape:["radius","thickness"],ArcShape:["radius","thickness","startAngle","endAngle"],CapsuleShape:["length","radius","isVertical"],StarShape:["ra","rb","n","offsetAngle"],PolygonShape:["radius","n","offsetAngle"]};for(x in z)u=z[x],V(u,p),u.prototype.className=x,u.prototype.superclassName="ShapeLayer",u.prototype.build=I[x],u.SPECIFIC_OWN_PROPS=ah[x],u.OWN_PROPS=p.OWN_PROPS.concat(ah[x]);G.prototype={className:"ShapeLayer",superclassName:"CanvasLayer",constructor:G,get strokeWidth(){return this.__strokeWidth},set strokeWidth(a){this.paint=a?this.__useFill?this.fillAndStrokeShape:this.strokeShape:this.__useFill?this.fillShape:this.paintNothing,this.__strokeWidth=a},get useFill(){return this.__useFill},set useFill(a){this.paint=a?this.__strokeWidth?this.fillAndStrokeShape:this.fillShape:this.__strokeWidth?this.strokeShape:this.paintNothing,this.__useFill=a},get name(){return this.__name},set name(b){var a=this.parent;a&&(typeof b=="string"?(!(b in a)||"parent"in a[b]&&a[b].parent==a&&a[b].name===b)&&(a[b]=this):this.__name in a&&a[this.__name]==this&&delete a[this.__name]),this.__name=b},buildShape:function(a){a.save(),b.setTransform(a,this.shapeMatrixGlobal),this.shape.build(a),a.restore()},buildMovedShape:function(a,c,d){b.setMovedTransform(a,this.shapeMatrixGlobal,c,d),this.shape.build(a)},paintNothing:function(a){},fillAndStrokeShape:function(a){this.strokeOverFill?(this.fillShape(a),this.strokeShape(a)):(this.strokeShape(a),this.fillShape(a))},fillShape:function(a){a.fillStyle=this.color,a.fill()},strokeShape:function(a){a.strokeStyle=this.strokeColor,a.lineWidth=this.__strokeWidth,a.lineCap=this.strokeCap,a.lineJoin=this.strokeJoin,a.miterLimit=this.strokeMiterLimit,a.stroke()},calc:function(){this.matrixLocal=b.get3(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.originX,this.originY),this.matrixGlobal=this.parent.matrixGlobal?b.multiply(this.parent.matrixGlobal,this.matrixLocal):this.matrixLocal},draw:function(){var a=this.__context;a.save(),this.setMatrixAndAlpha(a),a.beginPath(),this.buildShape(a),this.paint(a),a.restore()},setMatrixAndAlpha:function(c){b.setTransform(c,this.matrixGlobal);var a=this.shape;this.shapeMatrixLocal=b.get3(a.x,a.y,a.rotation,a.scaleX,a.scaleY,a.originX,a.originY),this.shapeMatrixGlobal=b.multiply(this.matrixGlobal,this.shapeMatrixLocal),c.globalAlpha*=this.alpha},setContext:function(a){this.__context=a},setStage:function(a){this.__stage=a,this.onDisplayed&&a&&this.onDisplayed()},isolate:function(){this.__context=this.__stage=this.parent=null},copy:function(){var a=E.call(this);return a.shape=this.shape.copy(),a},hitTest:function(d,e){var a=this.__context,c;return b.setTransform(a,this.shapeMatrixGlobal),a.beginPath(),this.shape.build(a),a=!!this.__useFill&&a.isPointInPath(d,e),!a&&this.useDeepHitTest&&(c=h.PIXEL,c.save(),c.beginPath(),this.buildMovedShape(c,-d,-e),b.setMovedTransform(c,this.matrixGlobal,-d,-e),this.paint(c),a=Boolean(c.getImageData(0,0,1,1).data[3]),c.restore(),a&&c.clearRect(0,0,2,2)),a}},G.OWN_PROPS=a.concat("strokeOverFill color strokeColor __strokeWidth strokeCap strokeJoin strokeMiterLimit useDeepHitTest __useFill paint".split(" ")),V(F,G),F.prototype.className="RectangleLayer",F.prototype.superclassName="CanvasLayer",Object.defineProperty(F.prototype,"width",{get:function(){return this.shape.width},set:function(a){this.shape.width=a}}),Object.defineProperty(F.prototype,"height",{get:function(){return this.shape.height},set:function(a){this.shape.height=a}}),V(P,G),P.prototype.className="CircleLayer",P.prototype.superclassName="CanvasLayer",Object.defineProperty(P.prototype,"radius",{get:function(){return this.shape.radius},set:function(a){this.shape.radius=a}}),S.prototype={className:"ShapeRegion",superclassName:"CanvasLayer",constructor:S,drawNothing:function(){},drawShape:function(){var a=this.__context;a.save(),this.setMatrix(a),a.beginPath(),a.globalAlpha*=this.alpha,a.fillStyle=this.color,this.shape.build(a),a.fill(),a.restore()},get name(){return this.__name},set name(b){var a=this.parent;a&&(typeof b=="string"?(!(b in a)||"parent"in a[b]&&a[b].parent==a&&a[b].name===b)&&(a[b]=this):this.__name in a&&a[this.__name]==this&&delete a[this.__name]),this.__name=b},get visible(){return this.__visible},set visible(a){this.draw=a?this.drawShape:this.drawNothing,this.__visible=a},calc:function(){this.matrixLocal=b.get3(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.originX,this.originY),this.matrixGlobal=this.parent.matrixGlobal?b.multiply(this.parent.matrixGlobal,this.matrixLocal):this.matrixLocal},setMatrix:function(c){var a=this.shape;this.shapeMatrixLocal=b.get3(a.x,a.y,a.rotation,a.scaleX,a.scaleY,a.originX,a.originY),this.shapeMatrixGlobal=b.multiply(this.matrixGlobal,this.shapeMatrixLocal),b.setTransform(c,this.shapeMatrixGlobal)},setContext:function(a){this.__context=a},setStage:function(a){this.__stage=a,this.onDisplayed&&a&&this.onDisplayed()},isolate:function(){this.__context=this.__stage=this.parent=null},copy:function(){var a=E.call(this);return a.shape=this.shape.copy(),a},hitTest:function(b,c){var a=this.__context;return this.setMatrix(a),a.beginPath(),this.shape.build(a),a.isPointInPath(b,c)}},S.OWN_PROPS=a.concat(["draw","color","__visible"]),O={DRAG_START:"dragBehaviorStart",DRAG_END:"dragBehaviorEnd",DRAG_MOVE:"dragBehaviorMove"},U=function(){function B(e){s=c.gesturePoint,isNaN(s.x)||isNaN(s.y)||(d=a.parent.isContainer?X.globalToLocal(s,a.parent,!0):s,b.idle||(q=d.x-x,r=d.y-w,isNaN(q)||b.fixedX||(a.x=q<b.minX?b.minX:q>b.maxX?b.maxX:q),isNaN(r)||b.fixedY||(a.y=r<b.minY?b.minY:r>b.maxY?b.maxY:r)),(v=(e-u)/1e3)?(i=d.x-l.x,k=d.y-l.y,n=i/v,p=k/v):n=p=i=k=0,a.dispatchEvent(O.DRAG_MOVE,{x:d.x,y:d.y,speedX:n,speedY:p,deltaX:i,deltaY:k}),l.x=d.x,l.y=d.y,u=e)}function A(a){c.gesturePoint=c.getMousePoint(a)}function z(a){c.gesturePoint=c.getTouchPoint(a)}function y(a){document.addEventListener("mousemove",A),document.addEventListener("touchmove",z)}function e(a){document.removeEventListener("mousemove",A),document.removeEventListener("touchmove",z)}function t(d){a=d.currentTarget,(c=a.__stage)&&(m=c.canvas,b=j.get(a),f=a.parent.isContainer?X.globalToLocal(c.gesturePoint,a.parent,!0):c.gesturePoint,x=f.x-a.x,w=f.y-a.y,c.metronome.addListener(B),m.addEventListener("mouseleave",y),m.addEventListener("mouseenter",e),document.addEventListener("mouseup",e),document.addEventListener("touchend",e),document.addEventListener("touchcancel",e),a.dispatchEvent(O.DRAG_START,{x:f.x,y:f.y,speedX:0,speedY:0,deltaX:0,deltaY:0}),l.x=f.x,l.y=f.y,n=p=i=k=0,u=(new Date).getTime())}function h(f){c&&c.metronome.removeListener(B),m&&(m.removeEventListener("mouseleave",y),m.removeEventListener("mouseenter",e)),document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e),document.removeEventListener("touchcancel",e),e(f),a&&a.dispatchEvent(O.DRAG_END,{x:d.x,y:d.y,speedX:n,speedY:p,deltaX:i,deltaY:k}),a=c=b=void 0}function g(a){a=a&&a instanceof Object?a:{},this.idle=a.idle,this.fixedX=a.fixedX,this.fixedY=a.fixedY,this.minX=a.hasOwnProperty("minX")?a.minX:Number.NEGATIVE_INFINITY,this.maxX=a.hasOwnProperty("maxX")?a.maxX:Number.POSITIVE_INFINITY,this.minY=a.hasOwnProperty("minY")?a.minY:Number.NEGATIVE_INFINITY,this.maxY=a.hasOwnProperty("maxY")?a.maxY:Number.POSITIVE_INFINITY}var x,w,a,c,m,b,j=new o,q,r,n,p,i,k,u,v,f,l={},d,s;return g.prototype={className:"DragBehavior",superclassName:"Object",constructor:g,addTo:function(a){a.addEventListener("mouseDown",t),document.addEventListener("mouseup",h),document.addEventListener("touchend",h),document.addEventListener("touchcancel",h),j.set(a,this)},removeFrom:function(a){a.removeEventListener("mouseDown",t),document.removeEventListener("mouseup",h),document.removeEventListener("touchend",h),document.removeEventListener("touchcancel",h),j.delete(a)},addedTo:function(a){return j.get(a)===this}},g.addedTo=function(a){return j.has(a)},g.of=function(a){return j.get(a)},g.catch=function(a){g.addedTo(a)&&a.__stage&&a.__stage.isDown&&t({currentTarget:a})},g}(),ac={line:function(a,b){return{init:function(c,d){function e(b){return c+b*(a-c)}function f(a){return d+a*(b-d)}var g=r(a-c,b-d);return!!g&&{type:"line",isRealPath:!0,hasConstantCurvature:!0,x:e,y:f,locate:function(a,b){a.x=e(b),a.y=f(b)},locateAndRotate:function(g,h){g.x=e(h),g.y=f(h),g.rotation=180*Math.atan2(b-d,a-c)/Math.PI},speed:function(a){return g},length:g,endX:a,endY:b,build:function(c){c.lineTo(a,b)},buildRange:function(a,b,c){a.moveTo(e(b),f(b)),a.lineTo(e(c),f(c))},injectLeap:function(){this.archBuild=this.build,this.build=function(a){a.moveTo(c,d),this.archBuild(a)}}}},getInitRotation:function(c,d){return 2>arguments.length&&(d=c.y,c=c.x),180*Math.atan2(b-d,a-c)/Math.PI}}},arc:function(b,c,a,d,e){return{init:function(l,k){var h,t,s,p,i,j,f,g,m,q;function n(b){return i+a*Math.cos(f+b*(g-f))}function o(b){return j+a*Math.sin(f+b*(g-f))}return!(h=r(b-l,c-k),!h)&&(a=!a||a<h/2?h/2+.1:a,t=(l+b)/2,s=(k+c)/2,h=Math.sqrt(a*a-h*h/4)/h,p=Boolean(d)==Boolean(e)?1:-1,i=t+p*h*(k-c),j=s+p*h*(b-l),f=Math.atan2(k-j,l-i),g=Math.atan2(c-j,b-i),Math.abs(g-f)>Math.PI!=Boolean(e)&&(f+=f>g?-2*Math.PI:2*Math.PI),m=a*(g-f),q=Math.abs(m),{type:"arc",isRealPath:!0,hasConstantCurvature:!0,x:n,y:o,locate:function(a,b){a.x=n(b),a.y=o(b)},locateAndRotate:function(b,a){b.x=n(a),b.y=o(a),b.rotation=180*Math.atan2(m*Math.cos(f+a*(g-f)),-m*Math.sin(f+a*(g-f)))/Math.PI},speed:function(a){return q},length:q,endX:b,endY:c,build:function(b){b.arc(i,j,a,f,g,d)},buildRange:function(c,b,e){c.moveTo(n(b),o(b)),c.arc(i,j,a,f+(g-f)*b,f+(g-f)*e,d)},injectLeap:function(){this.archBuild=this.build,this.build=function(a){a.moveTo(l,k),this.archBuild(a)}}})},getInitRotation:function(i,j){var f,g,h,k;return 2>arguments.length&&(j=i.y,i=i.x),f=r(b-i,c-j),a=!a||a<f/2?f/2:a,g=(i+b)/2,h=(j+c)/2,f=Math.sqrt(a*a-f*f/4)/f,k=Boolean(d)==Boolean(e)?1:-1,g=g+k*f*(j-c),f=h+k*f*(b-i),h=Math.atan2(j-f,i-g),g=Math.atan2(c-f,b-g),Math.abs(g-h)>Math.PI!=Boolean(e)&&(h+=h>g?-2*Math.PI:2*Math.PI),g=a*(g-h),180*Math.atan2(g*Math.cos(h),-g*Math.sin(h))/Math.PI}}},bezier2:function(a,b,c,d){return{init:function(e,f){function g(b){return Math.pow(1-b,2)*e+2*b*(1-b)*a+b*b*c}function h(a){return Math.pow(1-a,2)*f+2*a*(1-a)*b+a*a*d}if(e==a&&a==c&&f==b&&b==d)return!1;var i=2*e-4*a+2*c,j=2*a-2*e,k=2*f-4*b+2*d,l=2*b-2*f;return{type:"bezier2",isRealPath:!0,hasConstantCurvature:!1,x:g,y:h,locate:function(a,b){a.x=g(b),a.y=h(b)},locateAndRotate:function(b,a){b.x=g(a),b.y=h(a),b.rotation=180*Math.atan2(a*k+l,a*i+j)/Math.PI},speed:function(a){return r(a*i+j,a*k+l)},length:function(){for(var c=0,a=100,b,d,e,f;a--;)b=g(a/100),d=h(a/100),e=g((a+1)/100),f=h((a+1)/100),b=r(e-b,f-d),c+=b;return c}(),endX:c,endY:d,build:function(e){e.quadraticCurveTo(a,b,c,d)},buildRange:function(l,g,i){var h=1-g,j=1-i,m=h*h,n=2*g*h,o=g*g,k=h*j,h=g*j+h*i,p=g*i,q;g=j*j,j=2*i*j,q=i*i,i=k*e+h*a+p*c,k=k*f+h*b+p*d,h=g*e+j*a+q*c,g=g*f+j*b+q*d,l.moveTo(m*e+n*a+o*c,m*f+n*b+o*d),l.quadraticCurveTo(i,k,h,g)},injectLeap:function(){this.archBuild=this.build,this.build=function(a){a.moveTo(e,f),this.archBuild(a)}}}},getInitRotation:function(c,d){return 2>arguments.length&&(d=c.y,c=c.x),180*Math.atan2(2*b-2*d,2*a-2*c)/Math.PI}}},bezier3:function(a,b,c,d,e,f){return{init:function(g,h){function i(b){return Math.pow(1-b,3)*g+3*b*(1-b)*(1-b)*a+3*b*b*(1-b)*c+b*b*b*e}function j(a){return Math.pow(1-a,3)*h+3*a*(1-a)*(1-a)*b+3*a*a*(1-a)*d+a*a*a*f}if(g==a&&a==c&&c==e&&h==b&&b==d&&d==f)return!1;var k=-3*g+9*a-9*c+3*e,l=6*g-12*a+6*c,m=-3*g+3*a,n=-3*h+9*b-9*d+3*f,o=6*h-12*b+6*d,p=-3*h+3*b;return{type:"bezier3",isRealPath:!0,hasConstantCurvature:!1,x:i,y:j,locate:function(a,b){a.x=i(b),a.y=j(b)},locateAndRotate:function(b,a){b.x=i(a),b.y=j(a),b.rotation=180*Math.atan2(a*a*n+a*o+p,a*a*k+a*l+m)/Math.PI},speed:function(a){return r(a*a*k+a*l+m,a*a*n+a*o+p)},length:function(){for(var c=0,a=100,b,d,e,f;a--;)b=i(a/100),d=j(a/100),e=i((a+1)/100),f=j((a+1)/100),b=r(e-b,f-d),c+=b;return c}(),endX:e,endY:f,build:function(g){g.bezierCurveTo(a,b,c,d,e,f)},buildRange:function(q,i,j){var k=1-i,l=1-j,w=k*k*k,v=3*i*k*k,s=3*i*i*k,r=i*i*i,m=k*k*l,p=2*i*k*l+k*k*j,t=i*i*l+2*k*i*j,u=i*i*j,o=k*l*l,n=i*l*l+2*k*j*l,x=2*i*j*l+k*j*j,y=i*j*j,z;i=l*l*l,k=3*j*l*l,l=3*j*j*l,z=j*j*j,j=m*g+p*a+t*c+u*e,m=m*h+p*b+t*d+u*f,p=o*g+n*a+x*c+y*e,o=o*h+n*b+x*d+y*f,n=i*g+k*a+l*c+z*e,i=i*h+k*b+l*d+z*f,q.moveTo(w*g+v*a+s*c+r*e,w*h+v*b+s*d+r*f),q.bezierCurveTo(j,m,p,o,n,i)},injectLeap:function(){this.archBuild=this.build,this.build=function(a){a.moveTo(g,h),this.archBuild(a)}}}},getInitRotation:function(c,d){return 2>arguments.length&&(d=c.y,c=c.x),180*Math.atan2(-3*d+3*b,-3*c+3*a)/Math.PI}}},custom:function(a,b,c){return c=3>arguments.length?100:Math.round(Math.abs(c)),{init:function(e,f){var d=function(){for(var e=0,c=100,d,f,g,h;c--;)d=a(c/100),f=b(c/100),g=a((c+1)/100),h=b((c+1)/100),d=r(g-d,h-f),e+=d;return e}();return!!d&&{type:"custom",isRealPath:!0,hasConstantCurvature:!1,x:a,y:b,locate:function(c,d){c.x=a(d),c.y=b(d)},locateAndRotate:function(d,c){d.x=a(c),d.y=b(c),d.rotation=180*Math.atan2((b(c+1e-8)-b(c))/1e-8,(a(c+1e-8)-a(c))/1e-8)/Math.PI},speed:function(c){return r((a(c+1e-8)-a(c))/1e-8,(b(c+1e-8)-b(c))/1e-8)},length:d,endX:a(1),endY:b(1),build:function(a){this.buildRange(a,0,1)},buildRange:function(g,d,h){var e,f;h-=d,g.moveTo(a(d),b(d));for(f=0;f<c;f++)e=d+(f+1)*h/c,g.lineTo(a(e),b(e))},injectLeap:function(){}}},getInitRotation:function(c,d){return 2>arguments.length&&(d=c.y,c=c.x),180*Math.atan2((b(1e-8)-b(0))/1e-8,(a(1e-8)-a(0))/1e-8)/Math.PI}}},leap:function(a,b){return{init:function(c,d){return!(c==a&&d==b)&&{type:"leap",isRealPath:!1,endX:a,endY:b}}}},combo:function(){var a=arguments;return{init:function(n,m){var e,f,l,k,d,j,g,b,i,c;function h(c){for(var a=e;a--;)if(c>=b[a])return a}if(e=a.length,!e)return!1;l=n,k=m,j=!1,g=0,b=[0],i=!0,c=[];for(f=0;f<e;f++)(d=a[f].init(l,k))&&(d.isRealPath?(j&&d.injectLeap(),g+=d.length,b.push(g),i=i&&d.hasConstantCurvature,c.push(d),j=!1):j=!0,l=d.endX,k=d.endY);e=c.length;for(f=e+1;f--;)b[f]/=g;return{type:"combo",isRealPath:!0,hasConstantCurvature:i,x:function(d){var a=h(d);return c[a].x((d-b[a])/(b[a+1]-b[a]))},y:function(d){var a=h(d);return c[a].y((d-b[a])/(b[a+1]-b[a]))},locate:function(e,d){var a=h(d);c[a].locate(e,(d-b[a])/(b[a+1]-b[a]))},locateAndRotate:function(e,d){var a=h(d);c[a].locateAndRotate(e,(d-b[a])/(b[a+1]-b[a]))},speed:function(d){var a=h(d);return g/c[a].length*c[a].speed((d-b[a])/(b[a+1]-b[a]))},length:g,endX:c[e-1].endX,endY:c[e-1].endY,build:function(b){for(var a=0,d=c.length;a<d;a++)c[a].build(b)},buildRange:function(g,e,f){for(var d,a=c.length;a--;)f>b[a]&&e<b[a+1]&&(d=b[a+1]-b[a],c[a].buildRange(g,(Math.max(b[a],e)-b[a])/d,(Math.min(b[a+1],f)-b[a])/d))},injectLeap:function(){this.archBuild=this.build,this.build=function(a){a.moveTo(n,m),this.archBuild(a)}}}},getInitRotation:function(){return a[0].getInitRotation.apply(null,arguments)}}}},Tween2D={run:function(b,a,w,l,k,i){var t=c.ref,h={object:b,stop:function(){i.removeListener(j)}},v,o,m,g,s,q,r,p,d,u,n,j;return a=(a instanceof Array?ac.combo.apply(null,a):a).init(b.x,b.y),l=l||f.lin(),k=k||500,i||(i=b.__stage&&b.__stage.metronome?b.__stage.metronome:e.getInstance()),a?(v=a.speed,o=(new Date).getTime(),m=0,d=0,u=a.length,n=w?a.locateAndRotate:a.locate,j=a.hasConstantCurvature?function(){g=((new Date).getTime()-o)/k,d+=(g-m)*u/v(d),1>d?(n(b,l(0,1,d)),m=g):(n(b,1),i.removeListener(j),h.hasOwnProperty("onComplete")&&h.onComplete(),t.end())}:function(){if(s=((new Date).getTime()-o)/k,1>s){g=l(0,1,s),q=g-m;for(p=0;Math.abs(p)<Math.abs(q);)r=q/50,p+=r*v(d)/u,d+=r;n(b,d),m+=p}else n(b,1),i.removeListener(j),h.hasOwnProperty("onComplete")&&h.onComplete(),t.end()}):(o=(new Date).getTime(),j=function(){g=((new Date).getTime()-o)/k,d=l(0,1,g),1<=g&&(i.removeListener(j),h.hasOwnProperty("onComplete")&&h.onComplete(),t.end())}),i.addListener(j),h}},window.hasOwnProperty("jsband")||(window.jsband={}),a=window.jsband,a.wrap={},a.ui={},a.use=function(a){a=a.split(" ").join("");var b,c=a.lastIndexOf(".*");if(c==a.length-2)for(b in a=eval(a.substring(0,c)),a)window[b]=a[b];else b=a.split("."),b=b[b.length-1],window[b]=eval(a)},a.trace=j,a.extend=V,a.createClass=function(d,a,c){function b(){if(a)for(var b in a)this[b]=a[b];c&&c(this)}return b.prototype=d,b.prototype.constructor=b},a.getColorComponents=N,a.rgbToHsl=ao,a.getHslComponents=function(a){return ao(N(a))},a.getRgbComponents=N,a.EnterFrameSignal=a.Metronome=e,a.Ease=f,a.Pause=aa,a.Wait=ad,a.MonoTween={run:function(a,b,j,n,q,i){var p=c.ref,h={object:a},l=q||30,m=n||f.lin(),g,o=a[b],d="change"+b,k;return g=i?i:a.__stage&&a.__stage.metronome?a.__stage.metronome:e.getInstance(),k=1,a[d]=function(){this[b]=m(o,j,k++/l),k>l&&(this[b]=j,g.removeListener(this,d),delete this[d],h.hasOwnProperty("onComplete")&&setTimeout(function(){h.onComplete()},0),p.end())},g.addListener(a,d),h}},a.MonoTweenTimebased=ae,a.PolyTween={run:function(b,g,h,r,n,a){var q=c.ref,k={object:b},o=r||30,s=h||f.lin(),l=n?n:b.__stage&&b.__stage.metronome?b.__stage.metronome:e.getInstance(),m,j,d,p,i;a?(h=a.startFrame||1,m=a.looped):(h=1,m=!1),j=0,p={};for(d in g)p[d]=b[d],j++;i=j;for(d in g)a="change"+d,b[a]=function(){i=i?i-1:j-1;var a=arguments.callee,b=a.p,c=a.updateFunctionName;this[b]=s(p[b],g[b],a.n++/o),a.n>o&&(this[b]=g[b],m?a.n=1:(l.removeListener(this,c),delete this[c],i||(k.hasOwnProperty("onComplete")&&setTimeout(function(){k.onComplete()},0),q.end())))},b[a].p=d,b[a].n=h,b[a].updateFunctionName=a,l.addListener(b,a);return k}},a.PolyTweenTimebased=a.Tween=D,a.ColorTween=R,a.ColorTweenTimebased=R,a.Boom=_,a.Boomerang={run:function(a,b,f,r,o,k){var q=c.ref,j={object:a},p=r||30,s=f||_.osc(),l=o?o:a.__stage&&a.__stage.metronome?a.__stage.metronome:e.getInstance(),m,i,d,g,n,h;k?(f=k.startFrame||1,m=k.looped):(f=1,m=!1),i=0,g={},n={};for(d in b)g[d]=a[d],n[d]=b[d]-g[d],i++;h=i;for(d in b)b="change"+d,a[b]=function(){h=h?h-1:i-1;var a=arguments.callee,b=a.p,c=a.updateFunctionName;this[b]=g[b]+n[b]*s(a.n++/p),a.n>p&&(this[b]=g[b],m?a.n=1:(l.removeListener(this,c),delete this[c],h||(j.hasOwnProperty("onComplete")&&setTimeout(function(){j.onComplete()},0),q.end())))},a[b].p=d,a[b].n=f,a[b].updateFunctionName=b,l.addListener(a,b);return j}},a.BoomerangTimebased={run:function(a,b,f,o,k){var n=c.ref,i={object:a},j=o||500,m=f||_.osc(),h=k?k:a.__stage&&a.__stage.metronome?a.__stage.metronome:e.getInstance(),d,g,l,p;f=0,g={},l={};for(d in b)g[d]=a[d],l[d]=b[d]-g[d],f++;p=(new Date).getTime();for(d in b)b="change"+d,a[b]=function(d){var a=arguments.callee,b=a.p,c=a.updateFunctionName;this[b]=g[b]+l[b]*m(a.t/j),a.t=d-p,a.t>j&&(this[b]=g[b],h.removeListener(this,c),delete this[c],!a.propsCounter)&&(i.hasOwnProperty("onComplete")&&i.onComplete(),n.end())},a[b].p=d,a[b].t=0,a[b].propsCounter=--f,a[b].updateFunctionName=b,h.addListener(a,b);return i}},a.Shift=af,a.ShiftTimebased=ak,a.CanvasContainer=H,a.CanvasComposition=h,a.ImageLayer=W,a.TextLoader=C,a.XMLLoader=function(){this.data=null;var a=this;this.load=function(d){var e=c.ref,b=new XMLHttpRequest;b.open("GET",d,!0),b.onreadystatechange=function(){b.readyState===4&&(b.status===200||b.status==0)&&(a.data=b.responseXML,a.hasOwnProperty("onComplete")&&a.onComplete(),e.end())},b.send(null)}},a.AtlasData=function(){this.imageURL=this.image=this.scale=this.size=this.format=this.frames=null,this.loaded=!1;var a=this;this.load=function(d,b){var e,f;function g(c){if(c=c instanceof C?JSON.parse(c.data):c,a.frames=c.frames,a.format=c.meta.format,a.size=c.meta.size,a.scale=c.meta.scale,b&&(b instanceof Image||b instanceof HTMLCanvasElement))a.image=b,a.loaded=!0,a.hasOwnProperty("onLoad")&&a.onLoad(),e.end();else{var d=new Image;d.onload=function(){a.image=d,a.loaded=!0,a.hasOwnProperty("onLoad")&&a.onLoad(),e.end()},d.src=a.imageURL=b||c.meta.image}}e=c.ref,typeof d=="string"?(f=new C,f.onComplete=function(){g(this)},f.load(d)):g(d)}},a.AtlasFilmData=ap,a.AtlasFilmDataSheet=function(){var a=this;this.load=function(d){var e=c.ref,b=new C;b.onComplete=function(){a.parse(this.data.trim()),a.hasOwnProperty("onLoad")&&a.onLoad(),e.end()},b.load(d)},this.parse=function(b){b.charAt(0)!="&"&&(b="&".concat(b)),b=b.split("&");for(var g=b.length,c,d,f,e=1;e<g;e++)c=b[e].split("="),f=c[0].trim(),d=new ap,d.parse(c[1]),a[f]=d}},a.AtlasImageLayer=T,a.AtlasFilmLayer=$,a.EventDispatcherBehaivor=l,a.StyleObject=y,a.TextLayer=s,a.CssProp=Y,a.CssPropNum=t,a.CssPropCompound=function(m,l,b,g){for(var h=this,c=-1,e,a=0,i=[],k,d=[],f,j;0<=(c=b.indexOf("[",c+1));)0<=(e=b.indexOf("]",c))&&(k=b.substring(a,c),a=b.substring(c+1,e),f={get:function(){return this["__"+f.subPropName]},set:function(b){this["__"+f.subPropName]=b,b=i.length;for(var c=d[0],a=0;a<b;a++)c+=h["__"+i[a]]+d[a+1];h.__value=m.style[l]=c}},f.subPropName=a,Object.defineProperty(h,a,f),d.push(k),i.push(a),a=e+1);if(d.push(b.substring(e+1,b.length)),g)for(j in g)this[j]=g[j]},a.Queue=c,a.Matrix=b,a.Point=X,a.Shape=p,a.ShapeLayer=G,a.RectangleLayer=F,a.CircleLayer=P,a.ShapeRegion=S,a.CommonMap=M,a.SoftMap=o,a.HardMap=v,a.SoftSet=L,a.HardSet=K,a.IdChain=B,a.HashIterator=ar,a.FontLoader=FontLoader,a.DragBehavior=U,a.DragBehaviorEvent=O,a.CanvasCompositionWrapper=aj,a.Swing=J,a.Wave=m,a.Motion=Z,a.Motion2D=ai,a.Path=ac,a.Tween2D=Tween2D,a.events={CustomEvent:{CUSTOM_STRING_CONSTANT_1:"customEventName_1",CUSTOM_STRING_CONSTANT_2:"customEventName_2"},CustomEventData:function(a,b,c){this.eventProp_1=a,this.eventProp_2=b,this.eventProp_3=c}},a.shapes=z})()}});b()})()